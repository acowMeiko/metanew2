2025-12-23 21:10:17,979 - __main__ - INFO - ============================================================
2025-12-23 21:10:17,979 - __main__ - INFO - 数据集名称: bbh
2025-12-23 21:10:17,979 - __main__ - INFO - 数据集路径: dataset/bbh/boolean_expressions.json
2025-12-23 21:10:17,979 - __main__ - INFO - ============================================================
2025-12-23 21:10:17,979 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-23 21:10:17,979 - __main__ - INFO - ============================================================
2025-12-23 21:10:17,979 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-23 21:10:17,979 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/boolean_expressions.json
2025-12-23 21:10:17,980 - __main__ - INFO - ============================================================
2025-12-23 21:10:17,980 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-23 21:10:17,980 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-23 21:10:17,980 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-23 21:10:17,980 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:10:17,980 - __main__ - INFO - ============================================================
2025-12-23 21:10:17,980 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-23 21:10:17,980 - __main__ - INFO - ============================================================
2025-12-23 21:10:17,980 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:10:17,980 - __main__ - INFO - ============================================================
2025-12-23 21:10:17,980 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:10:17,981 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-23 21:10:17,981 - __main__ - INFO - ============================================================
2025-12-23 21:10:17,981 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:10:17,981 - __main__ - INFO - ============================================================
2025-12-23 21:10:17,981 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-23 21:10:17,981 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:10:17,981 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:10:22,457 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 3,4
2025-12-23 21:10:22,457 - inference.local_inference - INFO - ============================================================
2025-12-23 21:10:22,457 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:10:22,457 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:10:22,457 - inference.local_inference - INFO - ============================================================
2025-12-23 21:18:04,810 - __main__ - INFO - ============================================================
2025-12-23 21:18:04,810 - __main__ - INFO - 数据集名称: gsm8k
2025-12-23 21:18:04,810 - __main__ - INFO - 数据集路径: dataset/gsm8k/test.jsonl
2025-12-23 21:18:04,810 - __main__ - INFO - ============================================================
2025-12-23 21:18:04,810 - __main__ - INFO - 使用数据集适配层加载: gsm8k
2025-12-23 21:18:04,810 - __main__ - INFO - ============================================================
2025-12-23 21:18:04,810 - __main__ - INFO - [数据集适配层] 开始加载数据集: gsm8k
2025-12-23 21:18:04,810 - __main__ - INFO - [数据集适配层] 文件路径: dataset/gsm8k/test.jsonl
2025-12-23 21:18:04,810 - __main__ - INFO - ============================================================
2025-12-23 21:18:04,814 - __main__ - INFO - [数据集适配层] 已加载 JSONL 文件: 1319 条
2025-12-23 21:18:04,814 - __main__ - INFO - 预处理 GSM8K 数据集: 1319 条
2025-12-23 21:18:04,815 - __main__ - INFO - [数据集适配层] 预处理完成: 1319 条有效数据
2025-12-23 21:18:04,815 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:18:04,815 - __main__ - INFO - ============================================================
2025-12-23 21:18:04,815 - __main__ - INFO - 数据集加载成功，共 1319 条数据
2025-12-23 21:18:04,815 - __main__ - INFO - ============================================================
2025-12-23 21:18:04,815 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:18:04,815 - __main__ - INFO - ============================================================
2025-12-23 21:18:04,815 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:18:04,816 - __main__ - INFO - 共需处理 1319 条数据，批次大小: 64
2025-12-23 21:18:04,816 - __main__ - INFO - ============================================================
2025-12-23 21:18:04,816 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:18:04,816 - __main__ - INFO - ============================================================
2025-12-23 21:18:04,816 - __main__ - INFO - 处理批次 [1-128/1319]
2025-12-23 21:18:04,816 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:18:04,816 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:18:09,265 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 3,4
2025-12-23 21:18:09,266 - inference.local_inference - INFO - ============================================================
2025-12-23 21:18:09,266 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:18:09,266 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:18:09,266 - inference.local_inference - INFO - ============================================================
2025-12-23 21:18:18,317 - __main__ - INFO - ============================================================
2025-12-23 21:18:18,317 - __main__ - INFO - 数据集名称: math
2025-12-23 21:18:18,317 - __main__ - INFO - 数据集路径: dataset/math/test.jsonl
2025-12-23 21:18:18,317 - __main__ - INFO - ============================================================
2025-12-23 21:18:18,317 - __main__ - INFO - 使用数据集适配层加载: math
2025-12-23 21:18:18,317 - __main__ - INFO - ============================================================
2025-12-23 21:18:18,318 - __main__ - INFO - [数据集适配层] 开始加载数据集: math
2025-12-23 21:18:18,318 - __main__ - INFO - [数据集适配层] 文件路径: dataset/math/test.jsonl
2025-12-23 21:18:18,318 - __main__ - INFO - ============================================================
2025-12-23 21:18:18,321 - __main__ - INFO - [数据集适配层] 已加载 JSONL 文件: 500 条
2025-12-23 21:18:18,321 - __main__ - INFO - 预处理 MATH 数据集: 500 条
2025-12-23 21:18:18,321 - __main__ - INFO - [数据集适配层] 预处理完成: 500 条有效数据
2025-12-23 21:18:18,321 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:18:18,321 - __main__ - INFO - ============================================================
2025-12-23 21:18:18,321 - __main__ - INFO - 数据集加载成功，共 500 条数据
2025-12-23 21:18:18,321 - __main__ - INFO - ============================================================
2025-12-23 21:18:18,321 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:18:18,321 - __main__ - INFO - ============================================================
2025-12-23 21:18:18,321 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:18:18,323 - __main__ - INFO - 共需处理 500 条数据，批次大小: 64
2025-12-23 21:18:18,323 - __main__ - INFO - ============================================================
2025-12-23 21:18:18,323 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:18:18,323 - __main__ - INFO - ============================================================
2025-12-23 21:18:18,323 - __main__ - INFO - 处理批次 [1-128/500]
2025-12-23 21:18:18,323 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:18:18,323 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:18:22,920 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 2,3
2025-12-23 21:18:22,920 - inference.local_inference - INFO - ============================================================
2025-12-23 21:18:22,920 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:18:22,920 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:18:22,920 - inference.local_inference - INFO - ============================================================
2025-12-23 21:18:37,402 - __main__ - INFO - ============================================================
2025-12-23 21:18:37,402 - __main__ - INFO - 数据集名称: svamp
2025-12-23 21:18:37,402 - __main__ - INFO - 数据集路径: dataset/svamp/test.json
2025-12-23 21:18:37,402 - __main__ - INFO - ============================================================
2025-12-23 21:18:37,402 - __main__ - INFO - 使用数据集适配层加载: svamp
2025-12-23 21:18:37,402 - __main__ - INFO - ============================================================
2025-12-23 21:18:37,402 - __main__ - INFO - [数据集适配层] 开始加载数据集: svamp
2025-12-23 21:18:37,402 - __main__ - INFO - [数据集适配层] 文件路径: dataset/svamp/test.json
2025-12-23 21:18:37,402 - __main__ - INFO - ============================================================
2025-12-23 21:18:37,403 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-23 21:18:37,403 - __main__ - INFO - 预处理 SVAMP 数据集: 300 条
2025-12-23 21:18:37,403 - __main__ - INFO - [数据集适配层] 预处理完成: 300 条有效数据
2025-12-23 21:18:37,403 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:18:37,403 - __main__ - INFO - ============================================================
2025-12-23 21:18:37,403 - __main__ - INFO - 数据集加载成功，共 300 条数据
2025-12-23 21:18:37,403 - __main__ - INFO - ============================================================
2025-12-23 21:18:37,403 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:18:37,403 - __main__ - INFO - ============================================================
2025-12-23 21:18:37,403 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:18:37,404 - __main__ - INFO - 共需处理 300 条数据，批次大小: 64
2025-12-23 21:18:37,404 - __main__ - INFO - ============================================================
2025-12-23 21:18:37,404 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:18:37,404 - __main__ - INFO - ============================================================
2025-12-23 21:18:37,404 - __main__ - INFO - 处理批次 [1-128/300]
2025-12-23 21:18:37,404 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:18:37,404 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:18:41,920 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 4,5
2025-12-23 21:18:41,920 - inference.local_inference - INFO - ============================================================
2025-12-23 21:18:41,920 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:18:41,920 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:18:41,920 - inference.local_inference - INFO - ============================================================
2025-12-23 21:27:43,309 - __main__ - INFO - ============================================================
2025-12-23 21:27:43,309 - __main__ - INFO - 数据集名称: bbh
2025-12-23 21:27:43,309 - __main__ - INFO - 数据集路径: dataset/bbh/boolean_expressions.json
2025-12-23 21:27:43,309 - __main__ - INFO - ============================================================
2025-12-23 21:27:43,309 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-23 21:27:43,309 - __main__ - INFO - ============================================================
2025-12-23 21:27:43,309 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-23 21:27:43,309 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/boolean_expressions.json
2025-12-23 21:27:43,309 - __main__ - INFO - ============================================================
2025-12-23 21:27:43,311 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-23 21:27:43,311 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-23 21:27:43,311 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-23 21:27:43,311 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:27:43,311 - __main__ - INFO - ============================================================
2025-12-23 21:27:43,311 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-23 21:27:43,311 - __main__ - INFO - ============================================================
2025-12-23 21:27:43,311 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:27:43,311 - __main__ - INFO - ============================================================
2025-12-23 21:27:43,312 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:27:43,313 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-23 21:27:43,313 - __main__ - INFO - ============================================================
2025-12-23 21:27:43,313 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:27:43,313 - __main__ - INFO - ============================================================
2025-12-23 21:27:43,313 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-23 21:27:43,313 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:27:43,313 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:27:49,749 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-23 21:27:49,749 - inference.local_inference - INFO - ============================================================
2025-12-23 21:27:49,749 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:27:49,749 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:27:49,749 - inference.local_inference - INFO - ============================================================
2025-12-23 21:28:45,832 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-23 21:28:53,577 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:28:53,578 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:28:58,031 - __main__ - INFO - ============================================================
2025-12-23 21:28:58,031 - __main__ - INFO - 数据集名称: math
2025-12-23 21:28:58,031 - __main__ - INFO - 数据集路径: dataset/math/test.jsonl
2025-12-23 21:28:58,031 - __main__ - INFO - ============================================================
2025-12-23 21:28:58,031 - __main__ - INFO - 使用数据集适配层加载: math
2025-12-23 21:28:58,031 - __main__ - INFO - ============================================================
2025-12-23 21:28:58,031 - __main__ - INFO - [数据集适配层] 开始加载数据集: math
2025-12-23 21:28:58,031 - __main__ - INFO - [数据集适配层] 文件路径: dataset/math/test.jsonl
2025-12-23 21:28:58,031 - __main__ - INFO - ============================================================
2025-12-23 21:28:58,037 - __main__ - INFO - [数据集适配层] 已加载 JSONL 文件: 500 条
2025-12-23 21:28:58,037 - __main__ - INFO - 预处理 MATH 数据集: 500 条
2025-12-23 21:28:58,037 - __main__ - INFO - [数据集适配层] 预处理完成: 500 条有效数据
2025-12-23 21:28:58,037 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:28:58,037 - __main__ - INFO - ============================================================
2025-12-23 21:28:58,037 - __main__ - INFO - 数据集加载成功，共 500 条数据
2025-12-23 21:28:58,037 - __main__ - INFO - ============================================================
2025-12-23 21:28:58,037 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:28:58,037 - __main__ - INFO - ============================================================
2025-12-23 21:28:58,037 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:28:58,038 - __main__ - INFO - 共需处理 500 条数据，批次大小: 64
2025-12-23 21:28:58,038 - __main__ - INFO - ============================================================
2025-12-23 21:28:58,038 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:28:58,038 - __main__ - INFO - ============================================================
2025-12-23 21:28:58,038 - __main__ - INFO - 处理批次 [1-128/500]
2025-12-23 21:28:58,038 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:28:58,038 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:29:02,453 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 2,3
2025-12-23 21:29:02,454 - inference.local_inference - INFO - ============================================================
2025-12-23 21:29:02,454 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:29:02,454 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:29:02,454 - inference.local_inference - INFO - ============================================================
2025-12-23 21:29:57,521 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-23 21:30:37,035 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:30:37,036 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:31:28,875 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 21:31:28,876 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 21:32:58,940 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-23 21:32:58,941 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-23 21:32:58,941 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-23 21:32:58,941 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-23 21:33:03,766 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 21:33:03,766 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 21:33:07,625 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-23 21:33:07,625 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-23 21:34:43,583 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-23 21:34:43,583 - __main__ - INFO - 处理批次 [129-256/500]
2025-12-23 21:34:43,584 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:34:43,584 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:35:25,482 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:35:25,482 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:35:33,555 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-23 21:35:33,555 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-23 21:36:38,090 - __main__ - INFO - ============================================================
2025-12-23 21:36:38,090 - __main__ - INFO - 数据集名称: bbh
2025-12-23 21:36:38,090 - __main__ - INFO - 数据集路径: dataset/bbh/boolean_expressions.json
2025-12-23 21:36:38,090 - __main__ - INFO - ============================================================
2025-12-23 21:36:38,090 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-23 21:36:38,090 - __main__ - INFO - ============================================================
2025-12-23 21:36:38,090 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-23 21:36:38,090 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/boolean_expressions.json
2025-12-23 21:36:38,090 - __main__ - INFO - ============================================================
2025-12-23 21:36:38,091 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-23 21:36:38,091 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-23 21:36:38,091 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-23 21:36:38,091 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:36:38,091 - __main__ - INFO - ============================================================
2025-12-23 21:36:38,091 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-23 21:36:38,091 - __main__ - INFO - ============================================================
2025-12-23 21:36:38,091 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:36:38,091 - __main__ - INFO - ============================================================
2025-12-23 21:36:38,091 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:36:38,092 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-23 21:36:38,092 - __main__ - INFO - ============================================================
2025-12-23 21:36:38,092 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:36:38,092 - __main__ - INFO - ============================================================
2025-12-23 21:36:38,092 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-23 21:36:38,092 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:36:38,092 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:36:42,512 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-23 21:36:42,512 - inference.local_inference - INFO - ============================================================
2025-12-23 21:36:42,512 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:36:42,512 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:36:42,512 - inference.local_inference - INFO - ============================================================
2025-12-23 21:36:55,809 - __main__ - INFO - ============================================================
2025-12-23 21:36:55,809 - __main__ - INFO - 数据集名称: math
2025-12-23 21:36:55,809 - __main__ - INFO - 数据集路径: dataset/math/test.jsonl
2025-12-23 21:36:55,809 - __main__ - INFO - ============================================================
2025-12-23 21:36:55,809 - __main__ - INFO - 使用数据集适配层加载: math
2025-12-23 21:36:55,809 - __main__ - INFO - ============================================================
2025-12-23 21:36:55,809 - __main__ - INFO - [数据集适配层] 开始加载数据集: math
2025-12-23 21:36:55,809 - __main__ - INFO - [数据集适配层] 文件路径: dataset/math/test.jsonl
2025-12-23 21:36:55,809 - __main__ - INFO - ============================================================
2025-12-23 21:36:55,812 - __main__ - INFO - [数据集适配层] 已加载 JSONL 文件: 500 条
2025-12-23 21:36:55,812 - __main__ - INFO - 预处理 MATH 数据集: 500 条
2025-12-23 21:36:55,812 - __main__ - INFO - [数据集适配层] 预处理完成: 500 条有效数据
2025-12-23 21:36:55,812 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:36:55,812 - __main__ - INFO - ============================================================
2025-12-23 21:36:55,812 - __main__ - INFO - 数据集加载成功，共 500 条数据
2025-12-23 21:36:55,812 - __main__ - INFO - ============================================================
2025-12-23 21:36:55,812 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:36:55,812 - __main__ - INFO - ============================================================
2025-12-23 21:36:55,813 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:36:55,813 - __main__ - INFO - 共需处理 500 条数据，批次大小: 64
2025-12-23 21:36:55,813 - __main__ - INFO - ============================================================
2025-12-23 21:36:55,813 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:36:55,813 - __main__ - INFO - ============================================================
2025-12-23 21:36:55,813 - __main__ - INFO - 处理批次 [1-128/500]
2025-12-23 21:36:55,813 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:36:55,813 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:37:00,126 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 2,3
2025-12-23 21:37:00,126 - inference.local_inference - INFO - ============================================================
2025-12-23 21:37:00,126 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:37:00,126 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:37:00,126 - inference.local_inference - INFO - ============================================================
2025-12-23 21:37:13,582 - __main__ - INFO - ============================================================
2025-12-23 21:37:13,582 - __main__ - INFO - 数据集名称: svamp
2025-12-23 21:37:13,582 - __main__ - INFO - 数据集路径: dataset/svamp/test.json
2025-12-23 21:37:13,583 - __main__ - INFO - ============================================================
2025-12-23 21:37:13,583 - __main__ - INFO - 使用数据集适配层加载: svamp
2025-12-23 21:37:13,583 - __main__ - INFO - ============================================================
2025-12-23 21:37:13,583 - __main__ - INFO - [数据集适配层] 开始加载数据集: svamp
2025-12-23 21:37:13,583 - __main__ - INFO - [数据集适配层] 文件路径: dataset/svamp/test.json
2025-12-23 21:37:13,583 - __main__ - INFO - ============================================================
2025-12-23 21:37:13,586 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-23 21:37:13,586 - __main__ - INFO - 预处理 SVAMP 数据集: 300 条
2025-12-23 21:37:13,586 - __main__ - INFO - [数据集适配层] 预处理完成: 300 条有效数据
2025-12-23 21:37:13,586 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:37:13,586 - __main__ - INFO - ============================================================
2025-12-23 21:37:13,586 - __main__ - INFO - 数据集加载成功，共 300 条数据
2025-12-23 21:37:13,586 - __main__ - INFO - ============================================================
2025-12-23 21:37:13,586 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:37:13,586 - __main__ - INFO - ============================================================
2025-12-23 21:37:13,586 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:37:13,587 - __main__ - INFO - 共需处理 300 条数据，批次大小: 64
2025-12-23 21:37:13,587 - __main__ - INFO - ============================================================
2025-12-23 21:37:13,587 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:37:13,587 - __main__ - INFO - ============================================================
2025-12-23 21:37:13,587 - __main__ - INFO - 处理批次 [1-128/300]
2025-12-23 21:37:13,587 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:37:13,587 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:37:18,053 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 4,5
2025-12-23 21:37:18,053 - inference.local_inference - INFO - ============================================================
2025-12-23 21:37:18,053 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:37:18,053 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:37:18,053 - inference.local_inference - INFO - ============================================================
2025-12-23 21:37:38,586 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-23 21:37:46,719 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:37:46,720 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:37:59,025 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-23 21:38:13,900 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-23 21:38:28,331 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:38:28,332 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:38:37,409 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:38:37,409 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:39:59,709 - __main__ - INFO - ============================================================
2025-12-23 21:39:59,710 - __main__ - INFO - 数据集名称: bbh
2025-12-23 21:39:59,710 - __main__ - INFO - 数据集路径: dataset/bbh/boolean_expressions.json
2025-12-23 21:39:59,710 - __main__ - INFO - ============================================================
2025-12-23 21:39:59,710 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-23 21:39:59,710 - __main__ - INFO - ============================================================
2025-12-23 21:39:59,710 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-23 21:39:59,710 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/boolean_expressions.json
2025-12-23 21:39:59,710 - __main__ - INFO - ============================================================
2025-12-23 21:39:59,710 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-23 21:39:59,710 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-23 21:39:59,710 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-23 21:39:59,710 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:39:59,710 - __main__ - INFO - ============================================================
2025-12-23 21:39:59,710 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-23 21:39:59,710 - __main__ - INFO - ============================================================
2025-12-23 21:39:59,710 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:39:59,710 - __main__ - INFO - ============================================================
2025-12-23 21:39:59,711 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:39:59,712 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-23 21:39:59,712 - __main__ - INFO - ============================================================
2025-12-23 21:39:59,712 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:39:59,712 - __main__ - INFO - ============================================================
2025-12-23 21:39:59,712 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-23 21:39:59,712 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:39:59,712 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:40:04,038 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-23 21:40:04,038 - inference.local_inference - INFO - ============================================================
2025-12-23 21:40:04,038 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:40:04,038 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:40:04,038 - inference.local_inference - INFO - ============================================================
2025-12-23 21:40:11,591 - __main__ - INFO - ============================================================
2025-12-23 21:40:11,591 - __main__ - INFO - 数据集名称: math
2025-12-23 21:40:11,591 - __main__ - INFO - 数据集路径: dataset/math/test.jsonl
2025-12-23 21:40:11,592 - __main__ - INFO - ============================================================
2025-12-23 21:40:11,592 - __main__ - INFO - 使用数据集适配层加载: math
2025-12-23 21:40:11,592 - __main__ - INFO - ============================================================
2025-12-23 21:40:11,592 - __main__ - INFO - [数据集适配层] 开始加载数据集: math
2025-12-23 21:40:11,592 - __main__ - INFO - [数据集适配层] 文件路径: dataset/math/test.jsonl
2025-12-23 21:40:11,592 - __main__ - INFO - ============================================================
2025-12-23 21:40:11,595 - __main__ - INFO - [数据集适配层] 已加载 JSONL 文件: 500 条
2025-12-23 21:40:11,595 - __main__ - INFO - 预处理 MATH 数据集: 500 条
2025-12-23 21:40:11,595 - __main__ - INFO - [数据集适配层] 预处理完成: 500 条有效数据
2025-12-23 21:40:11,595 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:40:11,595 - __main__ - INFO - ============================================================
2025-12-23 21:40:11,595 - __main__ - INFO - 数据集加载成功，共 500 条数据
2025-12-23 21:40:11,595 - __main__ - INFO - ============================================================
2025-12-23 21:40:11,595 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:40:11,595 - __main__ - INFO - ============================================================
2025-12-23 21:40:11,595 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:40:11,595 - __main__ - INFO - 共需处理 500 条数据，批次大小: 64
2025-12-23 21:40:11,595 - __main__ - INFO - ============================================================
2025-12-23 21:40:11,595 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:40:11,595 - __main__ - INFO - ============================================================
2025-12-23 21:40:11,595 - __main__ - INFO - 处理批次 [1-128/500]
2025-12-23 21:40:11,595 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:40:11,595 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:40:16,050 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 2,3
2025-12-23 21:40:16,050 - inference.local_inference - INFO - ============================================================
2025-12-23 21:40:16,050 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:40:16,050 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:40:16,050 - inference.local_inference - INFO - ============================================================
2025-12-23 21:40:31,427 - __main__ - INFO - ============================================================
2025-12-23 21:40:31,427 - __main__ - INFO - 数据集名称: svamp
2025-12-23 21:40:31,427 - __main__ - INFO - 数据集路径: dataset/svamp/test.json
2025-12-23 21:40:31,428 - __main__ - INFO - ============================================================
2025-12-23 21:40:31,428 - __main__ - INFO - 使用数据集适配层加载: svamp
2025-12-23 21:40:31,428 - __main__ - INFO - ============================================================
2025-12-23 21:40:31,428 - __main__ - INFO - [数据集适配层] 开始加载数据集: svamp
2025-12-23 21:40:31,428 - __main__ - INFO - [数据集适配层] 文件路径: dataset/svamp/test.json
2025-12-23 21:40:31,428 - __main__ - INFO - ============================================================
2025-12-23 21:40:31,428 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-23 21:40:31,428 - __main__ - INFO - 预处理 SVAMP 数据集: 300 条
2025-12-23 21:40:31,429 - __main__ - INFO - [数据集适配层] 预处理完成: 300 条有效数据
2025-12-23 21:40:31,429 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:40:31,429 - __main__ - INFO - ============================================================
2025-12-23 21:40:31,429 - __main__ - INFO - 数据集加载成功，共 300 条数据
2025-12-23 21:40:31,429 - __main__ - INFO - ============================================================
2025-12-23 21:40:31,429 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:40:31,429 - __main__ - INFO - ============================================================
2025-12-23 21:40:31,429 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:40:31,429 - __main__ - INFO - 共需处理 300 条数据，批次大小: 64
2025-12-23 21:40:31,429 - __main__ - INFO - ============================================================
2025-12-23 21:40:31,429 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:40:31,429 - __main__ - INFO - ============================================================
2025-12-23 21:40:31,429 - __main__ - INFO - 处理批次 [1-128/300]
2025-12-23 21:40:31,429 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:40:31,429 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:40:35,860 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 4,5
2025-12-23 21:40:35,860 - inference.local_inference - INFO - ============================================================
2025-12-23 21:40:35,860 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:40:35,860 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:40:35,860 - inference.local_inference - INFO - ============================================================
2025-12-23 21:40:59,212 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-23 21:41:07,460 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:41:07,461 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:41:11,878 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-23 21:41:32,625 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-23 21:41:43,907 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:41:43,907 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:41:48,858 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:41:48,859 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:43:41,028 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 21:43:41,029 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 21:44:01,566 - __main__ - INFO - ============================================================
2025-12-23 21:44:01,567 - __main__ - INFO - 数据集名称: mmlu
2025-12-23 21:44:01,567 - __main__ - INFO - 数据集路径: dataset/mmlu_json/auxiliary_train.json
2025-12-23 21:44:01,567 - __main__ - INFO - ============================================================
2025-12-23 21:44:01,567 - __main__ - INFO - 使用数据集适配层加载: mmlu
2025-12-23 21:44:01,567 - __main__ - INFO - ============================================================
2025-12-23 21:44:01,567 - __main__ - INFO - [数据集适配层] 开始加载数据集: mmlu
2025-12-23 21:44:01,567 - __main__ - INFO - [数据集适配层] 文件路径: dataset/mmlu_json/auxiliary_train.json
2025-12-23 21:44:01,567 - __main__ - INFO - ============================================================
2025-12-23 21:44:04,507 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-23 21:44:04,507 - __main__ - INFO - 预处理 MMLU 数据集: 99842 条
2025-12-23 21:44:04,593 - __main__ - INFO - [数据集适配层] 预处理完成: 99842 条有效数据
2025-12-23 21:44:04,593 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-23 21:44:04,593 - __main__ - INFO - ============================================================
2025-12-23 21:44:04,618 - __main__ - INFO - 数据集加载成功，共 99842 条数据
2025-12-23 21:44:04,620 - __main__ - INFO - ============================================================
2025-12-23 21:44:04,622 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-23 21:44:04,626 - __main__ - INFO - ============================================================
2025-12-23 21:44:04,627 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-23 21:44:04,665 - __main__ - INFO - 共需处理 99842 条数据，批次大小: 64
2025-12-23 21:44:04,665 - __main__ - INFO - ============================================================
2025-12-23 21:44:04,665 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-23 21:44:04,665 - __main__ - INFO - ============================================================
2025-12-23 21:44:04,665 - __main__ - INFO - 处理批次 [1-128/99842]
2025-12-23 21:44:04,665 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:44:04,665 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:44:09,458 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 6,7
2025-12-23 21:44:09,459 - inference.local_inference - INFO - ============================================================
2025-12-23 21:44:09,459 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-23 21:44:09,459 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-23 21:44:09,459 - inference.local_inference - INFO - ============================================================
2025-12-23 21:44:11,674 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 21:44:11,674 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 21:44:14,742 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 21:44:14,742 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 21:45:18,287 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-23 21:45:18,288 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-23 21:45:18,288 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-23 21:45:18,288 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-23 21:45:19,754 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-23 21:45:27,105 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-23 21:45:27,105 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-23 21:45:40,449 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:45:40,449 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:45:51,368 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-23 21:45:51,369 - __main__ - INFO - 处理批次 [129-256/300]
2025-12-23 21:45:51,369 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:45:51,369 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:45:57,029 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-23 21:45:57,029 - __main__ - INFO - 处理批次 [129-256/500]
2025-12-23 21:45:57,030 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:45:57,030 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:46:01,664 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:46:01,664 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:46:32,801 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:46:32,801 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:47:58,148 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-23 21:47:58,148 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-23 21:48:04,597 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 21:48:04,597 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 21:48:34,400 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 21:48:34,400 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 21:48:54,932 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 21:48:54,932 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 21:49:33,034 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-23 21:49:33,034 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-23 21:49:33,034 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-23 21:49:33,074 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-23 21:49:33,074 - __main__ - INFO - ============================================================
2025-12-23 21:49:33,074 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-23 21:49:33,074 - __main__ - INFO - ============================================================
2025-12-23 21:49:33,074 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-23 21:49:33,075 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-23 21:49:33,075 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:49:43,786 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-23 21:49:43,786 - __main__ - INFO - 处理批次 [129-256/99842]
2025-12-23 21:49:43,787 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:49:43,787 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:50:05,036 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:50:05,037 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:50:10,173 - __main__ - INFO - 批次 [129-256] 本地推理完成
2025-12-23 21:50:10,173 - __main__ - INFO - 处理批次 [257-300/300]
2025-12-23 21:50:10,173 - __main__ - INFO -   → 生成Baseline答案 (44 条)...
2025-12-23 21:50:10,173 - __main__ - INFO - 批量生成Baseline答案: 44 条
2025-12-23 21:50:16,815 - __main__ - INFO -   → 生成差异分析 (44 条)...
2025-12-23 21:50:16,815 - __main__ - INFO - 批量生成差异分析: 44 条
2025-12-23 21:50:41,585 - __main__ - INFO - 批次 [129-256] 本地推理完成
2025-12-23 21:50:41,585 - __main__ - INFO - 处理批次 [257-384/500]
2025-12-23 21:50:41,585 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:50:41,585 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:50:59,458 - __main__ - INFO - API批次 [1-30] 完成
2025-12-23 21:50:59,458 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-23 21:50:59,458 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:51:36,383 - __main__ - INFO - API批次 [31-60] 完成
2025-12-23 21:51:36,384 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-23 21:51:36,384 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:51:37,952 - __main__ - INFO -   → 生成Rejected原则 (44 条)...
2025-12-23 21:51:37,953 - __main__ - INFO - 批量生成原则（弱模型）: 44 条
2025-12-23 21:51:46,404 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:51:46,404 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:51:46,465 - inference.local_inference - ERROR - 批量推理失败: Prompt length of 4383 is longer than the maximum model length of 4096.
Traceback (most recent call last):
  File "/home/metanew2/inference/local_inference.py", line 118, in batch_inference
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/utils.py", line 1072, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 457, in generate
    self._validate_and_add_requests(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 1308, in _validate_and_add_requests
    self._add_request(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 1326, in _add_request
    self.llm_engine.add_request(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/llm_engine.py", line 184, in add_request
    request = self.processor.process_inputs(request_id, prompt, params,
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/processor.py", line 207, in process_inputs
    self._validate_model_inputs(processed_inputs, lora_request)
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/processor.py", line 322, in _validate_model_inputs
    raise ValueError(
ValueError: Prompt length of 4383 is longer than the maximum model length of 4096.
2025-12-23 21:51:46,468 - __main__ - ERROR - 生成DPO数据时发生错误: Prompt length of 4383 is longer than the maximum model length of 4096.
Traceback (most recent call last):
  File "/home/metanew2/stage_first.py", line 434, in prepare_stage1
    diffs = batch_generate_differences(questions, baseline_answers, labels)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/metanew2/stage_first.py", line 343, in batch_generate_differences
    return batch_generate_difference_list(questions, preds, labels)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/metanew2/module/plan_module.py", line 78, in batch_generate_difference_list
    return batch_inference(prompts)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/metanew2/inference/local_inference.py", line 118, in batch_inference
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/utils.py", line 1072, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 457, in generate
    self._validate_and_add_requests(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 1308, in _validate_and_add_requests
    self._add_request(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 1326, in _add_request
    self.llm_engine.add_request(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/llm_engine.py", line 184, in add_request
    request = self.processor.process_inputs(request_id, prompt, params,
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/processor.py", line 207, in process_inputs
    self._validate_model_inputs(processed_inputs, lora_request)
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/processor.py", line 322, in _validate_model_inputs
    raise ValueError(
ValueError: Prompt length of 4383 is longer than the maximum model length of 4096.
2025-12-23 21:51:47,539 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-23 21:51:47,539 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-23 21:52:15,143 - __main__ - INFO - API批次 [61-90] 完成
2025-12-23 21:52:15,144 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-23 21:52:15,144 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:52:31,529 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 21:52:31,530 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 21:52:35,803 - __main__ - INFO - 批次 [257-300] 本地推理完成
2025-12-23 21:52:35,804 - __main__ - INFO - 阶段1完成: 共生成 300 条本地推理结果
2025-12-23 21:52:35,804 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-23 21:52:35,855 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-23 21:52:35,855 - __main__ - INFO - ============================================================
2025-12-23 21:52:35,855 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-23 21:52:35,855 - __main__ - INFO - ============================================================
2025-12-23 21:52:35,855 - __main__ - INFO - API分批处理: 每批 30 条，共 10 批
2025-12-23 21:52:35,855 - __main__ - INFO - API批次 [1-30/300] 开始处理...
2025-12-23 21:52:35,855 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:52:54,841 - __main__ - INFO - API批次 [91-120] 完成
2025-12-23 21:52:54,842 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-23 21:52:54,842 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:53:13,115 - __main__ - INFO - API批次 [1-30] 完成
2025-12-23 21:53:13,116 - __main__ - INFO - API批次 [31-60/300] 开始处理...
2025-12-23 21:53:13,117 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:53:59,545 - __main__ - INFO - API批次 [31-60] 完成
2025-12-23 21:53:59,545 - __main__ - INFO - API批次 [61-90/300] 开始处理...
2025-12-23 21:53:59,545 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:54:03,013 - __main__ - INFO - API批次 [121-150] 完成
2025-12-23 21:54:03,014 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-23 21:54:03,014 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:54:09,350 - __main__ - INFO - 批次 [129-256] 本地推理完成
2025-12-23 21:54:09,351 - __main__ - INFO - 处理批次 [257-384/99842]
2025-12-23 21:54:09,352 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:54:09,352 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:54:31,245 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:54:31,245 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:54:34,092 - __main__ - INFO - API批次 [61-90] 完成
2025-12-23 21:54:34,093 - __main__ - INFO - API批次 [91-120/300] 开始处理...
2025-12-23 21:54:34,094 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:54:49,409 - __main__ - INFO - API批次 [151-180] 完成
2025-12-23 21:54:49,410 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-23 21:54:49,410 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:55:15,950 - __main__ - INFO - API批次 [91-120] 完成
2025-12-23 21:55:15,951 - __main__ - INFO - API批次 [121-150/300] 开始处理...
2025-12-23 21:55:15,951 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:55:31,030 - __main__ - INFO - API批次 [181-210] 完成
2025-12-23 21:55:31,031 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-23 21:55:31,031 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:56:00,585 - __main__ - INFO - API批次 [211-240] 完成
2025-12-23 21:56:00,586 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-23 21:56:00,586 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:56:03,028 - __main__ - INFO - API批次 [121-150] 完成
2025-12-23 21:56:03,029 - __main__ - INFO - API批次 [151-180/300] 开始处理...
2025-12-23 21:56:03,029 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:56:29,906 - __main__ - INFO - API批次 [241-250] 完成
2025-12-23 21:56:29,907 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-23 21:56:29,907 - __main__ - INFO - 开始数据质量检查...
2025-12-23 21:56:29,907 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-23 21:56:29,907 - __main__ - INFO - ============================================================
2025-12-23 21:56:29,907 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-23 21:56:29,907 - __main__ - INFO - ============================================================
2025-12-23 21:56:29,908 - __main__ - INFO - 预检查数据完整性...
2025-12-23 21:56:29,908 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-23 21:56:29,909 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-23 21:56:29,909 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-23 21:56:29,923 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-23 21:56:29,942 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-23 21:56:29,953 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-23 21:56:29,964 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-23 21:56:29,975 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-23 21:56:29,985 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-23 21:56:29,985 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-23 21:56:30,962 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-23 21:56:30,990 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-23 21:56:37,633 - __main__ - INFO - API批次 [151-180] 完成
2025-12-23 21:56:37,634 - __main__ - INFO - API批次 [181-210/300] 开始处理...
2025-12-23 21:56:37,634 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:56:56,208 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 21:56:56,208 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 21:57:03,165 - __main__ - INFO - API批次 [181-210] 完成
2025-12-23 21:57:03,166 - __main__ - INFO - API批次 [211-240/300] 开始处理...
2025-12-23 21:57:03,166 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:57:36,091 - __main__ - INFO - API批次 [211-240] 完成
2025-12-23 21:57:36,091 - __main__ - INFO - API批次 [241-270/300] 开始处理...
2025-12-23 21:57:36,092 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:58:29,351 - __main__ - INFO - API批次 [241-270] 完成
2025-12-23 21:58:29,352 - __main__ - INFO - API批次 [271-300/300] 开始处理...
2025-12-23 21:58:29,352 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-23 21:58:36,679 - __main__ - INFO - 批次 [257-384] 本地推理完成
2025-12-23 21:58:36,679 - __main__ - INFO - 处理批次 [385-512/99842]
2025-12-23 21:58:36,680 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 21:58:36,680 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 21:58:59,087 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 21:58:59,087 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 21:59:05,385 - __main__ - INFO - API批次 [271-300] 完成
2025-12-23 21:59:05,385 - __main__ - INFO - 阶段2完成: 共生成 300 条Chosen结果
2025-12-23 21:59:05,385 - __main__ - INFO - 开始数据质量检查...
2025-12-23 21:59:05,385 - __main__ - INFO - ✅ 数据质量检查通过: 300 条chosen全部非空
2025-12-23 21:59:05,385 - __main__ - INFO - ============================================================
2025-12-23 21:59:05,385 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-23 21:59:05,385 - __main__ - INFO - ============================================================
2025-12-23 21:59:05,385 - __main__ - INFO - 预检查数据完整性...
2025-12-23 21:59:05,386 - __main__ - INFO - Chosen非空率: 300/300 (100.0%)
2025-12-23 21:59:05,386 - __main__ - INFO - Rejected非空率: 300/300 (100.0%)
2025-12-23 21:59:05,386 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-23 21:59:05,395 - __main__ - INFO - 已保存 50/300 条到JSONL
2025-12-23 21:59:05,408 - __main__ - INFO - 已保存 100/300 条到JSONL
2025-12-23 21:59:05,422 - __main__ - INFO - 已保存 150/300 条到JSONL
2025-12-23 21:59:05,433 - __main__ - INFO - 已保存 200/300 条到JSONL
2025-12-23 21:59:05,444 - __main__ - INFO - 已保存 250/300 条到JSONL
2025-12-23 21:59:05,454 - __main__ - INFO - 已保存 300/300 条到JSONL
2025-12-23 21:59:05,466 - __main__ - INFO - DPO数据生成完成: output/dpo_svamp.jsonl
2025-12-23 21:59:05,466 - __main__ - INFO - 共保存 300 条数据到JSONL格式
2025-12-23 21:59:06,344 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-23 21:59:06,374 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-23 22:01:23,248 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 22:01:23,248 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 22:03:06,065 - __main__ - INFO - 批次 [385-512] 本地推理完成
2025-12-23 22:03:06,065 - __main__ - INFO - 处理批次 [513-640/99842]
2025-12-23 22:03:06,066 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 22:03:06,066 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 22:03:31,499 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 22:03:31,499 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 22:05:55,840 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 22:05:55,841 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 22:07:37,633 - __main__ - INFO - 批次 [513-640] 本地推理完成
2025-12-23 22:07:37,633 - __main__ - INFO - 处理批次 [641-768/99842]
2025-12-23 22:07:37,634 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 22:07:37,634 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 22:07:59,638 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 22:07:59,639 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 22:10:25,101 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 22:10:25,101 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 22:12:04,083 - __main__ - INFO - 批次 [641-768] 本地推理完成
2025-12-23 22:12:04,084 - __main__ - INFO - 处理批次 [769-896/99842]
2025-12-23 22:12:04,085 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 22:12:04,085 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 22:12:25,756 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 22:12:25,757 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 22:14:50,528 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 22:14:50,528 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 22:16:31,990 - __main__ - INFO - 批次 [769-896] 本地推理完成
2025-12-23 22:16:31,991 - __main__ - INFO - 处理批次 [897-1024/99842]
2025-12-23 22:16:31,991 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 22:16:31,991 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 22:16:54,942 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 22:16:54,942 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 22:19:19,847 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 22:19:19,847 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 22:20:57,342 - __main__ - INFO - 批次 [897-1024] 本地推理完成
2025-12-23 22:20:57,343 - __main__ - INFO - 处理批次 [1025-1152/99842]
2025-12-23 22:20:57,343 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 22:20:57,343 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 22:21:18,254 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 22:21:18,255 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 22:23:47,016 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 22:23:47,016 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 22:25:25,433 - __main__ - INFO - 批次 [1025-1152] 本地推理完成
2025-12-23 22:25:25,433 - __main__ - INFO - 处理批次 [1153-1280/99842]
2025-12-23 22:25:25,433 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 22:25:25,433 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 22:25:40,751 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 22:25:40,751 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 22:28:13,186 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 22:28:13,186 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 22:29:49,603 - __main__ - INFO - 批次 [1153-1280] 本地推理完成
2025-12-23 22:29:49,603 - __main__ - INFO - 处理批次 [1281-1408/99842]
2025-12-23 22:29:49,603 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 22:29:49,603 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 22:30:01,548 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 22:30:01,548 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 22:32:34,159 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 22:32:34,159 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 22:34:15,100 - __main__ - INFO - 批次 [1281-1408] 本地推理完成
2025-12-23 22:34:15,101 - __main__ - INFO - 处理批次 [1409-1536/99842]
2025-12-23 22:34:15,101 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 22:34:15,101 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 22:34:27,799 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 22:34:27,799 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 22:37:00,738 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 22:37:00,738 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 22:38:36,984 - __main__ - INFO - 批次 [1409-1536] 本地推理完成
2025-12-23 22:38:36,985 - __main__ - INFO - 处理批次 [1537-1664/99842]
2025-12-23 22:38:36,985 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 22:38:36,986 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 22:38:49,396 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 22:38:49,397 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 22:41:22,991 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-23 22:41:22,992 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-23 22:42:57,153 - __main__ - INFO - 批次 [1537-1664] 本地推理完成
2025-12-23 22:42:57,154 - __main__ - INFO - 处理批次 [1665-1792/99842]
2025-12-23 22:42:57,154 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-23 22:42:57,154 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-23 22:43:57,395 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-23 22:43:57,395 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-23 22:43:57,497 - inference.local_inference - ERROR - 批量推理失败: Prompt length of 4386 is longer than the maximum model length of 4096.
Traceback (most recent call last):
  File "/home/metanew2/inference/local_inference.py", line 118, in batch_inference
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/utils.py", line 1072, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 457, in generate
    self._validate_and_add_requests(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 1308, in _validate_and_add_requests
    self._add_request(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 1326, in _add_request
    self.llm_engine.add_request(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/llm_engine.py", line 184, in add_request
    request = self.processor.process_inputs(request_id, prompt, params,
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/processor.py", line 207, in process_inputs
    self._validate_model_inputs(processed_inputs, lora_request)
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/processor.py", line 322, in _validate_model_inputs
    raise ValueError(
ValueError: Prompt length of 4386 is longer than the maximum model length of 4096.
2025-12-23 22:43:57,499 - __main__ - ERROR - 生成DPO数据时发生错误: Prompt length of 4386 is longer than the maximum model length of 4096.
Traceback (most recent call last):
  File "/home/metanew2/stage_first.py", line 434, in prepare_stage1
    diffs = batch_generate_differences(questions, baseline_answers, labels)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/metanew2/stage_first.py", line 343, in batch_generate_differences
    return batch_generate_difference_list(questions, preds, labels)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/metanew2/module/plan_module.py", line 78, in batch_generate_difference_list
    return batch_inference(prompts)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/metanew2/inference/local_inference.py", line 118, in batch_inference
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/utils.py", line 1072, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 457, in generate
    self._validate_and_add_requests(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 1308, in _validate_and_add_requests
    self._add_request(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/entrypoints/llm.py", line 1326, in _add_request
    self.llm_engine.add_request(
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/llm_engine.py", line 184, in add_request
    request = self.processor.process_inputs(request_id, prompt, params,
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/processor.py", line 207, in process_inputs
    self._validate_model_inputs(processed_inputs, lora_request)
  File "/root/miniconda3/envs/llm/lib/python3.11/site-packages/vllm/v1/engine/processor.py", line 322, in _validate_model_inputs
    raise ValueError(
ValueError: Prompt length of 4386 is longer than the maximum model length of 4096.
2025-12-23 22:43:58,979 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-23 22:43:58,979 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 00:40:28,658 - __main__ - INFO - ============================================================
2025-12-24 00:40:28,658 - __main__ - INFO - 数据集名称: math
2025-12-24 00:40:28,658 - __main__ - INFO - 数据集路径: dataset/math/test.jsonl
2025-12-24 00:40:28,658 - __main__ - INFO - ============================================================
2025-12-24 00:40:28,658 - __main__ - INFO - 使用数据集适配层加载: math
2025-12-24 00:40:28,658 - __main__ - INFO - ============================================================
2025-12-24 00:40:28,658 - __main__ - INFO - [数据集适配层] 开始加载数据集: math
2025-12-24 00:40:28,659 - __main__ - INFO - [数据集适配层] 文件路径: dataset/math/test.jsonl
2025-12-24 00:40:28,659 - __main__ - INFO - ============================================================
2025-12-24 00:40:28,661 - __main__ - INFO - [数据集适配层] 已加载 JSONL 文件: 500 条
2025-12-24 00:40:28,661 - __main__ - INFO - 预处理 MATH 数据集: 500 条
2025-12-24 00:40:28,662 - __main__ - INFO - [数据集适配层] 预处理完成: 500 条有效数据
2025-12-24 00:40:28,662 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 00:40:28,662 - __main__ - INFO - ============================================================
2025-12-24 00:40:28,662 - __main__ - INFO - 数据集加载成功，共 500 条数据
2025-12-24 00:40:28,662 - __main__ - INFO - ============================================================
2025-12-24 00:40:28,662 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 00:40:28,662 - __main__ - INFO - ============================================================
2025-12-24 00:40:28,662 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 00:40:28,663 - __main__ - INFO - 共需处理 500 条数据，批次大小: 64
2025-12-24 00:40:28,663 - __main__ - INFO - ============================================================
2025-12-24 00:40:28,663 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 00:40:28,663 - __main__ - INFO - ============================================================
2025-12-24 00:40:28,663 - __main__ - INFO - 处理批次 [1-128/500]
2025-12-24 00:40:28,663 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 00:40:28,663 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 00:40:33,090 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 2,3
2025-12-24 00:40:33,091 - inference.local_inference - INFO - ============================================================
2025-12-24 00:40:33,091 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 00:40:33,091 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 00:40:33,091 - inference.local_inference - INFO - ============================================================
2025-12-24 00:41:27,130 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 00:41:46,106 - __main__ - INFO - ============================================================
2025-12-24 00:41:46,106 - __main__ - INFO - 数据集名称: mmlu
2025-12-24 00:41:46,106 - __main__ - INFO - 数据集路径: dataset/mmlu_json/auxiliary_train.json
2025-12-24 00:41:46,106 - __main__ - INFO - ============================================================
2025-12-24 00:41:46,106 - __main__ - INFO - 使用数据集适配层加载: mmlu
2025-12-24 00:41:46,106 - __main__ - INFO - ============================================================
2025-12-24 00:41:46,106 - __main__ - INFO - [数据集适配层] 开始加载数据集: mmlu
2025-12-24 00:41:46,106 - __main__ - INFO - [数据集适配层] 文件路径: dataset/mmlu_json/auxiliary_train.json
2025-12-24 00:41:46,107 - __main__ - INFO - ============================================================
2025-12-24 00:41:48,971 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-24 00:41:48,971 - __main__ - INFO - 预处理 MMLU 数据集: 99842 条
2025-12-24 00:41:49,058 - __main__ - INFO - [数据集适配层] 预处理完成: 99842 条有效数据
2025-12-24 00:41:49,058 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 00:41:49,058 - __main__ - INFO - ============================================================
2025-12-24 00:41:49,084 - __main__ - INFO - 数据集加载成功，共 99842 条数据
2025-12-24 00:41:49,085 - __main__ - INFO - ============================================================
2025-12-24 00:41:49,087 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 00:41:49,088 - __main__ - INFO - ============================================================
2025-12-24 00:41:49,089 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 00:41:49,126 - __main__ - INFO - 共需处理 99842 条数据，批次大小: 64
2025-12-24 00:41:49,127 - __main__ - INFO - ============================================================
2025-12-24 00:41:49,127 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 00:41:49,127 - __main__ - INFO - ============================================================
2025-12-24 00:41:49,127 - __main__ - INFO - 处理批次 [1-128/99842]
2025-12-24 00:41:49,127 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 00:41:49,127 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 00:41:53,788 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 6,7
2025-12-24 00:41:53,788 - inference.local_inference - INFO - ============================================================
2025-12-24 00:41:53,788 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 00:41:53,788 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 00:41:53,788 - inference.local_inference - INFO - ============================================================
2025-12-24 00:42:03,540 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 00:42:03,540 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 00:42:41,317 - __main__ - INFO - ============================================================
2025-12-24 00:42:41,317 - __main__ - INFO - 数据集名称: gsm8k
2025-12-24 00:42:41,317 - __main__ - INFO - 数据集路径: dataset/gsm8k/test.jsonl
2025-12-24 00:42:41,317 - __main__ - INFO - ============================================================
2025-12-24 00:42:41,317 - __main__ - INFO - 使用数据集适配层加载: gsm8k
2025-12-24 00:42:41,317 - __main__ - INFO - ============================================================
2025-12-24 00:42:41,317 - __main__ - INFO - [数据集适配层] 开始加载数据集: gsm8k
2025-12-24 00:42:41,317 - __main__ - INFO - [数据集适配层] 文件路径: dataset/gsm8k/test.jsonl
2025-12-24 00:42:41,317 - __main__ - INFO - ============================================================
2025-12-24 00:42:41,325 - __main__ - INFO - [数据集适配层] 已加载 JSONL 文件: 1319 条
2025-12-24 00:42:41,325 - __main__ - INFO - 预处理 GSM8K 数据集: 1319 条
2025-12-24 00:42:41,325 - __main__ - INFO - [数据集适配层] 预处理完成: 1319 条有效数据
2025-12-24 00:42:41,325 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 00:42:41,325 - __main__ - INFO - ============================================================
2025-12-24 00:42:41,325 - __main__ - INFO - 数据集加载成功，共 1319 条数据
2025-12-24 00:42:41,325 - __main__ - INFO - ============================================================
2025-12-24 00:42:41,325 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 00:42:41,325 - __main__ - INFO - ============================================================
2025-12-24 00:42:41,326 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 00:42:41,326 - __main__ - INFO - 共需处理 1319 条数据，批次大小: 64
2025-12-24 00:42:41,326 - __main__ - INFO - ============================================================
2025-12-24 00:42:41,326 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 00:42:41,326 - __main__ - INFO - ============================================================
2025-12-24 00:42:41,326 - __main__ - INFO - 处理批次 [1-128/1319]
2025-12-24 00:42:41,326 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 00:42:41,326 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 00:42:46,070 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-24 00:42:46,070 - inference.local_inference - INFO - ============================================================
2025-12-24 00:42:46,071 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 00:42:46,071 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 00:42:46,071 - inference.local_inference - INFO - ============================================================
2025-12-24 00:42:51,303 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 00:43:12,347 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 00:43:12,348 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 00:43:42,340 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 00:43:56,611 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 00:43:56,612 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 00:51:08,521 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 00:51:08,522 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 00:52:45,755 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 00:52:45,755 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 00:53:45,497 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 00:53:45,497 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 00:57:45,634 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 00:57:45,635 - __main__ - INFO - 处理批次 [129-256/500]
2025-12-24 00:57:45,635 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 00:57:45,635 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 00:59:07,501 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 00:59:07,501 - __main__ - INFO - 处理批次 [129-256/1319]
2025-12-24 00:59:07,501 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 00:59:07,501 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 00:59:47,327 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 00:59:47,328 - __main__ - INFO - 处理批次 [129-256/99842]
2025-12-24 00:59:47,328 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 00:59:47,328 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 00:59:51,169 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 00:59:51,170 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 00:59:53,236 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 00:59:53,236 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 01:00:09,521 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 01:00:09,522 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 01:08:30,592 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 01:08:30,592 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 01:08:51,459 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 01:08:51,459 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 01:10:27,772 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 01:10:27,772 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 01:15:09,802 - __main__ - INFO - 批次 [129-256] 本地推理完成
2025-12-24 01:15:09,802 - __main__ - INFO - 处理批次 [257-384/500]
2025-12-24 01:15:09,802 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 01:15:09,802 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 01:15:17,492 - __main__ - INFO - 批次 [129-256] 本地推理完成
2025-12-24 01:15:17,492 - __main__ - INFO - 处理批次 [257-384/1319]
2025-12-24 01:15:17,493 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 01:15:17,493 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 01:15:29,188 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 01:15:29,188 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 01:15:49,880 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 01:15:49,880 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 01:16:30,517 - __main__ - INFO - 批次 [129-256] 本地推理完成
2025-12-24 01:16:30,517 - __main__ - INFO - 处理批次 [257-384/99842]
2025-12-24 01:16:30,517 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 01:16:30,517 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 01:16:53,145 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 01:16:53,145 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 01:24:21,244 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 01:24:21,244 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 01:24:36,715 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 01:24:36,716 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 01:27:09,714 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 01:27:09,714 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 01:30:55,403 - __main__ - INFO - 批次 [257-384] 本地推理完成
2025-12-24 01:30:55,404 - __main__ - INFO - 处理批次 [385-512/1319]
2025-12-24 01:30:55,404 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 01:30:55,404 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 01:31:08,815 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 01:31:08,816 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 01:31:19,103 - __main__ - INFO - 批次 [257-384] 本地推理完成
2025-12-24 01:31:19,103 - __main__ - INFO - 处理批次 [385-500/500]
2025-12-24 01:31:19,104 - __main__ - INFO -   → 生成Baseline答案 (116 条)...
2025-12-24 01:31:19,104 - __main__ - INFO - 批量生成Baseline答案: 116 条
2025-12-24 01:31:57,601 - __main__ - INFO -   → 生成差异分析 (116 条)...
2025-12-24 01:31:57,602 - __main__ - INFO - 批量生成差异分析: 116 条
2025-12-24 01:33:16,861 - __main__ - INFO - 批次 [257-384] 本地推理完成
2025-12-24 01:33:16,861 - __main__ - INFO - 处理批次 [385-512/99842]
2025-12-24 01:33:16,861 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 01:33:16,861 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 01:33:39,891 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 01:33:39,891 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 01:39:32,460 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 01:39:32,460 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 01:39:58,642 - __main__ - INFO -   → 生成Rejected原则 (116 条)...
2025-12-24 01:39:58,642 - __main__ - INFO - 批量生成原则（弱模型）: 116 条
2025-12-24 01:44:08,441 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 01:44:08,441 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 01:46:12,918 - __main__ - INFO - 批次 [385-500] 本地推理完成
2025-12-24 01:46:12,918 - __main__ - INFO - 阶段1完成: 共生成 500 条本地推理结果
2025-12-24 01:46:12,918 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-24 01:46:13,065 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-24 01:46:13,065 - __main__ - INFO - ============================================================
2025-12-24 01:46:13,065 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-24 01:46:13,065 - __main__ - INFO - ============================================================
2025-12-24 01:46:13,065 - __main__ - INFO - API分批处理: 每批 30 条，共 17 批
2025-12-24 01:46:13,065 - __main__ - INFO - API批次 [1-30/500] 开始处理...
2025-12-24 01:46:13,065 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:46:28,295 - __main__ - INFO - 批次 [385-512] 本地推理完成
2025-12-24 01:46:28,296 - __main__ - INFO - 处理批次 [513-640/1319]
2025-12-24 01:46:28,296 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 01:46:28,296 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 01:46:40,655 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 01:46:40,655 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 01:46:49,846 - __main__ - INFO - API批次 [1-30] 完成
2025-12-24 01:46:49,847 - __main__ - INFO - API批次 [31-60/500] 开始处理...
2025-12-24 01:46:49,847 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:47:47,314 - __main__ - INFO - API批次 [31-60] 完成
2025-12-24 01:47:47,315 - __main__ - INFO - API批次 [61-90/500] 开始处理...
2025-12-24 01:47:47,315 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:49:08,333 - __main__ - INFO - API批次 [61-90] 完成
2025-12-24 01:49:08,334 - __main__ - INFO - API批次 [91-120/500] 开始处理...
2025-12-24 01:49:08,334 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:50:11,130 - __main__ - INFO - API批次 [91-120] 完成
2025-12-24 01:50:11,131 - __main__ - INFO - API批次 [121-150/500] 开始处理...
2025-12-24 01:50:11,131 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:50:22,045 - __main__ - INFO - 批次 [385-512] 本地推理完成
2025-12-24 01:50:22,046 - __main__ - INFO - 处理批次 [513-640/99842]
2025-12-24 01:50:22,046 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 01:50:22,046 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 01:50:44,178 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 01:50:44,178 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 01:51:02,587 - __main__ - INFO - API批次 [121-150] 完成
2025-12-24 01:51:02,588 - __main__ - INFO - API批次 [151-180/500] 开始处理...
2025-12-24 01:51:02,588 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:52:13,800 - __main__ - INFO - API批次 [151-180] 完成
2025-12-24 01:52:13,801 - __main__ - INFO - API批次 [181-210/500] 开始处理...
2025-12-24 01:52:13,801 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:52:43,049 - __main__ - INFO - API批次 [181-210] 完成
2025-12-24 01:52:43,049 - __main__ - INFO - API批次 [211-240/500] 开始处理...
2025-12-24 01:52:43,050 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:53:13,076 - __main__ - INFO - API批次 [211-240] 完成
2025-12-24 01:53:13,076 - __main__ - INFO - API批次 [241-270/500] 开始处理...
2025-12-24 01:53:13,077 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:54:41,600 - __main__ - INFO - API批次 [241-270] 完成
2025-12-24 01:54:41,601 - __main__ - INFO - API批次 [271-300/500] 开始处理...
2025-12-24 01:54:41,601 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:55:09,980 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 01:55:09,980 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 01:55:15,783 - __main__ - INFO - API批次 [271-300] 完成
2025-12-24 01:55:15,784 - __main__ - INFO - API批次 [301-330/500] 开始处理...
2025-12-24 01:55:15,784 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:58:51,350 - __main__ - INFO - API批次 [301-330] 完成
2025-12-24 01:58:51,351 - __main__ - INFO - API批次 [331-360/500] 开始处理...
2025-12-24 01:58:51,351 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 01:59:25,572 - __main__ - INFO - API批次 [331-360] 完成
2025-12-24 01:59:25,573 - __main__ - INFO - API批次 [361-390/500] 开始处理...
2025-12-24 01:59:25,573 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 02:01:00,619 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 02:01:00,620 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 02:01:43,622 - __main__ - INFO - 批次 [513-640] 本地推理完成
2025-12-24 02:01:43,623 - __main__ - INFO - 处理批次 [641-768/1319]
2025-12-24 02:01:43,623 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 02:01:43,623 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 02:01:57,467 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 02:01:57,468 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 02:03:10,046 - __main__ - WARNING - ⚠️  批次中有 1/30 个空响应
2025-12-24 02:03:10,047 - __main__ - INFO - API批次 [361-390] 完成
2025-12-24 02:03:10,047 - __main__ - INFO - API批次 [391-420/500] 开始处理...
2025-12-24 02:03:10,047 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 02:04:21,971 - __main__ - INFO - API批次 [391-420] 完成
2025-12-24 02:04:21,972 - __main__ - INFO - API批次 [421-450/500] 开始处理...
2025-12-24 02:04:21,972 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 02:04:53,965 - __main__ - INFO - API批次 [421-450] 完成
2025-12-24 02:04:53,965 - __main__ - INFO - API批次 [451-480/500] 开始处理...
2025-12-24 02:04:53,965 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 02:05:29,952 - __main__ - INFO - API批次 [451-480] 完成
2025-12-24 02:05:29,952 - __main__ - INFO - API批次 [481-500/500] 开始处理...
2025-12-24 02:05:29,952 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 02:07:02,298 - __main__ - INFO - API批次 [481-500] 完成
2025-12-24 02:07:02,298 - __main__ - INFO - 阶段2完成: 共生成 500 条Chosen结果
2025-12-24 02:07:02,298 - __main__ - INFO - 开始数据质量检查...
2025-12-24 02:07:02,299 - __main__ - ERROR - ❌ 发现 1 个空chosen值
2025-12-24 02:07:02,299 - __main__ - ERROR -    空值索引（前10个）: [372]
2025-12-24 02:07:03,367 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-24 02:07:03,397 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 02:07:06,046 - __main__ - INFO - 批次 [513-640] 本地推理完成
2025-12-24 02:07:06,046 - __main__ - INFO - 处理批次 [641-768/99842]
2025-12-24 02:07:06,046 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 02:07:06,046 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 02:07:28,995 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 02:07:28,995 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 02:10:15,396 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 02:10:15,396 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 02:16:54,188 - __main__ - INFO - 批次 [641-768] 本地推理完成
2025-12-24 02:16:54,189 - __main__ - INFO - 处理批次 [769-896/1319]
2025-12-24 02:16:54,189 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 02:16:54,189 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 02:17:08,682 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 02:17:08,682 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 02:17:28,440 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 02:17:28,440 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 02:23:53,212 - __main__ - INFO - 批次 [641-768] 本地推理完成
2025-12-24 02:23:53,213 - __main__ - INFO - 处理批次 [769-896/99842]
2025-12-24 02:23:53,213 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 02:23:53,213 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 02:24:14,409 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 02:24:14,410 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 02:25:23,639 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 02:25:23,639 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 02:31:59,401 - __main__ - INFO - 批次 [769-896] 本地推理完成
2025-12-24 02:31:59,401 - __main__ - INFO - 处理批次 [897-1024/1319]
2025-12-24 02:31:59,401 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 02:31:59,401 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 02:32:13,176 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 02:32:13,176 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 02:34:36,977 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 02:34:36,977 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 02:40:21,616 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 02:40:21,616 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 02:40:59,982 - __main__ - INFO - 批次 [769-896] 本地推理完成
2025-12-24 02:40:59,982 - __main__ - INFO - 处理批次 [897-1024/99842]
2025-12-24 02:40:59,982 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 02:40:59,982 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 02:41:22,723 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 02:41:22,724 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 02:46:50,521 - __main__ - INFO - 批次 [897-1024] 本地推理完成
2025-12-24 02:46:50,522 - __main__ - INFO - 处理批次 [1025-1152/1319]
2025-12-24 02:46:50,522 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 02:46:50,522 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 02:47:04,104 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 02:47:04,105 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 02:51:49,360 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 02:51:49,360 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 02:55:28,868 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 02:55:28,868 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 02:57:47,061 - __main__ - INFO - 批次 [897-1024] 本地推理完成
2025-12-24 02:57:47,062 - __main__ - INFO - 处理批次 [1025-1152/99842]
2025-12-24 02:57:47,062 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 02:57:47,062 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 02:58:07,707 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 02:58:07,707 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 03:01:56,360 - __main__ - INFO - 批次 [1025-1152] 本地推理完成
2025-12-24 03:01:56,361 - __main__ - INFO - 处理批次 [1153-1280/1319]
2025-12-24 03:01:56,361 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 03:01:56,361 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 03:03:55,872 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 03:03:55,873 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 03:08:04,518 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 03:08:04,519 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 03:12:01,632 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 03:12:01,633 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 03:14:29,811 - __main__ - INFO - 批次 [1025-1152] 本地推理完成
2025-12-24 03:14:29,811 - __main__ - INFO - 处理批次 [1153-1280/99842]
2025-12-24 03:14:29,811 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 03:14:29,811 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 03:16:29,053 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 03:16:29,053 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 03:18:46,609 - __main__ - INFO - 批次 [1153-1280] 本地推理完成
2025-12-24 03:18:46,609 - __main__ - INFO - 处理批次 [1281-1319/1319]
2025-12-24 03:18:46,609 - __main__ - INFO -   → 生成Baseline答案 (39 条)...
2025-12-24 03:18:46,609 - __main__ - INFO - 批量生成Baseline答案: 39 条
2025-12-24 03:18:54,224 - __main__ - INFO -   → 生成差异分析 (39 条)...
2025-12-24 03:18:54,225 - __main__ - INFO - 批量生成差异分析: 39 条
2025-12-24 03:22:26,200 - __main__ - INFO -   → 生成Rejected原则 (39 条)...
2025-12-24 03:22:26,201 - __main__ - INFO - 批量生成原则（弱模型）: 39 条
2025-12-24 03:25:43,142 - __main__ - INFO - 批次 [1281-1319] 本地推理完成
2025-12-24 03:25:43,142 - __main__ - INFO - 阶段1完成: 共生成 1319 条本地推理结果
2025-12-24 03:25:43,142 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-24 03:25:43,504 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-24 03:25:43,505 - __main__ - INFO - ============================================================
2025-12-24 03:25:43,505 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-24 03:25:43,505 - __main__ - INFO - ============================================================
2025-12-24 03:25:43,505 - __main__ - INFO - API分批处理: 每批 30 条，共 44 批
2025-12-24 03:25:43,505 - __main__ - INFO - API批次 [1-30/1319] 开始处理...
2025-12-24 03:25:43,505 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:26:00,537 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 03:26:00,537 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 03:26:06,157 - __main__ - INFO - API批次 [1-30] 完成
2025-12-24 03:26:06,158 - __main__ - INFO - API批次 [31-60/1319] 开始处理...
2025-12-24 03:26:06,158 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:26:36,349 - __main__ - INFO - API批次 [31-60] 完成
2025-12-24 03:26:36,350 - __main__ - INFO - API批次 [61-90/1319] 开始处理...
2025-12-24 03:26:36,350 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:28:03,386 - __main__ - INFO - API批次 [61-90] 完成
2025-12-24 03:28:03,387 - __main__ - INFO - API批次 [91-120/1319] 开始处理...
2025-12-24 03:28:03,388 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:28:29,645 - __main__ - INFO - API批次 [91-120] 完成
2025-12-24 03:28:29,646 - __main__ - INFO - API批次 [121-150/1319] 开始处理...
2025-12-24 03:28:29,646 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:28:51,058 - __main__ - INFO - API批次 [121-150] 完成
2025-12-24 03:28:51,058 - __main__ - INFO - API批次 [151-180/1319] 开始处理...
2025-12-24 03:28:51,058 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:29:20,218 - __main__ - INFO - API批次 [151-180] 完成
2025-12-24 03:29:20,219 - __main__ - INFO - API批次 [181-210/1319] 开始处理...
2025-12-24 03:29:20,219 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:29:48,231 - __main__ - INFO - API批次 [181-210] 完成
2025-12-24 03:29:48,231 - __main__ - INFO - API批次 [211-240/1319] 开始处理...
2025-12-24 03:29:48,231 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:30:44,417 - __main__ - INFO - API批次 [211-240] 完成
2025-12-24 03:30:44,417 - __main__ - INFO - API批次 [241-270/1319] 开始处理...
2025-12-24 03:30:44,418 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:31:26,438 - __main__ - INFO - API批次 [241-270] 完成
2025-12-24 03:31:26,438 - __main__ - INFO - API批次 [271-300/1319] 开始处理...
2025-12-24 03:31:26,438 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:32:02,958 - __main__ - INFO - API批次 [271-300] 完成
2025-12-24 03:32:02,959 - __main__ - INFO - API批次 [301-330/1319] 开始处理...
2025-12-24 03:32:02,959 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:32:21,661 - __main__ - INFO - 批次 [1153-1280] 本地推理完成
2025-12-24 03:32:21,661 - __main__ - INFO - 处理批次 [1281-1408/99842]
2025-12-24 03:32:21,662 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 03:32:21,662 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 03:32:33,445 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 03:32:33,445 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 03:32:40,762 - __main__ - INFO - API批次 [301-330] 完成
2025-12-24 03:32:40,762 - __main__ - INFO - API批次 [331-360/1319] 开始处理...
2025-12-24 03:32:40,762 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:33:16,466 - __main__ - INFO - API批次 [331-360] 完成
2025-12-24 03:33:16,467 - __main__ - INFO - API批次 [361-390/1319] 开始处理...
2025-12-24 03:33:16,467 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:33:40,033 - __main__ - INFO - API批次 [361-390] 完成
2025-12-24 03:33:40,033 - __main__ - INFO - API批次 [391-420/1319] 开始处理...
2025-12-24 03:33:40,033 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:34:16,627 - __main__ - INFO - API批次 [391-420] 完成
2025-12-24 03:34:16,628 - __main__ - INFO - API批次 [421-450/1319] 开始处理...
2025-12-24 03:34:16,628 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:34:57,336 - __main__ - INFO - API批次 [421-450] 完成
2025-12-24 03:34:57,337 - __main__ - INFO - API批次 [451-480/1319] 开始处理...
2025-12-24 03:34:57,337 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:35:23,009 - __main__ - INFO - API批次 [451-480] 完成
2025-12-24 03:35:23,010 - __main__ - INFO - API批次 [481-510/1319] 开始处理...
2025-12-24 03:35:23,010 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:35:52,791 - __main__ - INFO - API批次 [481-510] 完成
2025-12-24 03:35:52,792 - __main__ - INFO - API批次 [511-540/1319] 开始处理...
2025-12-24 03:35:52,792 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:36:17,098 - __main__ - INFO - API批次 [511-540] 完成
2025-12-24 03:36:17,098 - __main__ - INFO - API批次 [541-570/1319] 开始处理...
2025-12-24 03:36:17,098 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:36:39,395 - __main__ - INFO - API批次 [541-570] 完成
2025-12-24 03:36:39,396 - __main__ - INFO - API批次 [571-600/1319] 开始处理...
2025-12-24 03:36:39,396 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:37:18,763 - __main__ - INFO - API批次 [571-600] 完成
2025-12-24 03:37:18,764 - __main__ - INFO - API批次 [601-630/1319] 开始处理...
2025-12-24 03:37:18,764 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:37:43,164 - __main__ - INFO - API批次 [601-630] 完成
2025-12-24 03:37:43,164 - __main__ - INFO - API批次 [631-660/1319] 开始处理...
2025-12-24 03:37:43,164 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:38:39,425 - __main__ - INFO - API批次 [631-660] 完成
2025-12-24 03:38:39,426 - __main__ - INFO - API批次 [661-690/1319] 开始处理...
2025-12-24 03:38:39,426 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:39:02,930 - __main__ - INFO - API批次 [661-690] 完成
2025-12-24 03:39:02,931 - __main__ - INFO - API批次 [691-720/1319] 开始处理...
2025-12-24 03:39:02,931 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:39:44,731 - __main__ - INFO - API批次 [691-720] 完成
2025-12-24 03:39:44,732 - __main__ - INFO - API批次 [721-750/1319] 开始处理...
2025-12-24 03:39:44,732 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:40:29,387 - __main__ - INFO - API批次 [721-750] 完成
2025-12-24 03:40:29,388 - __main__ - INFO - API批次 [751-780/1319] 开始处理...
2025-12-24 03:40:29,388 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:41:04,402 - __main__ - INFO - API批次 [751-780] 完成
2025-12-24 03:41:04,403 - __main__ - INFO - API批次 [781-810/1319] 开始处理...
2025-12-24 03:41:04,403 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:41:31,963 - __main__ - INFO - API批次 [781-810] 完成
2025-12-24 03:41:31,963 - __main__ - INFO - API批次 [811-840/1319] 开始处理...
2025-12-24 03:41:31,963 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:42:19,751 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 03:42:19,752 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 03:42:33,426 - __main__ - INFO - API批次 [811-840] 完成
2025-12-24 03:42:33,427 - __main__ - INFO - API批次 [841-870/1319] 开始处理...
2025-12-24 03:42:33,427 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:43:08,811 - __main__ - INFO - API批次 [841-870] 完成
2025-12-24 03:43:08,812 - __main__ - INFO - API批次 [871-900/1319] 开始处理...
2025-12-24 03:43:08,812 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:43:53,430 - __main__ - INFO - API批次 [871-900] 完成
2025-12-24 03:43:53,430 - __main__ - INFO - API批次 [901-930/1319] 开始处理...
2025-12-24 03:43:53,430 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:44:16,634 - __main__ - INFO - API批次 [901-930] 完成
2025-12-24 03:44:16,635 - __main__ - INFO - API批次 [931-960/1319] 开始处理...
2025-12-24 03:44:16,635 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:45:16,863 - __main__ - INFO - API批次 [931-960] 完成
2025-12-24 03:45:16,864 - __main__ - INFO - API批次 [961-990/1319] 开始处理...
2025-12-24 03:45:16,864 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:45:52,939 - __main__ - INFO - API批次 [961-990] 完成
2025-12-24 03:45:52,940 - __main__ - INFO - API批次 [991-1020/1319] 开始处理...
2025-12-24 03:45:52,940 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:46:34,536 - __main__ - INFO - API批次 [991-1020] 完成
2025-12-24 03:46:34,537 - __main__ - INFO - API批次 [1021-1050/1319] 开始处理...
2025-12-24 03:46:34,537 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:47:24,223 - __main__ - INFO - API批次 [1021-1050] 完成
2025-12-24 03:47:24,224 - __main__ - INFO - API批次 [1051-1080/1319] 开始处理...
2025-12-24 03:47:24,224 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:48:34,669 - __main__ - INFO - API批次 [1051-1080] 完成
2025-12-24 03:48:34,670 - __main__ - INFO - API批次 [1081-1110/1319] 开始处理...
2025-12-24 03:48:34,670 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:48:48,202 - __main__ - INFO - 批次 [1281-1408] 本地推理完成
2025-12-24 03:48:48,202 - __main__ - INFO - 处理批次 [1409-1536/99842]
2025-12-24 03:48:48,202 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 03:48:48,202 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 03:49:02,933 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 03:49:02,933 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 03:49:11,789 - __main__ - INFO - API批次 [1081-1110] 完成
2025-12-24 03:49:11,790 - __main__ - INFO - API批次 [1111-1140/1319] 开始处理...
2025-12-24 03:49:11,790 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:49:49,421 - __main__ - INFO - API批次 [1111-1140] 完成
2025-12-24 03:49:49,422 - __main__ - INFO - API批次 [1141-1170/1319] 开始处理...
2025-12-24 03:49:49,422 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:50:27,412 - __main__ - INFO - API批次 [1141-1170] 完成
2025-12-24 03:50:27,413 - __main__ - INFO - API批次 [1171-1200/1319] 开始处理...
2025-12-24 03:50:27,413 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:51:02,362 - __main__ - INFO - API批次 [1171-1200] 完成
2025-12-24 03:51:02,362 - __main__ - INFO - API批次 [1201-1230/1319] 开始处理...
2025-12-24 03:51:02,362 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:51:42,279 - __main__ - INFO - API批次 [1201-1230] 完成
2025-12-24 03:51:42,280 - __main__ - INFO - API批次 [1231-1260/1319] 开始处理...
2025-12-24 03:51:42,280 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:52:23,126 - __main__ - INFO - API批次 [1231-1260] 完成
2025-12-24 03:52:23,127 - __main__ - INFO - API批次 [1261-1290/1319] 开始处理...
2025-12-24 03:52:23,127 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:52:55,533 - __main__ - INFO - API批次 [1261-1290] 完成
2025-12-24 03:52:55,533 - __main__ - INFO - API批次 [1291-1319/1319] 开始处理...
2025-12-24 03:52:55,534 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 03:53:30,120 - __main__ - INFO - API批次 [1291-1319] 完成
2025-12-24 03:53:30,121 - __main__ - INFO - 阶段2完成: 共生成 1319 条Chosen结果
2025-12-24 03:53:30,121 - __main__ - INFO - 开始数据质量检查...
2025-12-24 03:53:30,122 - __main__ - INFO - ✅ 数据质量检查通过: 1319 条chosen全部非空
2025-12-24 03:53:30,122 - __main__ - INFO - ============================================================
2025-12-24 03:53:30,122 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-24 03:53:30,122 - __main__ - INFO - ============================================================
2025-12-24 03:53:30,122 - __main__ - INFO - 预检查数据完整性...
2025-12-24 03:53:30,126 - __main__ - INFO - Chosen非空率: 1319/1319 (100.0%)
2025-12-24 03:53:30,126 - __main__ - INFO - Rejected非空率: 1319/1319 (100.0%)
2025-12-24 03:53:30,126 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-24 03:53:30,146 - __main__ - INFO - 已保存 50/1319 条到JSONL
2025-12-24 03:53:30,165 - __main__ - INFO - 已保存 100/1319 条到JSONL
2025-12-24 03:53:30,195 - __main__ - INFO - 已保存 150/1319 条到JSONL
2025-12-24 03:53:30,213 - __main__ - INFO - 已保存 200/1319 条到JSONL
2025-12-24 03:53:30,231 - __main__ - INFO - 已保存 250/1319 条到JSONL
2025-12-24 03:53:30,251 - __main__ - INFO - 已保存 300/1319 条到JSONL
2025-12-24 03:53:30,277 - __main__ - INFO - 已保存 350/1319 条到JSONL
2025-12-24 03:53:30,294 - __main__ - INFO - 已保存 400/1319 条到JSONL
2025-12-24 03:53:30,311 - __main__ - INFO - 已保存 450/1319 条到JSONL
2025-12-24 03:53:30,329 - __main__ - INFO - 已保存 500/1319 条到JSONL
2025-12-24 03:53:30,347 - __main__ - INFO - 已保存 550/1319 条到JSONL
2025-12-24 03:53:30,363 - __main__ - INFO - 已保存 600/1319 条到JSONL
2025-12-24 03:53:30,381 - __main__ - INFO - 已保存 650/1319 条到JSONL
2025-12-24 03:53:30,398 - __main__ - INFO - 已保存 700/1319 条到JSONL
2025-12-24 03:53:30,416 - __main__ - INFO - 已保存 750/1319 条到JSONL
2025-12-24 03:53:30,432 - __main__ - INFO - 已保存 800/1319 条到JSONL
2025-12-24 03:53:30,448 - __main__ - INFO - 已保存 850/1319 条到JSONL
2025-12-24 03:53:30,467 - __main__ - INFO - 已保存 900/1319 条到JSONL
2025-12-24 03:53:30,482 - __main__ - INFO - 已保存 950/1319 条到JSONL
2025-12-24 03:53:30,501 - __main__ - INFO - 已保存 1000/1319 条到JSONL
2025-12-24 03:53:30,518 - __main__ - INFO - 已保存 1050/1319 条到JSONL
2025-12-24 03:53:30,536 - __main__ - INFO - 已保存 1100/1319 条到JSONL
2025-12-24 03:53:30,552 - __main__ - INFO - 已保存 1150/1319 条到JSONL
2025-12-24 03:53:30,571 - __main__ - INFO - 已保存 1200/1319 条到JSONL
2025-12-24 03:53:30,589 - __main__ - INFO - 已保存 1250/1319 条到JSONL
2025-12-24 03:53:30,606 - __main__ - INFO - 已保存 1300/1319 条到JSONL
2025-12-24 03:53:30,658 - __main__ - INFO - DPO数据生成完成: output/dpo_gsm8k.jsonl
2025-12-24 03:53:30,658 - __main__ - INFO - 共保存 1319 条数据到JSONL格式
2025-12-24 03:53:31,752 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-24 03:53:31,782 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 03:58:50,403 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 03:58:50,404 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 04:05:14,928 - __main__ - INFO - 批次 [1409-1536] 本地推理完成
2025-12-24 04:05:14,929 - __main__ - INFO - 处理批次 [1537-1664/99842]
2025-12-24 04:05:14,929 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 04:05:14,929 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 04:05:28,085 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 04:05:28,085 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 04:15:08,039 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 04:15:08,039 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 04:21:25,199 - __main__ - INFO - 批次 [1537-1664] 本地推理完成
2025-12-24 04:21:25,199 - __main__ - INFO - 处理批次 [1665-1792/99842]
2025-12-24 04:21:25,200 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 04:21:25,200 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 04:21:38,095 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 04:21:38,095 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 04:31:26,092 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 04:31:26,093 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 04:37:59,332 - __main__ - INFO - 批次 [1665-1792] 本地推理完成
2025-12-24 04:37:59,333 - __main__ - INFO - 处理批次 [1793-1920/99842]
2025-12-24 04:37:59,333 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 04:37:59,333 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 04:38:15,375 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 04:38:15,375 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 04:48:06,973 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 04:48:06,973 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 04:54:29,666 - __main__ - INFO - 批次 [1793-1920] 本地推理完成
2025-12-24 04:54:29,666 - __main__ - INFO - 处理批次 [1921-2048/99842]
2025-12-24 04:54:29,666 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 04:54:29,667 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 04:54:44,083 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 04:54:44,083 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 05:04:18,511 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 05:04:18,511 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 05:10:42,503 - __main__ - INFO - 批次 [1921-2048] 本地推理完成
2025-12-24 05:10:42,504 - __main__ - INFO - 处理批次 [2049-2176/99842]
2025-12-24 05:10:42,504 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 05:10:42,504 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 05:10:54,441 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 05:10:54,441 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 05:20:35,339 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 05:20:35,339 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 05:26:52,643 - __main__ - INFO - 批次 [2049-2176] 本地推理完成
2025-12-24 05:26:52,643 - __main__ - INFO - 处理批次 [2177-2304/99842]
2025-12-24 05:26:52,643 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 05:26:52,643 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 05:27:11,009 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 05:27:11,010 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 05:36:36,187 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 05:36:36,188 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 05:43:16,052 - __main__ - INFO - 批次 [2177-2304] 本地推理完成
2025-12-24 05:43:16,053 - __main__ - INFO - 处理批次 [2305-2432/99842]
2025-12-24 05:43:16,053 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 05:43:16,053 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 05:43:28,444 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 05:43:28,444 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 05:53:03,032 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 05:53:03,032 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 05:59:35,615 - __main__ - INFO - 批次 [2305-2432] 本地推理完成
2025-12-24 05:59:35,615 - __main__ - INFO - 处理批次 [2433-2560/99842]
2025-12-24 05:59:35,615 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 05:59:35,616 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 05:59:50,395 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 05:59:50,395 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 06:09:32,917 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 06:09:32,918 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 06:15:57,384 - __main__ - INFO - 批次 [2433-2560] 本地推理完成
2025-12-24 06:15:57,385 - __main__ - INFO - 处理批次 [2561-2688/99842]
2025-12-24 06:15:57,385 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 06:15:57,385 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 06:16:13,120 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 06:16:13,121 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 06:25:48,978 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 06:25:48,978 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 06:32:22,101 - __main__ - INFO - 批次 [2561-2688] 本地推理完成
2025-12-24 06:32:22,102 - __main__ - INFO - 处理批次 [2689-2816/99842]
2025-12-24 06:32:22,102 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 06:32:22,102 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 06:32:34,243 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 06:32:34,244 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 06:42:17,138 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 06:42:17,138 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 06:48:45,277 - __main__ - INFO - 批次 [2689-2816] 本地推理完成
2025-12-24 06:48:45,277 - __main__ - INFO - 处理批次 [2817-2944/99842]
2025-12-24 06:48:45,278 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 06:48:45,278 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 06:48:55,771 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 06:48:55,771 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 06:58:56,675 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 06:58:56,676 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 07:04:23,211 - __main__ - INFO - 批次 [2817-2944] 本地推理完成
2025-12-24 07:04:23,212 - __main__ - INFO - 处理批次 [2945-3072/99842]
2025-12-24 07:04:23,212 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 07:04:23,213 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 07:04:32,052 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 07:04:32,052 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 07:14:28,054 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 07:14:28,055 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 07:20:09,804 - __main__ - INFO - 批次 [2945-3072] 本地推理完成
2025-12-24 07:20:09,804 - __main__ - INFO - 处理批次 [3073-3200/99842]
2025-12-24 07:20:09,805 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 07:20:09,805 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 07:20:19,505 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 07:20:19,505 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 07:30:05,987 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 07:30:05,988 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 07:35:49,138 - __main__ - INFO - 批次 [3073-3200] 本地推理完成
2025-12-24 07:35:49,138 - __main__ - INFO - 处理批次 [3201-3328/99842]
2025-12-24 07:35:49,139 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 07:35:49,139 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 07:35:59,250 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 07:35:59,251 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 07:45:53,653 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 07:45:53,653 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 07:51:46,885 - __main__ - INFO - 批次 [3201-3328] 本地推理完成
2025-12-24 07:51:46,885 - __main__ - INFO - 处理批次 [3329-3456/99842]
2025-12-24 07:51:46,886 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 07:51:46,886 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 07:51:57,159 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 07:51:57,160 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 08:02:00,470 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 08:02:00,471 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 08:07:48,563 - __main__ - INFO - 批次 [3329-3456] 本地推理完成
2025-12-24 08:07:48,564 - __main__ - INFO - 处理批次 [3457-3584/99842]
2025-12-24 08:07:48,564 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 08:07:48,564 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 08:07:59,042 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 08:07:59,043 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 08:17:38,697 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 08:17:38,697 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 08:23:21,277 - __main__ - INFO - 批次 [3457-3584] 本地推理完成
2025-12-24 08:23:21,278 - __main__ - INFO - 处理批次 [3585-3712/99842]
2025-12-24 08:23:21,278 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 08:23:21,278 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 08:23:30,414 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 08:23:30,415 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 08:33:26,996 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 08:33:26,996 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 08:39:29,360 - __main__ - INFO - 批次 [3585-3712] 本地推理完成
2025-12-24 08:39:29,360 - __main__ - INFO - 处理批次 [3713-3840/99842]
2025-12-24 08:39:29,361 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 08:39:29,361 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 08:39:39,963 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 08:39:39,963 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 08:49:33,502 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 08:49:33,503 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 08:55:17,671 - __main__ - INFO - 批次 [3713-3840] 本地推理完成
2025-12-24 08:55:17,671 - __main__ - INFO - 处理批次 [3841-3968/99842]
2025-12-24 08:55:17,672 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 08:55:17,672 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 08:55:26,373 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 08:55:26,373 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 09:05:16,146 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 09:05:16,147 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 09:11:05,527 - __main__ - INFO - 批次 [3841-3968] 本地推理完成
2025-12-24 09:11:05,527 - __main__ - INFO - 处理批次 [3969-4096/99842]
2025-12-24 09:11:05,528 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 09:11:05,528 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 09:11:14,772 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 09:11:14,773 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 09:21:08,545 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 09:21:08,546 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 09:27:08,669 - __main__ - INFO - 批次 [3969-4096] 本地推理完成
2025-12-24 09:27:08,670 - __main__ - INFO - 处理批次 [4097-4224/99842]
2025-12-24 09:27:08,670 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 09:27:08,670 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 09:27:18,880 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 09:27:18,881 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 09:37:10,273 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 09:37:10,274 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 09:43:04,452 - __main__ - INFO - 批次 [4097-4224] 本地推理完成
2025-12-24 09:43:04,453 - __main__ - INFO - 处理批次 [4225-4352/99842]
2025-12-24 09:43:04,453 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 09:43:04,453 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 09:43:15,383 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 09:43:15,384 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 09:53:02,547 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 09:53:02,547 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 09:58:58,127 - __main__ - INFO - 批次 [4225-4352] 本地推理完成
2025-12-24 09:58:58,128 - __main__ - INFO - 处理批次 [4353-4480/99842]
2025-12-24 09:58:58,128 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 09:58:58,128 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 09:59:09,514 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 09:59:09,515 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 10:08:55,115 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 10:08:55,116 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 10:15:13,451 - __main__ - INFO - 批次 [4353-4480] 本地推理完成
2025-12-24 10:15:13,452 - __main__ - INFO - 处理批次 [4481-4608/99842]
2025-12-24 10:15:13,452 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 10:15:13,452 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 10:15:23,841 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 10:15:23,842 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 10:25:17,150 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 10:25:17,151 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 10:31:36,138 - __main__ - INFO - 批次 [4481-4608] 本地推理完成
2025-12-24 10:31:36,138 - __main__ - INFO - 处理批次 [4609-4736/99842]
2025-12-24 10:31:36,138 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 10:31:36,139 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 10:31:45,392 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 10:31:45,392 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 10:41:20,210 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 10:41:20,211 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 10:47:49,904 - __main__ - INFO - 批次 [4609-4736] 本地推理完成
2025-12-24 10:47:49,905 - __main__ - INFO - 处理批次 [4737-4864/99842]
2025-12-24 10:47:49,905 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 10:47:49,905 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 10:48:02,001 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 10:48:02,001 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 10:57:43,309 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 10:57:43,310 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 11:04:18,182 - __main__ - INFO - 批次 [4737-4864] 本地推理完成
2025-12-24 11:04:18,182 - __main__ - INFO - 处理批次 [4865-4992/99842]
2025-12-24 11:04:18,182 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 11:04:18,182 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 11:04:32,661 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 11:04:32,661 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 11:14:28,169 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 11:14:28,170 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 11:20:37,238 - __main__ - INFO - 批次 [4865-4992] 本地推理完成
2025-12-24 11:20:37,238 - __main__ - INFO - 处理批次 [4993-5120/99842]
2025-12-24 11:20:37,239 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 11:20:37,239 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 11:22:38,860 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 11:22:38,861 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 11:33:02,882 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 11:33:02,883 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 11:38:48,987 - __main__ - INFO - 批次 [4993-5120] 本地推理完成
2025-12-24 11:38:48,988 - __main__ - INFO - 处理批次 [5121-5248/99842]
2025-12-24 11:38:48,989 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 11:38:48,989 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 11:39:03,292 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 11:39:03,293 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 18:24:21,540 - __main__ - INFO - ============================================================
2025-12-24 18:24:21,540 - __main__ - INFO - 数据集名称: bbh
2025-12-24 18:24:21,540 - __main__ - INFO - 数据集路径: dataset/bbh/boolean_expressions.json
2025-12-24 18:24:21,540 - __main__ - INFO - ============================================================
2025-12-24 18:24:21,540 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-24 18:24:21,540 - __main__ - INFO - ============================================================
2025-12-24 18:24:21,540 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-24 18:24:21,540 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/boolean_expressions.json
2025-12-24 18:24:21,540 - __main__ - INFO - ============================================================
2025-12-24 18:24:21,541 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-24 18:24:21,541 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-24 18:24:21,541 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-24 18:24:21,541 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 18:24:21,541 - __main__ - INFO - ============================================================
2025-12-24 18:24:21,541 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-24 18:24:21,541 - __main__ - INFO - ============================================================
2025-12-24 18:24:21,541 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 18:24:21,541 - __main__ - INFO - ============================================================
2025-12-24 18:24:21,542 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 18:24:21,544 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-24 18:24:21,544 - __main__ - INFO - ============================================================
2025-12-24 18:24:21,544 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 18:24:21,544 - __main__ - INFO - ============================================================
2025-12-24 18:24:21,544 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-24 18:24:21,544 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 18:24:21,544 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 18:24:25,934 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-24 18:24:25,935 - inference.local_inference - INFO - ============================================================
2025-12-24 18:24:25,935 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 18:24:25,935 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 18:24:25,935 - inference.local_inference - INFO - ============================================================
2025-12-24 18:24:39,187 - __main__ - INFO - ============================================================
2025-12-24 18:24:39,188 - __main__ - INFO - 数据集名称: mmlu
2025-12-24 18:24:39,188 - __main__ - INFO - 数据集路径: dataset/mmlu/auxiliary_train.json
2025-12-24 18:24:39,188 - __main__ - INFO - ============================================================
2025-12-24 18:24:39,188 - __main__ - INFO - 使用数据集适配层加载: mmlu
2025-12-24 18:24:39,188 - __main__ - INFO - ============================================================
2025-12-24 18:24:39,188 - __main__ - INFO - [数据集适配层] 开始加载数据集: mmlu
2025-12-24 18:24:39,188 - __main__ - INFO - [数据集适配层] 文件路径: dataset/mmlu/auxiliary_train.json
2025-12-24 18:24:39,188 - __main__ - INFO - ============================================================
2025-12-24 18:24:42,011 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-24 18:24:42,012 - __main__ - INFO - 预处理 MMLU 数据集: 99842 条
2025-12-24 18:24:42,097 - __main__ - INFO - [数据集适配层] 预处理完成: 99842 条有效数据
2025-12-24 18:24:42,097 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 18:24:42,097 - __main__ - INFO - ============================================================
2025-12-24 18:24:42,122 - __main__ - INFO - 数据集加载成功，共 99842 条数据
2025-12-24 18:24:42,124 - __main__ - INFO - ============================================================
2025-12-24 18:24:42,125 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 18:24:42,126 - __main__ - INFO - ============================================================
2025-12-24 18:24:42,127 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 18:24:42,165 - __main__ - INFO - 共需处理 99842 条数据，批次大小: 64
2025-12-24 18:24:42,165 - __main__ - INFO - ============================================================
2025-12-24 18:24:42,165 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 18:24:42,165 - __main__ - INFO - ============================================================
2025-12-24 18:24:42,165 - __main__ - INFO - 处理批次 [1-128/99842]
2025-12-24 18:24:42,165 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 18:24:42,165 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 18:24:47,116 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 6,7
2025-12-24 18:24:47,116 - inference.local_inference - INFO - ============================================================
2025-12-24 18:24:47,117 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 18:24:47,117 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 18:24:47,117 - inference.local_inference - INFO - ============================================================
2025-12-24 18:25:24,008 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 18:25:32,284 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 18:25:32,284 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 18:26:02,252 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 18:26:23,065 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 18:26:23,066 - __main__ - INFO - 批量生成差异分析: 128 条
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              2025-12-24 18:31:16,457 - __main__ - INFO - ============================================================
2025-12-24 18:31:16,457 - __main__ - INFO - 数据集名称: math
2025-12-24 18:31:16,458 - __main__ - INFO - 数据集路径: dataset/math/test.jsonl
2025-12-24 18:31:16,458 - __main__ - INFO - ============================================================
2025-12-24 18:31:16,458 - __main__ - INFO - 使用数据集适配层加载: math
2025-12-24 18:31:16,458 - __main__ - INFO - ============================================================
2025-12-24 18:31:16,458 - __main__ - INFO - [数据集适配层] 开始加载数据集: math
2025-12-24 18:31:16,458 - __main__ - INFO - [数据集适配层] 文件路径: dataset/math/test.jsonl
2025-12-24 18:31:16,458 - __main__ - INFO - ============================================================
2025-12-24 18:31:16,461 - __main__ - INFO - [数据集适配层] 已加载 JSONL 文件: 500 条
2025-12-24 18:31:16,461 - __main__ - INFO - 预处理 MATH 数据集: 500 条
2025-12-24 18:31:16,461 - __main__ - INFO - [数据集适配层] 预处理完成: 500 条有效数据
2025-12-24 18:31:16,461 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 18:31:16,461 - __main__ - INFO - ============================================================
2025-12-24 18:31:16,461 - __main__ - INFO - 数据集加载成功，共 500 条数据
2025-12-24 18:31:16,461 - __main__ - INFO - ============================================================
2025-12-24 18:31:16,461 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 18:31:16,461 - __main__ - INFO - ============================================================
2025-12-24 18:31:16,461 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 18:31:16,462 - __main__ - INFO - 共需处理 500 条数据，批次大小: 64
2025-12-24 18:31:16,462 - __main__ - INFO - ============================================================
2025-12-24 18:31:16,462 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 18:31:16,462 - __main__ - INFO - ============================================================
2025-12-24 18:31:16,462 - __main__ - INFO - 处理批次 [1-128/500]
2025-12-24 18:31:16,462 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 18:31:16,462 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 18:31:21,018 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 2,3
2025-12-24 18:31:21,018 - inference.local_inference - INFO - ============================================================
2025-12-24 18:31:21,018 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 18:31:21,018 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 18:31:21,019 - inference.local_inference - INFO - ============================================================
2025-12-24 18:32:28,943 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 18:34:00,283 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 18:34:00,284 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 18:35:05,887 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 18:35:05,888 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 18:36:40,153 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 18:36:40,153 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 18:41:30,831 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 18:41:30,831 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-24 18:41:30,831 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-24 18:41:30,831 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-24 18:41:38,955 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-24 18:41:38,955 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-24 18:42:46,958 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 18:42:46,959 - __main__ - INFO - 处理批次 [129-256/99842]
2025-12-24 18:42:46,959 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 18:42:46,959 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 18:43:07,986 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 18:43:07,987 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 18:50:28,201 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-24 18:50:28,201 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-24 18:53:19,832 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 18:53:19,833 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 18:53:31,300 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 18:53:31,300 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 18:56:38,251 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-24 18:56:38,251 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-24 18:56:38,252 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-24 18:56:38,333 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-24 18:56:38,333 - __main__ - INFO - ============================================================
2025-12-24 18:56:38,333 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-24 18:56:38,333 - __main__ - INFO - ============================================================
2025-12-24 18:56:38,333 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-24 18:56:38,333 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-24 18:56:38,333 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 18:57:14,991 - __main__ - INFO - API批次 [1-30] 完成
2025-12-24 18:57:14,992 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-24 18:57:14,992 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 18:57:40,873 - __main__ - INFO - API批次 [31-60] 完成
2025-12-24 18:57:40,873 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-24 18:57:40,874 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 18:58:38,713 - __main__ - INFO - API批次 [61-90] 完成
2025-12-24 18:58:38,714 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-24 18:58:38,714 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 18:59:20,579 - __main__ - INFO - API批次 [91-120] 完成
2025-12-24 18:59:20,580 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-24 18:59:20,580 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 18:59:38,610 - __main__ - INFO - 批次 [129-256] 本地推理完成
2025-12-24 18:59:38,610 - __main__ - INFO - 处理批次 [257-384/99842]
2025-12-24 18:59:38,611 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 18:59:38,611 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 18:59:59,562 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 18:59:59,562 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 19:00:14,420 - __main__ - INFO - API批次 [121-150] 完成
2025-12-24 19:00:14,421 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-24 19:00:14,421 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 19:01:04,313 - __main__ - INFO - API批次 [151-180] 完成
2025-12-24 19:01:04,314 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-24 19:01:04,314 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 19:01:48,283 - __main__ - INFO - API批次 [181-210] 完成
2025-12-24 19:01:48,284 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-24 19:01:48,284 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 19:02:16,983 - __main__ - INFO - API批次 [211-240] 完成
2025-12-24 19:02:16,984 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-24 19:02:16,984 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 19:02:52,032 - __main__ - INFO - API批次 [241-250] 完成
2025-12-24 19:02:52,032 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-24 19:02:52,032 - __main__ - INFO - 开始数据质量检查...
2025-12-24 19:02:52,033 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-24 19:02:52,033 - __main__ - INFO - ============================================================
2025-12-24 19:02:52,033 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-24 19:02:52,033 - __main__ - INFO - ============================================================
2025-12-24 19:02:52,033 - __main__ - INFO - 预检查数据完整性...
2025-12-24 19:02:52,034 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-24 19:02:52,034 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-24 19:02:52,034 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-24 19:02:52,060 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-24 19:02:52,091 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-24 19:02:52,108 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-24 19:02:52,128 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-24 19:02:52,144 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-24 19:02:52,162 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-24 19:02:52,163 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-24 19:02:53,439 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-24 19:02:53,468 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 19:02:54,540 - __main__ - INFO - ============================================================
2025-12-24 19:02:54,540 - __main__ - INFO - 数据集名称: bbh
2025-12-24 19:02:54,540 - __main__ - INFO - 数据集路径: dataset/bbh/causal_judgement.json
2025-12-24 19:02:54,540 - __main__ - INFO - ============================================================
2025-12-24 19:02:54,540 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-24 19:02:54,540 - __main__ - INFO - ============================================================
2025-12-24 19:02:54,540 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-24 19:02:54,540 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/causal_judgement.json
2025-12-24 19:02:54,540 - __main__ - INFO - ============================================================
2025-12-24 19:02:54,541 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-24 19:02:54,541 - __main__ - INFO - 预处理 BBH 数据集: 187 条
2025-12-24 19:02:54,541 - __main__ - INFO - [数据集适配层] 预处理完成: 187 条有效数据
2025-12-24 19:02:54,541 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 19:02:54,541 - __main__ - INFO - ============================================================
2025-12-24 19:02:54,541 - __main__ - INFO - 数据集加载成功，共 187 条数据
2025-12-24 19:02:54,541 - __main__ - INFO - ============================================================
2025-12-24 19:02:54,541 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 19:02:54,541 - __main__ - INFO - ============================================================
2025-12-24 19:02:54,542 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 19:02:54,544 - __main__ - INFO - 共需处理 187 条数据，批次大小: 64
2025-12-24 19:02:54,544 - __main__ - INFO - ============================================================
2025-12-24 19:02:54,544 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 19:02:54,544 - __main__ - INFO - ============================================================
2025-12-24 19:02:54,544 - __main__ - INFO - 处理批次 [1-128/187]
2025-12-24 19:02:54,544 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 19:02:54,544 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 19:02:58,993 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-24 19:02:58,994 - inference.local_inference - INFO - ============================================================
2025-12-24 19:02:58,994 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 19:02:58,994 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 19:02:58,994 - inference.local_inference - INFO - ============================================================
2025-12-24 19:03:58,213 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 19:04:13,605 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 19:04:13,606 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 19:07:29,283 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 19:07:29,284 - __main__ - INFO - 处理批次 [129-256/500]
2025-12-24 19:07:29,284 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 19:07:29,284 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 19:10:27,407 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 19:10:27,407 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 19:12:22,939 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 19:12:22,940 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 19:14:12,232 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 19:14:12,233 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 19:16:28,037 - __main__ - INFO - 批次 [257-384] 本地推理完成
2025-12-24 19:16:28,037 - __main__ - INFO - 处理批次 [385-512/99842]
2025-12-24 19:16:28,038 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 19:16:28,038 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 19:16:49,799 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 19:16:49,799 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 19:20:12,621 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 19:20:12,621 - __main__ - INFO - 处理批次 [129-187/187]
2025-12-24 19:20:12,621 - __main__ - INFO -   → 生成Baseline答案 (59 条)...
2025-12-24 19:20:12,621 - __main__ - INFO - 批量生成Baseline答案: 59 条
2025-12-24 19:20:22,088 - __main__ - INFO -   → 生成差异分析 (59 条)...
2025-12-24 19:20:22,089 - __main__ - INFO - 批量生成差异分析: 59 条
2025-12-24 19:24:58,810 - __main__ - INFO -   → 生成Rejected原则 (59 条)...
2025-12-24 19:24:58,811 - __main__ - INFO - 批量生成原则（弱模型）: 59 条
2025-12-24 19:27:39,317 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 19:27:39,318 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 19:28:41,178 - __main__ - INFO - 批次 [129-187] 本地推理完成
2025-12-24 19:28:41,178 - __main__ - INFO - 阶段1完成: 共生成 187 条本地推理结果
2025-12-24 19:28:41,178 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-24 19:28:41,249 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-24 19:28:41,249 - __main__ - INFO - ============================================================
2025-12-24 19:28:41,249 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-24 19:28:41,249 - __main__ - INFO - ============================================================
2025-12-24 19:28:41,249 - __main__ - INFO - API分批处理: 每批 30 条，共 7 批
2025-12-24 19:28:41,249 - __main__ - INFO - API批次 [1-30/187] 开始处理...
2025-12-24 19:28:41,249 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 19:29:15,006 - __main__ - INFO - API批次 [1-30] 完成
2025-12-24 19:29:15,007 - __main__ - INFO - API批次 [31-60/187] 开始处理...
2025-12-24 19:29:15,007 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 19:29:57,308 - __main__ - INFO - API批次 [31-60] 完成
2025-12-24 19:29:57,309 - __main__ - INFO - API批次 [61-90/187] 开始处理...
2025-12-24 19:29:57,309 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 19:30:40,197 - __main__ - INFO - API批次 [61-90] 完成
2025-12-24 19:30:40,198 - __main__ - INFO - API批次 [91-120/187] 开始处理...
2025-12-24 19:30:40,198 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 19:31:00,067 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 19:31:00,067 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 19:31:23,219 - __main__ - INFO - API批次 [91-120] 完成
2025-12-24 19:31:23,220 - __main__ - INFO - API批次 [121-150/187] 开始处理...
2025-12-24 19:31:23,220 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 19:31:49,667 - __main__ - INFO - API批次 [121-150] 完成
2025-12-24 19:31:49,671 - __main__ - INFO - API批次 [151-180/187] 开始处理...
2025-12-24 19:31:49,671 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 19:32:15,106 - __main__ - INFO - API批次 [151-180] 完成
2025-12-24 19:32:15,106 - __main__ - INFO - API批次 [181-187/187] 开始处理...
2025-12-24 19:32:15,106 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 19:33:31,578 - __main__ - INFO - API批次 [181-187] 完成
2025-12-24 19:33:31,579 - __main__ - INFO - 阶段2完成: 共生成 187 条Chosen结果
2025-12-24 19:33:31,579 - __main__ - INFO - 开始数据质量检查...
2025-12-24 19:33:31,583 - __main__ - INFO - ✅ 数据质量检查通过: 187 条chosen全部非空
2025-12-24 19:33:31,583 - __main__ - INFO - ============================================================
2025-12-24 19:33:31,583 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-24 19:33:31,583 - __main__ - INFO - ============================================================
2025-12-24 19:33:31,583 - __main__ - INFO - 预检查数据完整性...
2025-12-24 19:33:31,584 - __main__ - INFO - Chosen非空率: 187/187 (100.0%)
2025-12-24 19:33:31,584 - __main__ - INFO - Rejected非空率: 187/187 (100.0%)
2025-12-24 19:33:31,584 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-24 19:33:31,606 - __main__ - INFO - 已保存 50/187 条到JSONL
2025-12-24 19:33:31,627 - __main__ - INFO - 已保存 100/187 条到JSONL
2025-12-24 19:33:31,648 - __main__ - INFO - 已保存 150/187 条到JSONL
2025-12-24 19:33:31,678 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-24 19:33:31,678 - __main__ - INFO - 共保存 187 条数据到JSONL格式
2025-12-24 19:33:33,052 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-24 19:33:33,091 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 19:33:34,169 - __main__ - INFO - ============================================================
2025-12-24 19:33:34,169 - __main__ - INFO - 数据集名称: bbh
2025-12-24 19:33:34,169 - __main__ - INFO - 数据集路径: dataset/bbh/date_understanding.json
2025-12-24 19:33:34,169 - __main__ - INFO - ============================================================
2025-12-24 19:33:34,169 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-24 19:33:34,169 - __main__ - INFO - ============================================================
2025-12-24 19:33:34,169 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-24 19:33:34,169 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/date_understanding.json
2025-12-24 19:33:34,169 - __main__ - INFO - ============================================================
2025-12-24 19:33:34,170 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-24 19:33:34,170 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-24 19:33:34,170 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-24 19:33:34,170 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 19:33:34,170 - __main__ - INFO - ============================================================
2025-12-24 19:33:34,170 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-24 19:33:34,170 - __main__ - INFO - ============================================================
2025-12-24 19:33:34,170 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 19:33:34,170 - __main__ - INFO - ============================================================
2025-12-24 19:33:34,171 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 19:33:34,174 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-24 19:33:34,174 - __main__ - INFO - ============================================================
2025-12-24 19:33:34,174 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 19:33:34,174 - __main__ - INFO - ============================================================
2025-12-24 19:33:34,174 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-24 19:33:34,174 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 19:33:34,174 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 19:33:38,496 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-24 19:33:38,496 - inference.local_inference - INFO - ============================================================
2025-12-24 19:33:38,496 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 19:33:38,496 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 19:33:38,496 - inference.local_inference - INFO - ============================================================
2025-12-24 19:33:44,904 - __main__ - INFO - 批次 [385-512] 本地推理完成
2025-12-24 19:33:44,905 - __main__ - INFO - 处理批次 [513-640/99842]
2025-12-24 19:33:44,905 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 19:33:44,905 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 19:34:07,576 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 19:34:07,577 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 19:34:37,510 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 19:34:56,245 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 19:34:56,246 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 19:43:55,428 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 19:43:55,428 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 19:44:17,144 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 19:44:17,144 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 19:46:01,822 - __main__ - INFO - 批次 [129-256] 本地推理完成
2025-12-24 19:46:01,822 - __main__ - INFO - 处理批次 [257-384/500]
2025-12-24 19:46:01,822 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 19:46:01,822 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 19:47:43,721 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 19:47:43,722 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 19:50:30,210 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 19:50:30,210 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-24 19:50:30,210 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-24 19:50:30,210 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-24 19:50:43,598 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-24 19:50:43,599 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-24 19:50:46,890 - __main__ - INFO - 批次 [513-640] 本地推理完成
2025-12-24 19:50:46,890 - __main__ - INFO - 处理批次 [641-768/99842]
2025-12-24 19:50:46,891 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 19:50:46,891 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 19:51:09,318 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 19:51:09,318 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 19:59:24,489 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-24 19:59:24,489 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-24 20:01:18,271 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 20:01:18,271 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 20:05:37,123 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-24 20:05:37,124 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-24 20:05:37,124 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-24 20:05:37,198 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-24 20:05:37,198 - __main__ - INFO - ============================================================
2025-12-24 20:05:37,198 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-24 20:05:37,198 - __main__ - INFO - ============================================================
2025-12-24 20:05:37,198 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-24 20:05:37,198 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-24 20:05:37,198 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:06:22,892 - __main__ - INFO - API批次 [1-30] 完成
2025-12-24 20:06:22,893 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-24 20:06:22,893 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:07:19,186 - __main__ - INFO - API批次 [31-60] 完成
2025-12-24 20:07:19,187 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-24 20:07:19,187 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:07:40,603 - __main__ - INFO - 批次 [641-768] 本地推理完成
2025-12-24 20:07:40,603 - __main__ - INFO - 处理批次 [769-896/99842]
2025-12-24 20:07:40,604 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 20:07:40,604 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 20:07:51,979 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 20:07:51,979 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 20:07:52,685 - __main__ - INFO - API批次 [61-90] 完成
2025-12-24 20:07:52,686 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-24 20:07:52,686 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:08:03,010 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 20:08:03,010 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 20:08:28,344 - __main__ - INFO - API批次 [91-120] 完成
2025-12-24 20:08:28,345 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-24 20:08:28,345 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:09:12,942 - __main__ - INFO - API批次 [121-150] 完成
2025-12-24 20:09:12,942 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-24 20:09:12,942 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:09:56,428 - __main__ - INFO - API批次 [151-180] 完成
2025-12-24 20:09:56,428 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-24 20:09:56,428 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:10:27,659 - __main__ - INFO - API批次 [181-210] 完成
2025-12-24 20:10:27,660 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-24 20:10:27,660 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:11:13,715 - __main__ - INFO - API批次 [211-240] 完成
2025-12-24 20:11:13,716 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-24 20:11:13,716 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:11:54,842 - __main__ - INFO - API批次 [241-250] 完成
2025-12-24 20:11:54,842 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-24 20:11:54,842 - __main__ - INFO - 开始数据质量检查...
2025-12-24 20:11:54,842 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-24 20:11:54,842 - __main__ - INFO - ============================================================
2025-12-24 20:11:54,842 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-24 20:11:54,842 - __main__ - INFO - ============================================================
2025-12-24 20:11:54,842 - __main__ - INFO - 预检查数据完整性...
2025-12-24 20:11:54,843 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-24 20:11:54,843 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-24 20:11:54,843 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-24 20:11:54,870 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-24 20:11:54,894 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-24 20:11:54,917 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-24 20:11:54,938 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-24 20:11:54,959 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-24 20:11:54,975 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-24 20:11:54,975 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-24 20:11:56,250 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-24 20:11:56,281 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 20:11:57,343 - __main__ - INFO - ============================================================
2025-12-24 20:11:57,343 - __main__ - INFO - 数据集名称: bbh
2025-12-24 20:11:57,343 - __main__ - INFO - 数据集路径: dataset/bbh/disambiguation_qa.json
2025-12-24 20:11:57,343 - __main__ - INFO - ============================================================
2025-12-24 20:11:57,343 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-24 20:11:57,343 - __main__ - INFO - ============================================================
2025-12-24 20:11:57,344 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-24 20:11:57,344 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/disambiguation_qa.json
2025-12-24 20:11:57,344 - __main__ - INFO - ============================================================
2025-12-24 20:11:57,344 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-24 20:11:57,344 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-24 20:11:57,344 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-24 20:11:57,344 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 20:11:57,344 - __main__ - INFO - ============================================================
2025-12-24 20:11:57,344 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-24 20:11:57,344 - __main__ - INFO - ============================================================
2025-12-24 20:11:57,344 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 20:11:57,344 - __main__ - INFO - ============================================================
2025-12-24 20:11:57,345 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 20:11:57,347 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-24 20:11:57,347 - __main__ - INFO - ============================================================
2025-12-24 20:11:57,347 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 20:11:57,347 - __main__ - INFO - ============================================================
2025-12-24 20:11:57,347 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-24 20:11:57,347 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 20:11:57,347 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 20:12:01,789 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-24 20:12:01,789 - inference.local_inference - INFO - ============================================================
2025-12-24 20:12:01,789 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 20:12:01,789 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 20:12:01,789 - inference.local_inference - INFO - ============================================================
2025-12-24 20:13:00,462 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 20:13:10,941 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 20:13:10,942 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 20:18:09,261 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 20:18:09,261 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 20:22:16,436 - __main__ - INFO - 批次 [257-384] 本地推理完成
2025-12-24 20:22:16,437 - __main__ - INFO - 处理批次 [385-500/500]
2025-12-24 20:22:16,437 - __main__ - INFO -   → 生成Baseline答案 (116 条)...
2025-12-24 20:22:16,437 - __main__ - INFO - 批量生成Baseline答案: 116 条
2025-12-24 20:23:17,144 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 20:23:17,144 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 20:24:27,775 - __main__ - INFO - 批次 [769-896] 本地推理完成
2025-12-24 20:24:27,775 - __main__ - INFO - 处理批次 [897-1024/99842]
2025-12-24 20:24:27,776 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 20:24:27,776 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 20:24:50,260 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 20:24:50,261 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 20:26:28,993 - __main__ - INFO -   → 生成差异分析 (116 条)...
2025-12-24 20:26:28,993 - __main__ - INFO - 批量生成差异分析: 116 条
2025-12-24 20:29:23,049 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 20:29:23,050 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-24 20:29:23,050 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-24 20:29:23,050 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-24 20:29:33,376 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-24 20:29:33,376 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-24 20:35:20,447 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 20:35:20,447 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 20:39:06,747 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-24 20:39:06,747 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-24 20:41:33,673 - __main__ - INFO - 批次 [897-1024] 本地推理完成
2025-12-24 20:41:33,674 - __main__ - INFO - 处理批次 [1025-1152/99842]
2025-12-24 20:41:33,674 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 20:41:33,674 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 20:41:54,744 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 20:41:54,744 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 20:42:15,654 - __main__ - INFO -   → 生成Rejected原则 (116 条)...
2025-12-24 20:42:15,654 - __main__ - INFO - 批量生成原则（弱模型）: 116 条
2025-12-24 20:45:01,277 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-24 20:45:01,277 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-24 20:45:01,277 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-24 20:45:01,364 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-24 20:45:01,365 - __main__ - INFO - ============================================================
2025-12-24 20:45:01,365 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-24 20:45:01,365 - __main__ - INFO - ============================================================
2025-12-24 20:45:01,365 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-24 20:45:01,365 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-24 20:45:01,365 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:45:31,951 - __main__ - INFO - API批次 [1-30] 完成
2025-12-24 20:45:31,952 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-24 20:45:31,952 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:46:39,771 - __main__ - INFO - API批次 [31-60] 完成
2025-12-24 20:46:39,772 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-24 20:46:39,772 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:47:12,512 - __main__ - INFO - API批次 [61-90] 完成
2025-12-24 20:47:12,513 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-24 20:47:12,513 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:47:44,165 - __main__ - INFO - API批次 [91-120] 完成
2025-12-24 20:47:44,166 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-24 20:47:44,166 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:48:19,343 - __main__ - INFO - API批次 [121-150] 完成
2025-12-24 20:48:19,344 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-24 20:48:19,344 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:49:22,437 - __main__ - INFO - API批次 [151-180] 完成
2025-12-24 20:49:22,438 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-24 20:49:22,438 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:50:07,821 - __main__ - INFO - API批次 [181-210] 完成
2025-12-24 20:50:07,822 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-24 20:50:07,822 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:50:30,996 - __main__ - INFO - API批次 [211-240] 完成
2025-12-24 20:50:30,997 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-24 20:50:30,997 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:50:54,370 - __main__ - INFO - API批次 [241-250] 完成
2025-12-24 20:50:54,371 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-24 20:50:54,371 - __main__ - INFO - 开始数据质量检查...
2025-12-24 20:50:54,371 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-24 20:50:54,371 - __main__ - INFO - ============================================================
2025-12-24 20:50:54,371 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-24 20:50:54,371 - __main__ - INFO - ============================================================
2025-12-24 20:50:54,371 - __main__ - INFO - 预检查数据完整性...
2025-12-24 20:50:54,372 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-24 20:50:54,372 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-24 20:50:54,372 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-24 20:50:54,396 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-24 20:50:54,417 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-24 20:50:54,438 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-24 20:50:54,463 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-24 20:50:54,481 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-24 20:50:54,491 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-24 20:50:54,492 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-24 20:50:55,765 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-24 20:50:55,795 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 20:50:56,853 - __main__ - INFO - ============================================================
2025-12-24 20:50:56,853 - __main__ - INFO - 数据集名称: bbh
2025-12-24 20:50:56,853 - __main__ - INFO - 数据集路径: dataset/bbh/dyck_languages.json
2025-12-24 20:50:56,853 - __main__ - INFO - ============================================================
2025-12-24 20:50:56,854 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-24 20:50:56,854 - __main__ - INFO - ============================================================
2025-12-24 20:50:56,854 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-24 20:50:56,854 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/dyck_languages.json
2025-12-24 20:50:56,854 - __main__ - INFO - ============================================================
2025-12-24 20:50:56,854 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-24 20:50:56,854 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-24 20:50:56,854 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-24 20:50:56,854 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 20:50:56,854 - __main__ - INFO - ============================================================
2025-12-24 20:50:56,854 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-24 20:50:56,854 - __main__ - INFO - ============================================================
2025-12-24 20:50:56,854 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 20:50:56,854 - __main__ - INFO - ============================================================
2025-12-24 20:50:56,855 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 20:50:56,857 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-24 20:50:56,857 - __main__ - INFO - ============================================================
2025-12-24 20:50:56,857 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 20:50:56,857 - __main__ - INFO - ============================================================
2025-12-24 20:50:56,857 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-24 20:50:56,857 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 20:50:56,857 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 20:51:01,203 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-24 20:51:01,203 - inference.local_inference - INFO - ============================================================
2025-12-24 20:51:01,203 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 20:51:01,203 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 20:51:01,203 - inference.local_inference - INFO - ============================================================
2025-12-24 20:52:01,017 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 20:52:09,660 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 20:52:09,660 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 20:54:11,819 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 20:54:11,820 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 20:56:15,611 - __main__ - INFO - 批次 [385-500] 本地推理完成
2025-12-24 20:56:15,611 - __main__ - INFO - 阶段1完成: 共生成 500 条本地推理结果
2025-12-24 20:56:15,611 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-24 20:56:15,761 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-24 20:56:15,761 - __main__ - INFO - ============================================================
2025-12-24 20:56:15,761 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-24 20:56:15,761 - __main__ - INFO - ============================================================
2025-12-24 20:56:15,761 - __main__ - INFO - API分批处理: 每批 30 条，共 17 批
2025-12-24 20:56:15,761 - __main__ - INFO - API批次 [1-30/500] 开始处理...
2025-12-24 20:56:15,761 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:56:44,711 - __main__ - INFO - API批次 [1-30] 完成
2025-12-24 20:56:44,711 - __main__ - INFO - API批次 [31-60/500] 开始处理...
2025-12-24 20:56:44,712 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:57:15,746 - __main__ - INFO - API批次 [31-60] 完成
2025-12-24 20:57:15,746 - __main__ - INFO - API批次 [61-90/500] 开始处理...
2025-12-24 20:57:15,746 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:57:53,353 - __main__ - INFO - API批次 [61-90] 完成
2025-12-24 20:57:53,354 - __main__ - INFO - API批次 [91-120/500] 开始处理...
2025-12-24 20:57:53,354 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:58:29,571 - __main__ - INFO - 批次 [1025-1152] 本地推理完成
2025-12-24 20:58:29,572 - __main__ - INFO - 处理批次 [1153-1280/99842]
2025-12-24 20:58:29,573 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 20:58:29,573 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 20:58:42,649 - __main__ - INFO - API批次 [91-120] 完成
2025-12-24 20:58:42,650 - __main__ - INFO - API批次 [121-150/500] 开始处理...
2025-12-24 20:58:42,650 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 20:58:44,778 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 20:58:44,779 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 20:59:46,982 - __main__ - INFO - API批次 [121-150] 完成
2025-12-24 20:59:46,982 - __main__ - INFO - API批次 [151-180/500] 开始处理...
2025-12-24 20:59:46,982 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:00:16,540 - __main__ - INFO - API批次 [151-180] 完成
2025-12-24 21:00:16,541 - __main__ - INFO - API批次 [181-210/500] 开始处理...
2025-12-24 21:00:16,541 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:01:16,002 - __main__ - INFO - API批次 [181-210] 完成
2025-12-24 21:01:16,002 - __main__ - INFO - API批次 [211-240/500] 开始处理...
2025-12-24 21:01:16,002 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:02:17,918 - __main__ - INFO - API批次 [211-240] 完成
2025-12-24 21:02:17,919 - __main__ - INFO - API批次 [241-270/500] 开始处理...
2025-12-24 21:02:17,919 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:03:17,618 - __main__ - INFO - API批次 [241-270] 完成
2025-12-24 21:03:17,618 - __main__ - INFO - API批次 [271-300/500] 开始处理...
2025-12-24 21:03:17,618 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:04:15,991 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 21:04:15,991 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 21:07:07,983 - __main__ - WARNING - ⚠️  批次中有 1/30 个空响应
2025-12-24 21:07:07,984 - __main__ - INFO - API批次 [271-300] 完成
2025-12-24 21:07:07,984 - __main__ - INFO - API批次 [301-330/500] 开始处理...
2025-12-24 21:07:07,984 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:07:59,477 - __main__ - INFO - API批次 [301-330] 完成
2025-12-24 21:07:59,477 - __main__ - INFO - API批次 [331-360/500] 开始处理...
2025-12-24 21:07:59,478 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:08:19,923 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 21:08:19,924 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 21:10:42,791 - __main__ - INFO - API批次 [331-360] 完成
2025-12-24 21:10:42,792 - __main__ - INFO - API批次 [361-390/500] 开始处理...
2025-12-24 21:10:42,793 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:10:43,323 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 21:10:43,324 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-24 21:10:43,324 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-24 21:10:43,324 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-24 21:11:29,517 - __main__ - INFO - API批次 [361-390] 完成
2025-12-24 21:11:29,518 - __main__ - INFO - API批次 [391-420/500] 开始处理...
2025-12-24 21:11:29,518 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:12:05,068 - __main__ - INFO - API批次 [391-420] 完成
2025-12-24 21:12:05,069 - __main__ - INFO - API批次 [421-450/500] 开始处理...
2025-12-24 21:12:05,069 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:12:50,017 - __main__ - INFO - API批次 [421-450] 完成
2025-12-24 21:12:50,018 - __main__ - INFO - API批次 [451-480/500] 开始处理...
2025-12-24 21:12:50,018 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:12:51,540 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-24 21:12:51,540 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-24 21:13:57,261 - __main__ - INFO - API批次 [451-480] 完成
2025-12-24 21:13:57,261 - __main__ - INFO - API批次 [481-500/500] 开始处理...
2025-12-24 21:13:57,262 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:14:40,989 - __main__ - INFO - API批次 [481-500] 完成
2025-12-24 21:14:40,990 - __main__ - INFO - 阶段2完成: 共生成 500 条Chosen结果
2025-12-24 21:14:40,990 - __main__ - INFO - 开始数据质量检查...
2025-12-24 21:14:40,990 - __main__ - WARNING - ⚠️  发现 1 个空chosen值 (0.2%)
2025-12-24 21:14:40,990 - __main__ - WARNING -    空值索引（前10个）: [286]
2025-12-24 21:14:40,990 - __main__ - INFO - ✅ 空值率在可接受范围内 (0.2% < 5%)，将过滤空值后继续
2025-12-24 21:14:40,994 - __main__ - INFO - 过滤后剩余 499 条有效数据
2025-12-24 21:14:40,994 - __main__ - INFO - ============================================================
2025-12-24 21:14:40,994 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-24 21:14:40,994 - __main__ - INFO - ============================================================
2025-12-24 21:14:40,994 - __main__ - INFO - 预检查数据完整性...
2025-12-24 21:14:40,994 - __main__ - INFO - Chosen非空率: 499/499 (100.0%)
2025-12-24 21:14:40,994 - __main__ - INFO - Rejected非空率: 499/499 (100.0%)
2025-12-24 21:14:40,995 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-24 21:14:41,013 - __main__ - INFO - 已保存 50/500 条到JSONL
2025-12-24 21:14:41,032 - __main__ - INFO - 已保存 100/500 条到JSONL
2025-12-24 21:14:41,050 - __main__ - INFO - 已保存 150/500 条到JSONL
2025-12-24 21:14:41,069 - __main__ - INFO - 已保存 200/500 条到JSONL
2025-12-24 21:14:41,087 - __main__ - INFO - 已保存 250/500 条到JSONL
2025-12-24 21:14:41,106 - __main__ - INFO - 已保存 300/500 条到JSONL
2025-12-24 21:14:41,125 - __main__ - INFO - 已保存 350/500 条到JSONL
2025-12-24 21:14:41,145 - __main__ - INFO - 已保存 400/500 条到JSONL
2025-12-24 21:14:41,164 - __main__ - INFO - 已保存 450/500 条到JSONL
2025-12-24 21:14:41,208 - __main__ - INFO - DPO数据生成完成: output/dpo_math.jsonl
2025-12-24 21:14:41,208 - __main__ - INFO - 共保存 499 条数据到JSONL格式
2025-12-24 21:14:42,286 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-24 21:14:42,319 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 21:14:50,806 - __main__ - INFO - 批次 [1153-1280] 本地推理完成
2025-12-24 21:14:50,807 - __main__ - INFO - 处理批次 [1281-1408/99842]
2025-12-24 21:14:50,807 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 21:14:50,807 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 21:15:01,851 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 21:15:01,851 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 21:22:29,616 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-24 21:22:29,617 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-24 21:24:22,774 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 21:24:22,774 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 21:28:38,194 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-24 21:28:38,194 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-24 21:28:38,194 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-24 21:28:38,275 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-24 21:28:38,275 - __main__ - INFO - ============================================================
2025-12-24 21:28:38,275 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-24 21:28:38,275 - __main__ - INFO - ============================================================
2025-12-24 21:28:38,275 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-24 21:28:38,275 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-24 21:28:38,275 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:29:00,391 - __main__ - INFO - API批次 [1-30] 完成
2025-12-24 21:29:00,391 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-24 21:29:00,392 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:29:50,043 - __main__ - INFO - API批次 [31-60] 完成
2025-12-24 21:29:50,044 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-24 21:29:50,044 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:30:17,218 - __main__ - INFO - API批次 [61-90] 完成
2025-12-24 21:30:17,219 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-24 21:30:17,220 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:30:59,662 - __main__ - INFO - API批次 [91-120] 完成
2025-12-24 21:30:59,663 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-24 21:30:59,663 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:31:03,878 - __main__ - INFO - 批次 [1281-1408] 本地推理完成
2025-12-24 21:31:03,879 - __main__ - INFO - 处理批次 [1409-1536/99842]
2025-12-24 21:31:03,879 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 21:31:03,879 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 21:31:25,208 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 21:31:25,208 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 21:31:38,904 - __main__ - INFO - API批次 [121-150] 完成
2025-12-24 21:31:38,905 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-24 21:31:38,905 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:32:16,669 - __main__ - INFO - API批次 [151-180] 完成
2025-12-24 21:32:16,670 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-24 21:32:16,670 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:33:00,381 - __main__ - INFO - API批次 [181-210] 完成
2025-12-24 21:33:00,382 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-24 21:33:00,382 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:34:29,561 - __main__ - INFO - API批次 [211-240] 完成
2025-12-24 21:34:29,563 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-24 21:34:29,563 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 21:35:24,144 - __main__ - INFO - API批次 [241-250] 完成
2025-12-24 21:35:24,144 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-24 21:35:24,144 - __main__ - INFO - 开始数据质量检查...
2025-12-24 21:35:24,144 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-24 21:35:24,144 - __main__ - INFO - ============================================================
2025-12-24 21:35:24,144 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-24 21:35:24,144 - __main__ - INFO - ============================================================
2025-12-24 21:35:24,144 - __main__ - INFO - 预检查数据完整性...
2025-12-24 21:35:24,145 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-24 21:35:24,145 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-24 21:35:24,145 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-24 21:35:24,175 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-24 21:35:24,201 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-24 21:35:24,226 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-24 21:35:24,250 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-24 21:35:24,274 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-24 21:35:24,293 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-24 21:35:24,293 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-24 21:35:25,770 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-24 21:35:25,800 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 21:35:26,860 - __main__ - INFO - ============================================================
2025-12-24 21:35:26,860 - __main__ - INFO - 数据集名称: bbh
2025-12-24 21:35:26,860 - __main__ - INFO - 数据集路径: dataset/bbh/formal_fallacies.json
2025-12-24 21:35:26,860 - __main__ - INFO - ============================================================
2025-12-24 21:35:26,860 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-24 21:35:26,860 - __main__ - INFO - ============================================================
2025-12-24 21:35:26,860 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-24 21:35:26,860 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/formal_fallacies.json
2025-12-24 21:35:26,860 - __main__ - INFO - ============================================================
2025-12-24 21:35:26,861 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-24 21:35:26,861 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-24 21:35:26,861 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-24 21:35:26,861 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 21:35:26,861 - __main__ - INFO - ============================================================
2025-12-24 21:35:26,861 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-24 21:35:26,861 - __main__ - INFO - ============================================================
2025-12-24 21:35:26,861 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 21:35:26,861 - __main__ - INFO - ============================================================
2025-12-24 21:35:26,862 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 21:35:26,864 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-24 21:35:26,864 - __main__ - INFO - ============================================================
2025-12-24 21:35:26,864 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 21:35:26,865 - __main__ - INFO - ============================================================
2025-12-24 21:35:26,865 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-24 21:35:26,865 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 21:35:26,865 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 21:35:31,315 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-24 21:35:31,315 - inference.local_inference - INFO - ============================================================
2025-12-24 21:35:31,315 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 21:35:31,315 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 21:35:31,315 - inference.local_inference - INFO - ============================================================
2025-12-24 21:36:29,970 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 21:36:55,146 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 21:36:55,147 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 21:41:08,224 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 21:41:08,224 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 21:47:32,591 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 21:47:32,592 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 21:47:42,484 - __main__ - INFO - 批次 [1409-1536] 本地推理完成
2025-12-24 21:47:42,484 - __main__ - INFO - 处理批次 [1537-1664/99842]
2025-12-24 21:47:42,484 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 21:47:42,484 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 21:47:55,756 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 21:47:55,756 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 21:53:31,914 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 21:53:31,914 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-24 21:53:31,914 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-24 21:53:31,914 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-24 21:53:58,261 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-24 21:53:58,262 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-24 21:57:35,419 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 21:57:35,419 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 22:04:00,816 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-24 22:04:00,816 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-24 22:04:10,588 - __main__ - INFO - 批次 [1537-1664] 本地推理完成
2025-12-24 22:04:10,588 - __main__ - INFO - 处理批次 [1665-1792/99842]
2025-12-24 22:04:10,588 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 22:04:10,588 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 22:05:59,914 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 22:05:59,915 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 22:09:29,242 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-24 22:09:29,242 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-24 22:09:29,242 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-24 22:09:29,336 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-24 22:09:29,336 - __main__ - INFO - ============================================================
2025-12-24 22:09:29,336 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-24 22:09:29,336 - __main__ - INFO - ============================================================
2025-12-24 22:09:29,336 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-24 22:09:29,336 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-24 22:09:29,336 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:09:56,277 - __main__ - INFO - API批次 [1-30] 完成
2025-12-24 22:09:56,278 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-24 22:09:56,278 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:10:42,400 - __main__ - INFO - API批次 [31-60] 完成
2025-12-24 22:10:42,400 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-24 22:10:42,400 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:11:27,020 - __main__ - INFO - API批次 [61-90] 完成
2025-12-24 22:11:27,021 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-24 22:11:27,021 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:11:59,103 - __main__ - INFO - API批次 [91-120] 完成
2025-12-24 22:11:59,104 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-24 22:11:59,104 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:12:41,892 - __main__ - INFO - API批次 [121-150] 完成
2025-12-24 22:12:41,892 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-24 22:12:41,893 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:13:13,269 - __main__ - INFO - API批次 [151-180] 完成
2025-12-24 22:13:13,269 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-24 22:13:13,269 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:13:42,565 - __main__ - INFO - API批次 [181-210] 完成
2025-12-24 22:13:42,566 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-24 22:13:42,566 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:14:15,300 - __main__ - INFO - API批次 [211-240] 完成
2025-12-24 22:14:15,301 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-24 22:14:15,301 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:14:41,838 - __main__ - INFO - API批次 [241-250] 完成
2025-12-24 22:14:41,838 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-24 22:14:41,838 - __main__ - INFO - 开始数据质量检查...
2025-12-24 22:14:41,839 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-24 22:14:41,839 - __main__ - INFO - ============================================================
2025-12-24 22:14:41,839 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-24 22:14:41,839 - __main__ - INFO - ============================================================
2025-12-24 22:14:41,839 - __main__ - INFO - 预检查数据完整性...
2025-12-24 22:14:41,840 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-24 22:14:41,840 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-24 22:14:41,840 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-24 22:14:41,865 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-24 22:14:41,886 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-24 22:14:41,908 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-24 22:14:41,928 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-24 22:14:41,948 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-24 22:14:41,967 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-24 22:14:41,968 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-24 22:14:43,151 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-24 22:14:43,180 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 22:14:44,264 - __main__ - INFO - ============================================================
2025-12-24 22:14:44,264 - __main__ - INFO - 数据集名称: bbh
2025-12-24 22:14:44,264 - __main__ - INFO - 数据集路径: dataset/bbh/geometric_shapes.json
2025-12-24 22:14:44,264 - __main__ - INFO - ============================================================
2025-12-24 22:14:44,264 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-24 22:14:44,264 - __main__ - INFO - ============================================================
2025-12-24 22:14:44,264 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-24 22:14:44,264 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/geometric_shapes.json
2025-12-24 22:14:44,264 - __main__ - INFO - ============================================================
2025-12-24 22:14:44,264 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-24 22:14:44,264 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-24 22:14:44,265 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-24 22:14:44,265 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 22:14:44,265 - __main__ - INFO - ============================================================
2025-12-24 22:14:44,265 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-24 22:14:44,265 - __main__ - INFO - ============================================================
2025-12-24 22:14:44,265 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 22:14:44,265 - __main__ - INFO - ============================================================
2025-12-24 22:14:44,265 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 22:14:44,268 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-24 22:14:44,268 - __main__ - INFO - ============================================================
2025-12-24 22:14:44,268 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 22:14:44,268 - __main__ - INFO - ============================================================
2025-12-24 22:14:44,268 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-24 22:14:44,268 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 22:14:44,268 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 22:14:48,858 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-24 22:14:48,858 - inference.local_inference - INFO - ============================================================
2025-12-24 22:14:48,858 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 22:14:48,858 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 22:14:48,858 - inference.local_inference - INFO - ============================================================
2025-12-24 22:15:47,559 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 22:15:57,172 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 22:15:57,173 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 22:16:05,461 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 22:16:05,462 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 22:22:30,636 - __main__ - INFO - 批次 [1665-1792] 本地推理完成
2025-12-24 22:22:30,637 - __main__ - INFO - 处理批次 [1793-1920/99842]
2025-12-24 22:22:30,637 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 22:22:30,637 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 22:22:47,619 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 22:22:47,619 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 22:25:40,856 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 22:25:40,856 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 22:31:39,747 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 22:31:39,748 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-24 22:31:39,748 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-24 22:31:39,748 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-24 22:31:58,361 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-24 22:31:58,361 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-24 22:32:06,083 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 22:32:06,083 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 22:38:51,959 - __main__ - INFO - 批次 [1793-1920] 本地推理完成
2025-12-24 22:38:51,960 - __main__ - INFO - 处理批次 [1921-2048/99842]
2025-12-24 22:38:51,960 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 22:38:51,960 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 22:39:04,201 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 22:39:04,201 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 22:40:59,702 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-24 22:40:59,702 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-24 22:47:05,048 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-24 22:47:05,049 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-24 22:47:05,049 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-24 22:47:05,153 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-24 22:47:05,154 - __main__ - INFO - ============================================================
2025-12-24 22:47:05,154 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-24 22:47:05,154 - __main__ - INFO - ============================================================
2025-12-24 22:47:05,154 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-24 22:47:05,154 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-24 22:47:05,154 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:47:58,839 - __main__ - INFO - API批次 [1-30] 完成
2025-12-24 22:47:58,840 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-24 22:47:58,840 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:48:44,711 - __main__ - INFO - API批次 [31-60] 完成
2025-12-24 22:48:44,712 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-24 22:48:44,712 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:48:49,889 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 22:48:49,889 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 22:49:27,926 - __main__ - INFO - API批次 [61-90] 完成
2025-12-24 22:49:27,927 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-24 22:49:27,927 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:49:55,558 - __main__ - INFO - API批次 [91-120] 完成
2025-12-24 22:49:55,559 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-24 22:49:55,559 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:50:24,420 - __main__ - INFO - API批次 [121-150] 完成
2025-12-24 22:50:24,421 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-24 22:50:24,421 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:51:47,941 - __main__ - INFO - API批次 [151-180] 完成
2025-12-24 22:51:47,941 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-24 22:51:47,941 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:52:25,852 - __main__ - INFO - API批次 [181-210] 完成
2025-12-24 22:52:25,853 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-24 22:52:25,853 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:53:38,772 - __main__ - INFO - API批次 [211-240] 完成
2025-12-24 22:53:38,772 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-24 22:53:38,772 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 22:54:21,246 - __main__ - INFO - API批次 [241-250] 完成
2025-12-24 22:54:21,246 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-24 22:54:21,246 - __main__ - INFO - 开始数据质量检查...
2025-12-24 22:54:21,247 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-24 22:54:21,247 - __main__ - INFO - ============================================================
2025-12-24 22:54:21,247 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-24 22:54:21,247 - __main__ - INFO - ============================================================
2025-12-24 22:54:21,247 - __main__ - INFO - 预检查数据完整性...
2025-12-24 22:54:21,248 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-24 22:54:21,248 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-24 22:54:21,248 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-24 22:54:21,269 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-24 22:54:21,288 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-24 22:54:21,317 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-24 22:54:21,336 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-24 22:54:21,353 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-24 22:54:21,371 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-24 22:54:21,371 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-24 22:54:22,651 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-24 22:54:22,686 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 22:54:23,831 - __main__ - INFO - ============================================================
2025-12-24 22:54:23,831 - __main__ - INFO - 数据集名称: bbh
2025-12-24 22:54:23,831 - __main__ - INFO - 数据集路径: dataset/bbh/hyperbaton.json
2025-12-24 22:54:23,831 - __main__ - INFO - ============================================================
2025-12-24 22:54:23,831 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-24 22:54:23,831 - __main__ - INFO - ============================================================
2025-12-24 22:54:23,831 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-24 22:54:23,831 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/hyperbaton.json
2025-12-24 22:54:23,831 - __main__ - INFO - ============================================================
2025-12-24 22:54:23,832 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-24 22:54:23,832 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-24 22:54:23,832 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-24 22:54:23,832 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 22:54:23,832 - __main__ - INFO - ============================================================
2025-12-24 22:54:23,832 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-24 22:54:23,832 - __main__ - INFO - ============================================================
2025-12-24 22:54:23,832 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 22:54:23,832 - __main__ - INFO - ============================================================
2025-12-24 22:54:23,833 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 22:54:23,835 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-24 22:54:23,835 - __main__ - INFO - ============================================================
2025-12-24 22:54:23,835 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 22:54:23,835 - __main__ - INFO - ============================================================
2025-12-24 22:54:23,835 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-24 22:54:23,835 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 22:54:23,835 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 22:54:28,389 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-24 22:54:28,389 - inference.local_inference - INFO - ============================================================
2025-12-24 22:54:28,389 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 22:54:28,389 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 22:54:28,389 - inference.local_inference - INFO - ============================================================
2025-12-24 22:55:13,915 - __main__ - INFO - 批次 [1921-2048] 本地推理完成
2025-12-24 22:55:13,915 - __main__ - INFO - 处理批次 [2049-2176/99842]
2025-12-24 22:55:13,916 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 22:55:13,916 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 22:55:27,059 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 22:55:27,060 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 22:55:27,203 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 22:55:39,182 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 22:55:39,183 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 23:05:03,265 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 23:05:03,266 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 23:05:25,853 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 23:05:25,854 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 23:11:23,646 - __main__ - INFO - 批次 [2049-2176] 本地推理完成
2025-12-24 23:11:23,646 - __main__ - INFO - 处理批次 [2177-2304/99842]
2025-12-24 23:11:23,647 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 23:11:23,647 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 23:11:39,703 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 23:11:39,703 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 23:11:46,241 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 23:11:46,241 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-24 23:11:46,242 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-24 23:11:46,242 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-24 23:11:57,203 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-24 23:11:57,203 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-24 23:21:31,264 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-24 23:21:31,264 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-24 23:21:33,558 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 23:21:33,559 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 23:27:38,925 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-24 23:27:38,925 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-24 23:27:38,925 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-24 23:27:39,011 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-24 23:27:39,011 - __main__ - INFO - ============================================================
2025-12-24 23:27:39,011 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-24 23:27:39,011 - __main__ - INFO - ============================================================
2025-12-24 23:27:39,011 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-24 23:27:39,011 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-24 23:27:39,011 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 23:28:00,042 - __main__ - INFO - 批次 [2177-2304] 本地推理完成
2025-12-24 23:28:00,043 - __main__ - INFO - 处理批次 [2305-2432/99842]
2025-12-24 23:28:00,043 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 23:28:00,043 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 23:28:12,854 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 23:28:12,854 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 23:28:16,224 - __main__ - INFO - API批次 [1-30] 完成
2025-12-24 23:28:16,225 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-24 23:28:16,225 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 23:29:06,258 - __main__ - INFO - API批次 [31-60] 完成
2025-12-24 23:29:06,258 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-24 23:29:06,258 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 23:29:45,268 - __main__ - INFO - API批次 [61-90] 完成
2025-12-24 23:29:45,269 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-24 23:29:45,269 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 23:30:11,748 - __main__ - INFO - API批次 [91-120] 完成
2025-12-24 23:30:11,748 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-24 23:30:11,749 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 23:30:50,037 - __main__ - INFO - API批次 [121-150] 完成
2025-12-24 23:30:50,038 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-24 23:30:50,038 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 23:31:26,160 - __main__ - INFO - API批次 [151-180] 完成
2025-12-24 23:31:26,160 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-24 23:31:26,160 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 23:32:12,428 - __main__ - INFO - API批次 [181-210] 完成
2025-12-24 23:32:12,429 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-24 23:32:12,429 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 23:32:39,019 - __main__ - INFO - API批次 [211-240] 完成
2025-12-24 23:32:39,019 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-24 23:32:39,019 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-24 23:33:11,622 - __main__ - INFO - API批次 [241-250] 完成
2025-12-24 23:33:11,622 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-24 23:33:11,623 - __main__ - INFO - 开始数据质量检查...
2025-12-24 23:33:11,623 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-24 23:33:11,623 - __main__ - INFO - ============================================================
2025-12-24 23:33:11,623 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-24 23:33:11,624 - __main__ - INFO - ============================================================
2025-12-24 23:33:11,624 - __main__ - INFO - 预检查数据完整性...
2025-12-24 23:33:11,625 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-24 23:33:11,625 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-24 23:33:11,625 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-24 23:33:11,648 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-24 23:33:11,667 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-24 23:33:11,687 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-24 23:33:11,707 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-24 23:33:11,727 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-24 23:33:11,746 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-24 23:33:11,746 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-24 23:33:12,926 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-24 23:33:12,956 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-24 23:33:14,047 - __main__ - INFO - ============================================================
2025-12-24 23:33:14,047 - __main__ - INFO - 数据集名称: bbh
2025-12-24 23:33:14,047 - __main__ - INFO - 数据集路径: dataset/bbh/logical_deduction_five_objects.json
2025-12-24 23:33:14,047 - __main__ - INFO - ============================================================
2025-12-24 23:33:14,047 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-24 23:33:14,047 - __main__ - INFO - ============================================================
2025-12-24 23:33:14,047 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-24 23:33:14,047 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/logical_deduction_five_objects.json
2025-12-24 23:33:14,047 - __main__ - INFO - ============================================================
2025-12-24 23:33:14,047 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-24 23:33:14,048 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-24 23:33:14,048 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-24 23:33:14,048 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-24 23:33:14,048 - __main__ - INFO - ============================================================
2025-12-24 23:33:14,048 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-24 23:33:14,048 - __main__ - INFO - ============================================================
2025-12-24 23:33:14,048 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-24 23:33:14,048 - __main__ - INFO - ============================================================
2025-12-24 23:33:14,048 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-24 23:33:14,051 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-24 23:33:14,051 - __main__ - INFO - ============================================================
2025-12-24 23:33:14,051 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-24 23:33:14,051 - __main__ - INFO - ============================================================
2025-12-24 23:33:14,051 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-24 23:33:14,051 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 23:33:14,051 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 23:33:18,693 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-24 23:33:18,694 - inference.local_inference - INFO - ============================================================
2025-12-24 23:33:18,694 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-24 23:33:18,694 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-24 23:33:18,694 - inference.local_inference - INFO - ============================================================
2025-12-24 23:34:18,009 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-24 23:34:35,659 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 23:34:35,660 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 23:37:47,025 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 23:37:47,025 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 23:44:21,771 - __main__ - INFO - 批次 [2305-2432] 本地推理完成
2025-12-24 23:44:21,772 - __main__ - INFO - 处理批次 [2433-2560/99842]
2025-12-24 23:44:21,772 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-24 23:44:21,772 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-24 23:44:22,595 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 23:44:22,596 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-24 23:44:35,871 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-24 23:44:35,872 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-24 23:50:36,886 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-24 23:50:36,887 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-24 23:50:36,887 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-24 23:50:36,887 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-24 23:50:52,878 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-24 23:50:52,878 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-24 23:54:32,476 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-24 23:54:32,476 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 00:00:23,554 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 00:00:23,554 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 00:01:03,325 - __main__ - INFO - 批次 [2433-2560] 本地推理完成
2025-12-25 00:01:03,325 - __main__ - INFO - 处理批次 [2561-2688/99842]
2025-12-25 00:01:03,325 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 00:01:03,325 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 00:01:19,498 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 00:01:19,498 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 00:06:23,848 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 00:06:23,849 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 00:06:23,849 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 00:06:23,936 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 00:06:23,937 - __main__ - INFO - ============================================================
2025-12-25 00:06:23,937 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 00:06:23,937 - __main__ - INFO - ============================================================
2025-12-25 00:06:23,937 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 00:06:23,937 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 00:06:23,937 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:06:57,017 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 00:06:57,019 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 00:06:57,019 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:07:24,613 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 00:07:24,613 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 00:07:24,613 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:07:53,803 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 00:07:53,804 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 00:07:53,804 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:08:37,210 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 00:08:37,211 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 00:08:37,211 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:09:48,735 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 00:09:48,735 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 00:09:48,736 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:10:34,062 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 00:10:34,063 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 00:10:34,063 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:10:59,735 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 00:10:59,736 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 00:11:12,886 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 00:11:12,887 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 00:11:12,887 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:12:25,766 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 00:12:25,767 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 00:12:25,767 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:12:48,842 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 00:12:48,842 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 00:12:48,842 - __main__ - INFO - 开始数据质量检查...
2025-12-25 00:12:48,843 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 00:12:48,843 - __main__ - INFO - ============================================================
2025-12-25 00:12:48,843 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 00:12:48,843 - __main__ - INFO - ============================================================
2025-12-25 00:12:48,843 - __main__ - INFO - 预检查数据完整性...
2025-12-25 00:12:48,844 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 00:12:48,844 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 00:12:48,844 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 00:12:48,868 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 00:12:48,887 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 00:12:48,906 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 00:12:48,926 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 00:12:48,945 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 00:12:48,963 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 00:12:48,963 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 00:12:50,139 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 00:12:50,169 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 00:12:51,201 - __main__ - INFO - ============================================================
2025-12-25 00:12:51,201 - __main__ - INFO - 数据集名称: bbh
2025-12-25 00:12:51,201 - __main__ - INFO - 数据集路径: dataset/bbh/logical_deduction_seven_objects.json
2025-12-25 00:12:51,201 - __main__ - INFO - ============================================================
2025-12-25 00:12:51,201 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 00:12:51,201 - __main__ - INFO - ============================================================
2025-12-25 00:12:51,201 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 00:12:51,201 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/logical_deduction_seven_objects.json
2025-12-25 00:12:51,201 - __main__ - INFO - ============================================================
2025-12-25 00:12:51,202 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 00:12:51,202 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 00:12:51,202 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 00:12:51,202 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 00:12:51,202 - __main__ - INFO - ============================================================
2025-12-25 00:12:51,202 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 00:12:51,202 - __main__ - INFO - ============================================================
2025-12-25 00:12:51,202 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 00:12:51,202 - __main__ - INFO - ============================================================
2025-12-25 00:12:51,202 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 00:12:51,205 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 00:12:51,205 - __main__ - INFO - ============================================================
2025-12-25 00:12:51,205 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 00:12:51,205 - __main__ - INFO - ============================================================
2025-12-25 00:12:51,205 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 00:12:51,205 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 00:12:51,205 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 00:12:55,544 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 00:12:55,544 - inference.local_inference - INFO - ============================================================
2025-12-25 00:12:55,544 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 00:12:55,544 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 00:12:55,544 - inference.local_inference - INFO - ============================================================
2025-12-25 00:13:54,020 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 00:14:18,817 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 00:14:18,818 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 00:17:22,484 - __main__ - INFO - 批次 [2561-2688] 本地推理完成
2025-12-25 00:17:22,485 - __main__ - INFO - 处理批次 [2689-2816/99842]
2025-12-25 00:17:22,485 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 00:17:22,485 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 00:17:33,661 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 00:17:33,661 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 00:24:36,100 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 00:24:36,101 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 00:27:09,496 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 00:27:09,496 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 00:30:48,862 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 00:30:48,863 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 00:30:48,863 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 00:30:48,863 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 00:31:11,537 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 00:31:11,537 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 00:33:45,409 - __main__ - INFO - 批次 [2689-2816] 本地推理完成
2025-12-25 00:33:45,409 - __main__ - INFO - 处理批次 [2817-2944/99842]
2025-12-25 00:33:45,410 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 00:33:45,410 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 00:33:55,211 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 00:33:55,212 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 00:40:28,977 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 00:40:28,977 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 00:43:50,451 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 00:43:50,452 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 00:46:44,112 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 00:46:44,112 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 00:46:44,112 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 00:46:44,200 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 00:46:44,201 - __main__ - INFO - ============================================================
2025-12-25 00:46:44,201 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 00:46:44,201 - __main__ - INFO - ============================================================
2025-12-25 00:46:44,201 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 00:46:44,201 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 00:46:44,201 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:47:14,872 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 00:47:14,873 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 00:47:14,873 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:47:40,049 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 00:47:40,049 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 00:47:40,050 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:48:08,032 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 00:48:08,033 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 00:48:08,033 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:48:46,352 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 00:48:46,353 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 00:48:46,353 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:49:32,589 - __main__ - INFO - 批次 [2817-2944] 本地推理完成
2025-12-25 00:49:32,589 - __main__ - INFO - 处理批次 [2945-3072/99842]
2025-12-25 00:49:32,590 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 00:49:32,590 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 00:49:42,220 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 00:49:42,221 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 00:49:57,496 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 00:49:57,497 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 00:49:57,497 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:51:34,269 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 00:51:34,270 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 00:51:34,270 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:52:04,336 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 00:52:04,336 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 00:52:04,336 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:52:38,164 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 00:52:38,165 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 00:52:38,165 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 00:52:55,915 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 00:52:55,915 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 00:52:55,915 - __main__ - INFO - 开始数据质量检查...
2025-12-25 00:52:55,915 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 00:52:55,915 - __main__ - INFO - ============================================================
2025-12-25 00:52:55,915 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 00:52:55,916 - __main__ - INFO - ============================================================
2025-12-25 00:52:55,916 - __main__ - INFO - 预检查数据完整性...
2025-12-25 00:52:55,916 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 00:52:55,916 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 00:52:55,916 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 00:52:55,942 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 00:52:55,963 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 00:52:55,983 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 00:52:56,005 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 00:52:56,026 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 00:52:56,044 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 00:52:56,044 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 00:52:57,322 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 00:52:57,361 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 00:52:58,748 - __main__ - INFO - ============================================================
2025-12-25 00:52:58,748 - __main__ - INFO - 数据集名称: bbh
2025-12-25 00:52:58,748 - __main__ - INFO - 数据集路径: dataset/bbh/logical_deduction_three_objects.json
2025-12-25 00:52:58,748 - __main__ - INFO - ============================================================
2025-12-25 00:52:58,748 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 00:52:58,748 - __main__ - INFO - ============================================================
2025-12-25 00:52:58,748 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 00:52:58,748 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/logical_deduction_three_objects.json
2025-12-25 00:52:58,748 - __main__ - INFO - ============================================================
2025-12-25 00:52:58,749 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 00:52:58,749 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 00:52:58,749 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 00:52:58,749 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 00:52:58,749 - __main__ - INFO - ============================================================
2025-12-25 00:52:58,749 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 00:52:58,749 - __main__ - INFO - ============================================================
2025-12-25 00:52:58,749 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 00:52:58,749 - __main__ - INFO - ============================================================
2025-12-25 00:52:58,750 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 00:52:58,752 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 00:52:58,752 - __main__ - INFO - ============================================================
2025-12-25 00:52:58,752 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 00:52:58,752 - __main__ - INFO - ============================================================
2025-12-25 00:52:58,752 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 00:52:58,752 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 00:52:58,752 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 00:53:04,048 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 00:53:04,049 - inference.local_inference - INFO - ============================================================
2025-12-25 00:53:04,049 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 00:53:04,049 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 00:53:04,049 - inference.local_inference - INFO - ============================================================
2025-12-25 00:54:05,105 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 00:54:14,112 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 00:54:14,112 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 00:59:24,781 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 00:59:24,781 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 01:04:13,042 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 01:04:13,043 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 01:05:25,333 - __main__ - INFO - 批次 [2945-3072] 本地推理完成
2025-12-25 01:05:25,334 - __main__ - INFO - 处理批次 [3073-3200/99842]
2025-12-25 01:05:25,334 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 01:05:25,334 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 01:05:36,001 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 01:05:36,001 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 01:09:57,547 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 01:09:57,547 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 01:09:57,548 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 01:09:57,548 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 01:10:06,879 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 01:10:06,879 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 01:15:25,773 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 01:15:25,773 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 01:19:33,021 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 01:19:33,022 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 01:20:51,523 - __main__ - INFO - 批次 [3073-3200] 本地推理完成
2025-12-25 01:20:51,523 - __main__ - INFO - 处理批次 [3201-3328/99842]
2025-12-25 01:20:51,524 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 01:20:51,524 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 01:21:00,703 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 01:21:00,703 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 01:25:31,639 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 01:25:31,639 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 01:25:31,639 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 01:25:31,723 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 01:25:31,723 - __main__ - INFO - ============================================================
2025-12-25 01:25:31,723 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 01:25:31,723 - __main__ - INFO - ============================================================
2025-12-25 01:25:31,723 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 01:25:31,723 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 01:25:31,723 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 01:26:04,448 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 01:26:04,449 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 01:26:04,449 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 01:26:36,941 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 01:26:36,941 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 01:26:36,941 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 01:27:32,733 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 01:27:32,733 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 01:27:32,733 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 01:28:06,669 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 01:28:06,669 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 01:28:06,669 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 01:29:20,907 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 01:29:20,908 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 01:29:20,908 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 01:29:54,310 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 01:29:54,311 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 01:29:54,311 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 01:30:41,214 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 01:30:41,215 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 01:30:41,215 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 01:31:06,785 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 01:31:06,785 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 01:31:28,278 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 01:31:28,279 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 01:31:28,279 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 01:32:08,350 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 01:32:08,350 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 01:32:08,350 - __main__ - INFO - 开始数据质量检查...
2025-12-25 01:32:08,350 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 01:32:08,350 - __main__ - INFO - ============================================================
2025-12-25 01:32:08,350 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 01:32:08,351 - __main__ - INFO - ============================================================
2025-12-25 01:32:08,351 - __main__ - INFO - 预检查数据完整性...
2025-12-25 01:32:08,351 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 01:32:08,351 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 01:32:08,351 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 01:32:08,375 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 01:32:08,397 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 01:32:08,417 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 01:32:08,436 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 01:32:08,454 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 01:32:08,473 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 01:32:08,473 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 01:32:09,959 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 01:32:09,988 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 01:32:11,056 - __main__ - INFO - ============================================================
2025-12-25 01:32:11,056 - __main__ - INFO - 数据集名称: bbh
2025-12-25 01:32:11,056 - __main__ - INFO - 数据集路径: dataset/bbh/movie_recommendation.json
2025-12-25 01:32:11,056 - __main__ - INFO - ============================================================
2025-12-25 01:32:11,056 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 01:32:11,056 - __main__ - INFO - ============================================================
2025-12-25 01:32:11,056 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 01:32:11,056 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/movie_recommendation.json
2025-12-25 01:32:11,056 - __main__ - INFO - ============================================================
2025-12-25 01:32:11,056 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 01:32:11,057 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 01:32:11,057 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 01:32:11,057 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 01:32:11,057 - __main__ - INFO - ============================================================
2025-12-25 01:32:11,057 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 01:32:11,057 - __main__ - INFO - ============================================================
2025-12-25 01:32:11,057 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 01:32:11,057 - __main__ - INFO - ============================================================
2025-12-25 01:32:11,057 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 01:32:11,060 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 01:32:11,060 - __main__ - INFO - ============================================================
2025-12-25 01:32:11,060 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 01:32:11,060 - __main__ - INFO - ============================================================
2025-12-25 01:32:11,060 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 01:32:11,060 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 01:32:11,060 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 01:32:15,443 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 01:32:15,444 - inference.local_inference - INFO - ============================================================
2025-12-25 01:32:15,444 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 01:32:15,444 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 01:32:15,444 - inference.local_inference - INFO - ============================================================
2025-12-25 01:33:13,025 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 01:33:28,699 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 01:33:28,700 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 01:36:57,530 - __main__ - INFO - 批次 [3201-3328] 本地推理完成
2025-12-25 01:36:57,531 - __main__ - INFO - 处理批次 [3329-3456/99842]
2025-12-25 01:36:57,531 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 01:36:57,531 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 01:37:07,484 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 01:37:07,484 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 01:43:34,478 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 01:43:34,479 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 01:46:57,102 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 01:46:57,102 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 01:50:19,837 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 01:50:19,837 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 01:50:19,838 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 01:50:19,838 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 01:50:33,642 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 01:50:33,642 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 01:52:51,920 - __main__ - INFO - 批次 [3329-3456] 本地推理完成
2025-12-25 01:52:51,920 - __main__ - INFO - 处理批次 [3457-3584/99842]
2025-12-25 01:52:51,921 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 01:52:51,921 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 01:53:02,213 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 01:53:02,214 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 02:00:13,492 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 02:00:13,492 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 02:03:02,502 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 02:03:02,503 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 02:06:25,226 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 02:06:25,227 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 02:06:25,227 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 02:06:25,318 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 02:06:25,318 - __main__ - INFO - ============================================================
2025-12-25 02:06:25,318 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 02:06:25,318 - __main__ - INFO - ============================================================
2025-12-25 02:06:25,318 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 02:06:25,318 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 02:06:25,318 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:07:04,455 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 02:07:04,456 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 02:07:04,456 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:07:27,982 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 02:07:27,983 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 02:07:27,983 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:08:11,127 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 02:08:11,128 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 02:08:11,128 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:08:39,130 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 02:08:39,131 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 02:08:39,131 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:08:49,815 - __main__ - INFO - 批次 [3457-3584] 本地推理完成
2025-12-25 02:08:49,816 - __main__ - INFO - 处理批次 [3585-3712/99842]
2025-12-25 02:08:49,816 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 02:08:49,816 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 02:08:59,662 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 02:08:59,662 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 02:09:10,200 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 02:09:10,200 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 02:09:10,201 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:09:36,351 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 02:09:36,352 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 02:09:36,352 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:09:58,807 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 02:09:58,808 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 02:09:58,808 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:10:26,703 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 02:10:26,704 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 02:10:26,704 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:11:40,424 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 02:11:40,425 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 02:11:40,425 - __main__ - INFO - 开始数据质量检查...
2025-12-25 02:11:40,425 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 02:11:40,425 - __main__ - INFO - ============================================================
2025-12-25 02:11:40,426 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 02:11:40,426 - __main__ - INFO - ============================================================
2025-12-25 02:11:40,426 - __main__ - INFO - 预检查数据完整性...
2025-12-25 02:11:40,427 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 02:11:40,427 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 02:11:40,427 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 02:11:40,452 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 02:11:40,473 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 02:11:40,493 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 02:11:40,511 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 02:11:40,532 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 02:11:40,550 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 02:11:40,550 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 02:11:41,528 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 02:11:41,557 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 02:11:42,722 - __main__ - INFO - ============================================================
2025-12-25 02:11:42,722 - __main__ - INFO - 数据集名称: bbh
2025-12-25 02:11:42,722 - __main__ - INFO - 数据集路径: dataset/bbh/multistep_arithmetic_two.json
2025-12-25 02:11:42,723 - __main__ - INFO - ============================================================
2025-12-25 02:11:42,723 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 02:11:42,723 - __main__ - INFO - ============================================================
2025-12-25 02:11:42,723 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 02:11:42,723 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/multistep_arithmetic_two.json
2025-12-25 02:11:42,723 - __main__ - INFO - ============================================================
2025-12-25 02:11:42,723 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 02:11:42,723 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 02:11:42,723 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 02:11:42,723 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 02:11:42,723 - __main__ - INFO - ============================================================
2025-12-25 02:11:42,723 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 02:11:42,723 - __main__ - INFO - ============================================================
2025-12-25 02:11:42,723 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 02:11:42,723 - __main__ - INFO - ============================================================
2025-12-25 02:11:42,724 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 02:11:42,726 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 02:11:42,726 - __main__ - INFO - ============================================================
2025-12-25 02:11:42,726 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 02:11:42,726 - __main__ - INFO - ============================================================
2025-12-25 02:11:42,726 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 02:11:42,726 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 02:11:42,726 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 02:11:47,101 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 02:11:47,102 - inference.local_inference - INFO - ============================================================
2025-12-25 02:11:47,102 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 02:11:47,102 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 02:11:47,102 - inference.local_inference - INFO - ============================================================
2025-12-25 02:12:46,004 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 02:12:59,725 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 02:12:59,726 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 02:18:39,222 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 02:18:39,222 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 02:21:30,661 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 02:21:30,662 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 02:24:26,300 - __main__ - INFO - 批次 [3585-3712] 本地推理完成
2025-12-25 02:24:26,301 - __main__ - INFO - 处理批次 [3713-3840/99842]
2025-12-25 02:24:26,301 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 02:24:26,301 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 02:24:35,447 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 02:24:35,447 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 02:28:24,762 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 02:28:24,763 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 02:28:24,763 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 02:28:24,763 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 02:28:37,341 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 02:28:37,342 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 02:34:29,122 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 02:34:29,123 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 02:36:53,781 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 02:36:53,782 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 02:40:18,751 - __main__ - INFO - 批次 [3713-3840] 本地推理完成
2025-12-25 02:40:18,751 - __main__ - INFO - 处理批次 [3841-3968/99842]
2025-12-25 02:40:18,752 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 02:40:18,752 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 02:40:28,466 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 02:40:28,466 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 02:43:30,246 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 02:43:30,247 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 02:43:30,247 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 02:43:30,333 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 02:43:30,333 - __main__ - INFO - ============================================================
2025-12-25 02:43:30,333 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 02:43:30,333 - __main__ - INFO - ============================================================
2025-12-25 02:43:30,333 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 02:43:30,333 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 02:43:30,333 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:44:20,595 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 02:44:20,595 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 02:44:20,595 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:45:18,763 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 02:45:18,763 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 02:45:18,763 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:45:59,157 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 02:45:59,158 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 02:45:59,158 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:46:42,556 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 02:46:42,556 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 02:46:42,556 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:47:24,737 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 02:47:24,737 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 02:47:24,737 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:47:57,687 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 02:47:57,687 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 02:47:57,687 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:48:32,718 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 02:48:32,718 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 02:48:32,718 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:49:13,468 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 02:49:13,468 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 02:49:13,468 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 02:49:36,138 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 02:49:36,138 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 02:49:36,138 - __main__ - INFO - 开始数据质量检查...
2025-12-25 02:49:36,138 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 02:49:36,138 - __main__ - INFO - ============================================================
2025-12-25 02:49:36,138 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 02:49:36,139 - __main__ - INFO - ============================================================
2025-12-25 02:49:36,139 - __main__ - INFO - 预检查数据完整性...
2025-12-25 02:49:36,139 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 02:49:36,139 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 02:49:36,140 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 02:49:36,163 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 02:49:36,181 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 02:49:36,200 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 02:49:36,216 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 02:49:36,234 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 02:49:36,252 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 02:49:36,252 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 02:49:37,431 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 02:49:37,459 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 02:49:38,516 - __main__ - INFO - ============================================================
2025-12-25 02:49:38,517 - __main__ - INFO - 数据集名称: bbh
2025-12-25 02:49:38,517 - __main__ - INFO - 数据集路径: dataset/bbh/navigate.json
2025-12-25 02:49:38,517 - __main__ - INFO - ============================================================
2025-12-25 02:49:38,517 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 02:49:38,517 - __main__ - INFO - ============================================================
2025-12-25 02:49:38,517 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 02:49:38,517 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/navigate.json
2025-12-25 02:49:38,517 - __main__ - INFO - ============================================================
2025-12-25 02:49:38,517 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 02:49:38,517 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 02:49:38,517 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 02:49:38,517 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 02:49:38,517 - __main__ - INFO - ============================================================
2025-12-25 02:49:38,518 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 02:49:38,518 - __main__ - INFO - ============================================================
2025-12-25 02:49:38,518 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 02:49:38,518 - __main__ - INFO - ============================================================
2025-12-25 02:49:38,518 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 02:49:38,521 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 02:49:38,521 - __main__ - INFO - ============================================================
2025-12-25 02:49:38,521 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 02:49:38,521 - __main__ - INFO - ============================================================
2025-12-25 02:49:38,521 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 02:49:38,521 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 02:49:38,521 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 02:49:42,938 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 02:49:42,939 - inference.local_inference - INFO - ============================================================
2025-12-25 02:49:42,939 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 02:49:42,939 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 02:49:42,939 - inference.local_inference - INFO - ============================================================
2025-12-25 02:50:23,530 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 02:50:23,530 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 02:50:41,560 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 02:50:52,082 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 02:50:52,082 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 02:55:43,006 - __main__ - INFO - 批次 [3841-3968] 本地推理完成
2025-12-25 02:55:43,006 - __main__ - INFO - 处理批次 [3969-4096/99842]
2025-12-25 02:55:43,007 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 02:55:43,007 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 02:55:51,505 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 02:55:51,506 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 02:59:53,002 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 02:59:53,003 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 03:05:50,052 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 03:05:50,052 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 03:06:32,696 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 03:06:32,696 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 03:06:32,697 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 03:06:32,697 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 03:06:43,304 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 03:06:43,305 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 03:11:38,484 - __main__ - INFO - 批次 [3969-4096] 本地推理完成
2025-12-25 03:11:38,484 - __main__ - INFO - 处理批次 [4097-4224/99842]
2025-12-25 03:11:38,485 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 03:11:38,485 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 03:11:47,486 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 03:11:47,486 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 03:14:57,406 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 03:14:57,406 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 03:21:19,643 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 03:21:19,644 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 03:21:19,644 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 03:21:19,725 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 03:21:19,725 - __main__ - INFO - ============================================================
2025-12-25 03:21:19,725 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 03:21:19,725 - __main__ - INFO - ============================================================
2025-12-25 03:21:19,725 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 03:21:19,725 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 03:21:19,725 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:21:47,135 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 03:21:47,135 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 03:21:55,915 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 03:21:55,916 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 03:21:55,916 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:22:31,167 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 03:22:31,168 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 03:22:31,168 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:23:25,006 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 03:23:25,007 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 03:23:25,008 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:24:06,830 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 03:24:06,831 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 03:24:06,831 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:24:36,329 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 03:24:36,330 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 03:24:36,330 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:25:24,210 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 03:25:24,211 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 03:25:24,211 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:26:24,544 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 03:26:24,545 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 03:26:24,545 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:27:14,736 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 03:27:14,737 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 03:27:14,737 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:27:30,416 - __main__ - INFO - 批次 [4097-4224] 本地推理完成
2025-12-25 03:27:30,416 - __main__ - INFO - 处理批次 [4225-4352/99842]
2025-12-25 03:27:30,416 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 03:27:30,416 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 03:27:40,766 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 03:27:40,767 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 03:27:42,750 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 03:27:42,750 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 03:27:42,750 - __main__ - INFO - 开始数据质量检查...
2025-12-25 03:27:42,750 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 03:27:42,750 - __main__ - INFO - ============================================================
2025-12-25 03:27:42,750 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 03:27:42,750 - __main__ - INFO - ============================================================
2025-12-25 03:27:42,750 - __main__ - INFO - 预检查数据完整性...
2025-12-25 03:27:42,751 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 03:27:42,751 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 03:27:42,751 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 03:27:42,777 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 03:27:42,802 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 03:27:42,826 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 03:27:42,849 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 03:27:42,873 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 03:27:42,892 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 03:27:42,892 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 03:27:44,179 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 03:27:44,210 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 03:27:45,275 - __main__ - INFO - ============================================================
2025-12-25 03:27:45,275 - __main__ - INFO - 数据集名称: bbh
2025-12-25 03:27:45,275 - __main__ - INFO - 数据集路径: dataset/bbh/object_counting.json
2025-12-25 03:27:45,275 - __main__ - INFO - ============================================================
2025-12-25 03:27:45,275 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 03:27:45,275 - __main__ - INFO - ============================================================
2025-12-25 03:27:45,275 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 03:27:45,275 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/object_counting.json
2025-12-25 03:27:45,275 - __main__ - INFO - ============================================================
2025-12-25 03:27:45,276 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 03:27:45,276 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 03:27:45,276 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 03:27:45,276 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 03:27:45,276 - __main__ - INFO - ============================================================
2025-12-25 03:27:45,276 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 03:27:45,276 - __main__ - INFO - ============================================================
2025-12-25 03:27:45,276 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 03:27:45,276 - __main__ - INFO - ============================================================
2025-12-25 03:27:45,277 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 03:27:45,279 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 03:27:45,279 - __main__ - INFO - ============================================================
2025-12-25 03:27:45,279 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 03:27:45,279 - __main__ - INFO - ============================================================
2025-12-25 03:27:45,279 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 03:27:45,279 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 03:27:45,279 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 03:27:49,678 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 03:27:49,678 - inference.local_inference - INFO - ============================================================
2025-12-25 03:27:49,678 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 03:27:49,678 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 03:27:49,678 - inference.local_inference - INFO - ============================================================
2025-12-25 03:28:48,026 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 03:28:54,783 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 03:28:54,784 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 03:36:44,134 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 03:36:44,134 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 03:37:35,815 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 03:37:35,815 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 03:43:29,917 - __main__ - INFO - 批次 [4225-4352] 本地推理完成
2025-12-25 03:43:29,918 - __main__ - INFO - 处理批次 [4353-4480/99842]
2025-12-25 03:43:29,918 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 03:43:29,918 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 03:43:40,364 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 03:43:40,365 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 03:43:57,833 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 03:43:57,833 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 03:43:57,833 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 03:43:57,833 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 03:44:04,550 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 03:44:04,551 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 03:51:47,109 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 03:51:47,109 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 03:53:10,728 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 03:53:10,728 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 03:58:27,743 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 03:58:27,743 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 03:58:27,743 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 03:58:27,815 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 03:58:27,815 - __main__ - INFO - ============================================================
2025-12-25 03:58:27,815 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 03:58:27,815 - __main__ - INFO - ============================================================
2025-12-25 03:58:27,815 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 03:58:27,815 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 03:58:27,815 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:59:08,325 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 03:59:08,326 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 03:59:08,326 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:59:39,139 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 03:59:39,139 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 03:59:39,139 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 03:59:47,587 - __main__ - INFO - 批次 [4353-4480] 本地推理完成
2025-12-25 03:59:47,587 - __main__ - INFO - 处理批次 [4481-4608/99842]
2025-12-25 03:59:47,587 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 03:59:47,587 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 03:59:58,975 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 03:59:58,975 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 04:00:00,689 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 04:00:00,690 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 04:00:00,690 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 04:00:21,876 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 04:00:21,876 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 04:00:21,876 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 04:00:57,968 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 04:00:57,969 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 04:00:57,969 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 04:01:22,255 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 04:01:22,255 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 04:01:22,256 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 04:01:46,846 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 04:01:46,847 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 04:01:46,847 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 04:02:18,440 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 04:02:18,441 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 04:02:18,441 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 04:02:33,836 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 04:02:33,837 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 04:02:33,837 - __main__ - INFO - 开始数据质量检查...
2025-12-25 04:02:33,837 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 04:02:33,837 - __main__ - INFO - ============================================================
2025-12-25 04:02:33,837 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 04:02:33,837 - __main__ - INFO - ============================================================
2025-12-25 04:02:33,837 - __main__ - INFO - 预检查数据完整性...
2025-12-25 04:02:33,838 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 04:02:33,838 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 04:02:33,838 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 04:02:33,860 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 04:02:33,878 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 04:02:33,894 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 04:02:33,914 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 04:02:33,929 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 04:02:33,946 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 04:02:33,946 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 04:02:35,224 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 04:02:35,255 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 04:02:36,297 - __main__ - INFO - ============================================================
2025-12-25 04:02:36,297 - __main__ - INFO - 数据集名称: bbh
2025-12-25 04:02:36,297 - __main__ - INFO - 数据集路径: dataset/bbh/penguins_in_a_table.json
2025-12-25 04:02:36,297 - __main__ - INFO - ============================================================
2025-12-25 04:02:36,297 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 04:02:36,297 - __main__ - INFO - ============================================================
2025-12-25 04:02:36,297 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 04:02:36,297 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/penguins_in_a_table.json
2025-12-25 04:02:36,297 - __main__ - INFO - ============================================================
2025-12-25 04:02:36,297 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 04:02:36,298 - __main__ - INFO - 预处理 BBH 数据集: 146 条
2025-12-25 04:02:36,298 - __main__ - INFO - [数据集适配层] 预处理完成: 146 条有效数据
2025-12-25 04:02:36,298 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 04:02:36,298 - __main__ - INFO - ============================================================
2025-12-25 04:02:36,298 - __main__ - INFO - 数据集加载成功，共 146 条数据
2025-12-25 04:02:36,298 - __main__ - INFO - ============================================================
2025-12-25 04:02:36,298 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 04:02:36,298 - __main__ - INFO - ============================================================
2025-12-25 04:02:36,298 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 04:02:36,301 - __main__ - INFO - 共需处理 146 条数据，批次大小: 64
2025-12-25 04:02:36,301 - __main__ - INFO - ============================================================
2025-12-25 04:02:36,301 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 04:02:36,301 - __main__ - INFO - ============================================================
2025-12-25 04:02:36,301 - __main__ - INFO - 处理批次 [1-128/146]
2025-12-25 04:02:36,301 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 04:02:36,301 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 04:02:40,656 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 04:02:40,657 - inference.local_inference - INFO - ============================================================
2025-12-25 04:02:40,657 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 04:02:40,657 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 04:02:40,657 - inference.local_inference - INFO - ============================================================
2025-12-25 04:03:39,241 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 04:05:36,947 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 04:05:36,948 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 04:09:18,365 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 04:09:18,365 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 04:15:29,414 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 04:15:29,414 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 04:15:52,110 - __main__ - INFO - 批次 [4481-4608] 本地推理完成
2025-12-25 04:15:52,110 - __main__ - INFO - 处理批次 [4609-4736/99842]
2025-12-25 04:15:52,110 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 04:15:52,110 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 04:16:00,794 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 04:16:00,794 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 04:21:40,098 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 04:21:40,099 - __main__ - INFO - 处理批次 [129-146/146]
2025-12-25 04:21:40,099 - __main__ - INFO -   → 生成Baseline答案 (18 条)...
2025-12-25 04:21:40,099 - __main__ - INFO - 批量生成Baseline答案: 18 条
2025-12-25 04:21:46,183 - __main__ - INFO -   → 生成差异分析 (18 条)...
2025-12-25 04:21:46,183 - __main__ - INFO - 批量生成差异分析: 18 条
2025-12-25 04:24:31,902 - __main__ - INFO -   → 生成Rejected原则 (18 条)...
2025-12-25 04:24:31,903 - __main__ - INFO - 批量生成原则（弱模型）: 18 条
2025-12-25 04:25:15,315 - __main__ - INFO - 批次 [129-146] 本地推理完成
2025-12-25 04:25:15,315 - __main__ - INFO - 阶段1完成: 共生成 146 条本地推理结果
2025-12-25 04:25:15,315 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 04:25:15,363 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 04:25:15,363 - __main__ - INFO - ============================================================
2025-12-25 04:25:15,363 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 04:25:15,363 - __main__ - INFO - ============================================================
2025-12-25 04:25:15,363 - __main__ - INFO - API分批处理: 每批 30 条，共 5 批
2025-12-25 04:25:15,363 - __main__ - INFO - API批次 [1-30/146] 开始处理...
2025-12-25 04:25:15,363 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 04:25:33,096 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 04:25:33,097 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 04:25:53,872 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 04:25:53,873 - __main__ - INFO - API批次 [31-60/146] 开始处理...
2025-12-25 04:25:53,873 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 04:26:18,364 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 04:26:18,364 - __main__ - INFO - API批次 [61-90/146] 开始处理...
2025-12-25 04:26:18,364 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 04:26:52,351 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 04:26:52,351 - __main__ - INFO - API批次 [91-120/146] 开始处理...
2025-12-25 04:26:52,351 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 04:27:44,663 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 04:27:44,664 - __main__ - INFO - API批次 [121-146/146] 开始处理...
2025-12-25 04:27:44,664 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 04:28:13,621 - __main__ - INFO - API批次 [121-146] 完成
2025-12-25 04:28:13,622 - __main__ - INFO - 阶段2完成: 共生成 146 条Chosen结果
2025-12-25 04:28:13,622 - __main__ - INFO - 开始数据质量检查...
2025-12-25 04:28:13,622 - __main__ - INFO - ✅ 数据质量检查通过: 146 条chosen全部非空
2025-12-25 04:28:13,622 - __main__ - INFO - ============================================================
2025-12-25 04:28:13,622 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 04:28:13,622 - __main__ - INFO - ============================================================
2025-12-25 04:28:13,622 - __main__ - INFO - 预检查数据完整性...
2025-12-25 04:28:13,623 - __main__ - INFO - Chosen非空率: 146/146 (100.0%)
2025-12-25 04:28:13,623 - __main__ - INFO - Rejected非空率: 146/146 (100.0%)
2025-12-25 04:28:13,623 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 04:28:13,645 - __main__ - INFO - 已保存 50/146 条到JSONL
2025-12-25 04:28:13,663 - __main__ - INFO - 已保存 100/146 条到JSONL
2025-12-25 04:28:13,688 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 04:28:13,689 - __main__ - INFO - 共保存 146 条数据到JSONL格式
2025-12-25 04:28:14,862 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 04:28:14,890 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 04:28:15,900 - __main__ - INFO - ============================================================
2025-12-25 04:28:15,900 - __main__ - INFO - 数据集名称: bbh
2025-12-25 04:28:15,900 - __main__ - INFO - 数据集路径: dataset/bbh/reasoning_about_colored_objects.json
2025-12-25 04:28:15,900 - __main__ - INFO - ============================================================
2025-12-25 04:28:15,901 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 04:28:15,901 - __main__ - INFO - ============================================================
2025-12-25 04:28:15,901 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 04:28:15,901 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/reasoning_about_colored_objects.json
2025-12-25 04:28:15,901 - __main__ - INFO - ============================================================
2025-12-25 04:28:15,901 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 04:28:15,901 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 04:28:15,901 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 04:28:15,901 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 04:28:15,901 - __main__ - INFO - ============================================================
2025-12-25 04:28:15,902 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 04:28:15,902 - __main__ - INFO - ============================================================
2025-12-25 04:28:15,902 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 04:28:15,902 - __main__ - INFO - ============================================================
2025-12-25 04:28:15,902 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 04:28:15,904 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 04:28:15,904 - __main__ - INFO - ============================================================
2025-12-25 04:28:15,904 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 04:28:15,904 - __main__ - INFO - ============================================================
2025-12-25 04:28:15,904 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 04:28:15,904 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 04:28:15,904 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 04:28:20,383 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 04:28:20,384 - inference.local_inference - INFO - ============================================================
2025-12-25 04:28:20,384 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 04:28:20,384 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 04:28:20,384 - inference.local_inference - INFO - ============================================================
2025-12-25 04:29:17,978 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 04:29:32,512 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 04:29:32,513 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 04:32:08,772 - __main__ - INFO - 批次 [4609-4736] 本地推理完成
2025-12-25 04:32:08,772 - __main__ - INFO - 处理批次 [4737-4864/99842]
2025-12-25 04:32:08,772 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 04:32:08,772 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 04:34:08,353 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 04:34:08,353 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 04:39:05,182 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 04:39:05,183 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 04:43:41,968 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 04:43:41,968 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 04:45:20,402 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 04:45:20,403 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 04:45:20,403 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 04:45:20,403 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 04:45:33,415 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 04:45:33,415 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 04:50:11,845 - __main__ - INFO - 批次 [4737-4864] 本地推理完成
2025-12-25 04:50:11,845 - __main__ - INFO - 处理批次 [4865-4992/99842]
2025-12-25 04:50:11,845 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 04:50:11,846 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 04:50:24,796 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 04:50:24,796 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 04:54:52,818 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 04:54:52,819 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 05:00:13,571 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 05:00:13,572 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 05:01:02,220 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 05:01:02,220 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 05:01:02,220 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 05:01:02,305 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 05:01:02,305 - __main__ - INFO - ============================================================
2025-12-25 05:01:02,305 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 05:01:02,305 - __main__ - INFO - ============================================================
2025-12-25 05:01:02,305 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 05:01:02,305 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 05:01:02,305 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:01:30,235 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 05:01:30,236 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 05:01:30,236 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:01:59,200 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 05:01:59,201 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 05:01:59,201 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:02:29,165 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 05:02:29,166 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 05:02:29,166 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:02:53,773 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 05:02:53,774 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 05:02:53,774 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:03:48,147 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 05:03:48,148 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 05:03:48,148 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:04:36,142 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 05:04:36,143 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 05:04:36,143 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:05:14,148 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 05:05:14,148 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 05:05:14,148 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:06:03,918 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 05:06:03,919 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 05:06:03,919 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:06:31,550 - __main__ - INFO - 批次 [4865-4992] 本地推理完成
2025-12-25 05:06:31,550 - __main__ - INFO - 处理批次 [4993-5120/99842]
2025-12-25 05:06:31,551 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 05:06:31,551 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 05:06:35,745 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 05:06:35,746 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 05:06:35,746 - __main__ - INFO - 开始数据质量检查...
2025-12-25 05:06:35,746 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 05:06:35,746 - __main__ - INFO - ============================================================
2025-12-25 05:06:35,747 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 05:06:35,747 - __main__ - INFO - ============================================================
2025-12-25 05:06:35,747 - __main__ - INFO - 预检查数据完整性...
2025-12-25 05:06:35,748 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 05:06:35,748 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 05:06:35,748 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 05:06:35,772 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 05:06:35,790 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 05:06:35,809 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 05:06:35,829 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 05:06:35,848 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 05:06:35,867 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 05:06:35,867 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 05:06:37,045 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 05:06:37,074 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 05:06:38,110 - __main__ - INFO - ============================================================
2025-12-25 05:06:38,110 - __main__ - INFO - 数据集名称: bbh
2025-12-25 05:06:38,110 - __main__ - INFO - 数据集路径: dataset/bbh/ruin_names.json
2025-12-25 05:06:38,110 - __main__ - INFO - ============================================================
2025-12-25 05:06:38,110 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 05:06:38,110 - __main__ - INFO - ============================================================
2025-12-25 05:06:38,111 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 05:06:38,111 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/ruin_names.json
2025-12-25 05:06:38,111 - __main__ - INFO - ============================================================
2025-12-25 05:06:38,111 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 05:06:38,111 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 05:06:38,111 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 05:06:38,111 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 05:06:38,111 - __main__ - INFO - ============================================================
2025-12-25 05:06:38,111 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 05:06:38,111 - __main__ - INFO - ============================================================
2025-12-25 05:06:38,111 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 05:06:38,111 - __main__ - INFO - ============================================================
2025-12-25 05:06:38,112 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 05:06:38,114 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 05:06:38,114 - __main__ - INFO - ============================================================
2025-12-25 05:06:38,114 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 05:06:38,114 - __main__ - INFO - ============================================================
2025-12-25 05:06:38,114 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 05:06:38,114 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 05:06:38,114 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 05:06:42,490 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 05:06:42,490 - inference.local_inference - INFO - ============================================================
2025-12-25 05:06:42,490 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 05:06:42,490 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 05:06:42,490 - inference.local_inference - INFO - ============================================================
2025-12-25 05:07:40,149 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 05:07:49,797 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 05:07:49,798 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 05:08:33,587 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 05:08:33,588 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 05:17:43,253 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 05:17:43,254 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 05:18:36,396 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 05:18:36,396 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 05:24:02,923 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 05:24:02,924 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 05:24:02,924 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 05:24:02,924 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 05:24:12,878 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 05:24:12,878 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 05:24:22,472 - __main__ - INFO - 批次 [4993-5120] 本地推理完成
2025-12-25 05:24:22,472 - __main__ - INFO - 处理批次 [5121-5248/99842]
2025-12-25 05:24:22,473 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 05:24:22,473 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 05:26:24,502 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 05:26:24,503 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 05:33:53,582 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 05:33:53,582 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 05:36:32,646 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 05:36:32,646 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 05:39:40,190 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 05:39:40,190 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 05:39:40,190 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 05:39:40,276 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 05:39:40,276 - __main__ - INFO - ============================================================
2025-12-25 05:39:40,276 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 05:39:40,276 - __main__ - INFO - ============================================================
2025-12-25 05:39:40,276 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 05:39:40,276 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 05:39:40,276 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:40:20,297 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 05:40:20,298 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 05:40:20,298 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:40:52,794 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 05:40:52,794 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 05:40:52,794 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:41:53,545 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 05:41:53,545 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 05:41:53,545 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:42:19,335 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 05:42:19,337 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 05:42:19,337 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:42:22,599 - __main__ - INFO - 批次 [5121-5248] 本地推理完成
2025-12-25 05:42:22,599 - __main__ - INFO - 处理批次 [5249-5376/99842]
2025-12-25 05:42:22,600 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 05:42:22,600 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 05:42:39,396 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 05:42:39,396 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 05:43:15,849 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 05:43:15,850 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 05:43:15,850 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:43:41,307 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 05:43:41,308 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 05:43:41,308 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:44:21,607 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 05:44:21,607 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 05:44:21,608 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:44:53,266 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 05:44:53,267 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 05:44:53,267 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 05:45:21,457 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 05:45:21,457 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 05:45:21,458 - __main__ - INFO - 开始数据质量检查...
2025-12-25 05:45:21,458 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 05:45:21,458 - __main__ - INFO - ============================================================
2025-12-25 05:45:21,458 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 05:45:21,458 - __main__ - INFO - ============================================================
2025-12-25 05:45:21,458 - __main__ - INFO - 预检查数据完整性...
2025-12-25 05:45:21,459 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 05:45:21,459 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 05:45:21,459 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 05:45:21,483 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 05:45:21,502 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 05:45:21,523 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 05:45:21,541 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 05:45:21,558 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 05:45:21,575 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 05:45:21,575 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 05:45:22,954 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 05:45:22,984 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 05:45:24,075 - __main__ - INFO - ============================================================
2025-12-25 05:45:24,075 - __main__ - INFO - 数据集名称: bbh
2025-12-25 05:45:24,075 - __main__ - INFO - 数据集路径: dataset/bbh/salient_translation_error_detection.json
2025-12-25 05:45:24,075 - __main__ - INFO - ============================================================
2025-12-25 05:45:24,075 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 05:45:24,075 - __main__ - INFO - ============================================================
2025-12-25 05:45:24,075 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 05:45:24,075 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/salient_translation_error_detection.json
2025-12-25 05:45:24,075 - __main__ - INFO - ============================================================
2025-12-25 05:45:24,076 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 05:45:24,076 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 05:45:24,076 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 05:45:24,076 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 05:45:24,076 - __main__ - INFO - ============================================================
2025-12-25 05:45:24,076 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 05:45:24,076 - __main__ - INFO - ============================================================
2025-12-25 05:45:24,076 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 05:45:24,076 - __main__ - INFO - ============================================================
2025-12-25 05:45:24,077 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 05:45:24,079 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 05:45:24,079 - __main__ - INFO - ============================================================
2025-12-25 05:45:24,079 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 05:45:24,079 - __main__ - INFO - ============================================================
2025-12-25 05:45:24,079 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 05:45:24,079 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 05:45:24,080 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 05:45:28,368 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 05:45:28,368 - inference.local_inference - INFO - ============================================================
2025-12-25 05:45:28,368 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 05:45:28,368 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 05:45:28,368 - inference.local_inference - INFO - ============================================================
2025-12-25 05:46:27,285 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 05:46:39,682 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 05:46:39,683 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 05:52:49,068 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 05:52:49,069 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 05:56:40,088 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 05:56:40,088 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 05:58:20,085 - __main__ - INFO - 批次 [5249-5376] 本地推理完成
2025-12-25 05:58:20,085 - __main__ - INFO - 处理批次 [5377-5504/99842]
2025-12-25 05:58:20,086 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 05:58:20,086 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 05:58:34,660 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 05:58:34,660 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 06:02:23,108 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 06:02:23,108 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 06:02:23,108 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 06:02:23,108 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 06:02:36,349 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 06:02:36,350 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 06:08:34,985 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 06:08:34,985 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 06:12:10,242 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 06:12:10,243 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 06:14:33,236 - __main__ - INFO - 批次 [5377-5504] 本地推理完成
2025-12-25 06:14:33,236 - __main__ - INFO - 处理批次 [5505-5632/99842]
2025-12-25 06:14:33,237 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 06:14:33,237 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 06:14:47,258 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 06:14:47,259 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 06:18:02,536 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 06:18:02,537 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 06:18:02,537 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 06:18:02,619 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 06:18:02,619 - __main__ - INFO - ============================================================
2025-12-25 06:18:02,619 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 06:18:02,619 - __main__ - INFO - ============================================================
2025-12-25 06:18:02,619 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 06:18:02,619 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 06:18:02,620 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:18:33,974 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 06:18:33,975 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 06:18:33,975 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:19:01,708 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 06:19:01,709 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 06:19:01,709 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:19:28,399 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 06:19:28,400 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 06:19:28,400 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:19:54,141 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 06:19:54,141 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 06:19:54,141 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:20:25,853 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 06:20:25,854 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 06:20:25,854 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:20:57,471 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 06:20:57,472 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 06:20:57,472 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:21:27,238 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 06:21:27,238 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 06:21:27,238 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:22:01,502 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 06:22:01,502 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 06:22:01,503 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:22:25,669 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 06:22:25,669 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 06:22:25,669 - __main__ - INFO - 开始数据质量检查...
2025-12-25 06:22:25,669 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 06:22:25,669 - __main__ - INFO - ============================================================
2025-12-25 06:22:25,669 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 06:22:25,669 - __main__ - INFO - ============================================================
2025-12-25 06:22:25,669 - __main__ - INFO - 预检查数据完整性...
2025-12-25 06:22:25,669 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 06:22:25,669 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 06:22:25,669 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 06:22:25,689 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 06:22:25,708 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 06:22:25,729 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 06:22:25,747 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 06:22:25,768 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 06:22:25,786 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 06:22:25,786 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 06:22:27,265 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 06:22:27,295 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 06:22:28,331 - __main__ - INFO - ============================================================
2025-12-25 06:22:28,331 - __main__ - INFO - 数据集名称: bbh
2025-12-25 06:22:28,331 - __main__ - INFO - 数据集路径: dataset/bbh/snarks.json
2025-12-25 06:22:28,331 - __main__ - INFO - ============================================================
2025-12-25 06:22:28,331 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 06:22:28,332 - __main__ - INFO - ============================================================
2025-12-25 06:22:28,332 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 06:22:28,332 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/snarks.json
2025-12-25 06:22:28,332 - __main__ - INFO - ============================================================
2025-12-25 06:22:28,332 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 06:22:28,332 - __main__ - INFO - 预处理 BBH 数据集: 178 条
2025-12-25 06:22:28,332 - __main__ - INFO - [数据集适配层] 预处理完成: 178 条有效数据
2025-12-25 06:22:28,332 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 06:22:28,332 - __main__ - INFO - ============================================================
2025-12-25 06:22:28,332 - __main__ - INFO - 数据集加载成功，共 178 条数据
2025-12-25 06:22:28,332 - __main__ - INFO - ============================================================
2025-12-25 06:22:28,332 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 06:22:28,332 - __main__ - INFO - ============================================================
2025-12-25 06:22:28,333 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 06:22:28,335 - __main__ - INFO - 共需处理 178 条数据，批次大小: 64
2025-12-25 06:22:28,335 - __main__ - INFO - ============================================================
2025-12-25 06:22:28,335 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 06:22:28,335 - __main__ - INFO - ============================================================
2025-12-25 06:22:28,335 - __main__ - INFO - 处理批次 [1-128/178]
2025-12-25 06:22:28,335 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 06:22:28,335 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 06:22:32,598 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 06:22:32,599 - inference.local_inference - INFO - ============================================================
2025-12-25 06:22:32,599 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 06:22:32,599 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 06:22:32,599 - inference.local_inference - INFO - ============================================================
2025-12-25 06:23:31,290 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 06:23:40,457 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 06:23:40,458 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 06:24:46,322 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 06:24:46,322 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 06:30:24,499 - __main__ - INFO - 批次 [5505-5632] 本地推理完成
2025-12-25 06:30:24,500 - __main__ - INFO - 处理批次 [5633-5760/99842]
2025-12-25 06:30:24,501 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 06:30:24,501 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 06:32:26,385 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 06:32:26,386 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 06:33:23,092 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 06:33:23,092 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 06:39:42,764 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 06:39:42,764 - __main__ - INFO - 处理批次 [129-178/178]
2025-12-25 06:39:42,764 - __main__ - INFO -   → 生成Baseline答案 (50 条)...
2025-12-25 06:39:42,764 - __main__ - INFO - 批量生成Baseline答案: 50 条
2025-12-25 06:39:48,347 - __main__ - INFO -   → 生成差异分析 (50 条)...
2025-12-25 06:39:48,347 - __main__ - INFO - 批量生成差异分析: 50 条
2025-12-25 06:42:42,336 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 06:42:42,337 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 06:43:55,561 - __main__ - INFO -   → 生成Rejected原则 (50 条)...
2025-12-25 06:43:55,562 - __main__ - INFO - 批量生成原则（弱模型）: 50 条
2025-12-25 06:47:16,514 - __main__ - INFO - 批次 [129-178] 本地推理完成
2025-12-25 06:47:16,514 - __main__ - INFO - 阶段1完成: 共生成 178 条本地推理结果
2025-12-25 06:47:16,515 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 06:47:16,578 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 06:47:16,578 - __main__ - INFO - ============================================================
2025-12-25 06:47:16,578 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 06:47:16,578 - __main__ - INFO - ============================================================
2025-12-25 06:47:16,578 - __main__ - INFO - API分批处理: 每批 30 条，共 6 批
2025-12-25 06:47:16,578 - __main__ - INFO - API批次 [1-30/178] 开始处理...
2025-12-25 06:47:16,578 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:47:37,161 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 06:47:37,162 - __main__ - INFO - API批次 [31-60/178] 开始处理...
2025-12-25 06:47:37,163 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:48:05,473 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 06:48:05,474 - __main__ - INFO - API批次 [61-90/178] 开始处理...
2025-12-25 06:48:05,474 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:48:27,896 - __main__ - INFO - 批次 [5633-5760] 本地推理完成
2025-12-25 06:48:27,896 - __main__ - INFO - 处理批次 [5761-5888/99842]
2025-12-25 06:48:27,897 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 06:48:27,897 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 06:48:50,763 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 06:48:50,764 - __main__ - INFO - API批次 [91-120/178] 开始处理...
2025-12-25 06:48:50,764 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:49:27,042 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 06:49:27,043 - __main__ - INFO - API批次 [121-150/178] 开始处理...
2025-12-25 06:49:27,044 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:50:21,448 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 06:50:21,449 - __main__ - INFO - API批次 [151-178/178] 开始处理...
2025-12-25 06:50:21,449 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 06:50:29,964 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 06:50:29,965 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 06:51:22,691 - __main__ - INFO - API批次 [151-178] 完成
2025-12-25 06:51:22,692 - __main__ - INFO - 阶段2完成: 共生成 178 条Chosen结果
2025-12-25 06:51:22,692 - __main__ - INFO - 开始数据质量检查...
2025-12-25 06:51:22,692 - __main__ - INFO - ✅ 数据质量检查通过: 178 条chosen全部非空
2025-12-25 06:51:22,692 - __main__ - INFO - ============================================================
2025-12-25 06:51:22,692 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 06:51:22,692 - __main__ - INFO - ============================================================
2025-12-25 06:51:22,692 - __main__ - INFO - 预检查数据完整性...
2025-12-25 06:51:22,693 - __main__ - INFO - Chosen非空率: 178/178 (100.0%)
2025-12-25 06:51:22,693 - __main__ - INFO - Rejected非空率: 178/178 (100.0%)
2025-12-25 06:51:22,693 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 06:51:22,716 - __main__ - INFO - 已保存 50/178 条到JSONL
2025-12-25 06:51:22,736 - __main__ - INFO - 已保存 100/178 条到JSONL
2025-12-25 06:51:22,756 - __main__ - INFO - 已保存 150/178 条到JSONL
2025-12-25 06:51:22,777 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 06:51:22,777 - __main__ - INFO - 共保存 178 条数据到JSONL格式
2025-12-25 06:51:24,054 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 06:51:24,089 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 06:51:25,150 - __main__ - INFO - ============================================================
2025-12-25 06:51:25,150 - __main__ - INFO - 数据集名称: bbh
2025-12-25 06:51:25,150 - __main__ - INFO - 数据集路径: dataset/bbh/sports_understanding.json
2025-12-25 06:51:25,150 - __main__ - INFO - ============================================================
2025-12-25 06:51:25,150 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 06:51:25,150 - __main__ - INFO - ============================================================
2025-12-25 06:51:25,150 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 06:51:25,150 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/sports_understanding.json
2025-12-25 06:51:25,150 - __main__ - INFO - ============================================================
2025-12-25 06:51:25,150 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 06:51:25,150 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 06:51:25,151 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 06:51:25,151 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 06:51:25,151 - __main__ - INFO - ============================================================
2025-12-25 06:51:25,151 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 06:51:25,151 - __main__ - INFO - ============================================================
2025-12-25 06:51:25,151 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 06:51:25,151 - __main__ - INFO - ============================================================
2025-12-25 06:51:25,151 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 06:51:25,153 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 06:51:25,153 - __main__ - INFO - ============================================================
2025-12-25 06:51:25,153 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 06:51:25,153 - __main__ - INFO - ============================================================
2025-12-25 06:51:25,154 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 06:51:25,154 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 06:51:25,154 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 06:51:29,520 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 06:51:29,520 - inference.local_inference - INFO - ============================================================
2025-12-25 06:51:29,520 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 06:51:29,520 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 06:51:29,520 - inference.local_inference - INFO - ============================================================
2025-12-25 06:52:28,430 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 06:52:40,189 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 06:52:40,190 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 07:01:01,054 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 07:01:01,055 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 07:02:35,367 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 07:02:35,368 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 07:06:45,300 - __main__ - INFO - 批次 [5761-5888] 本地推理完成
2025-12-25 07:06:45,301 - __main__ - INFO - 处理批次 [5889-6016/99842]
2025-12-25 07:06:45,301 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 07:06:45,301 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 07:07:00,594 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 07:07:00,595 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 07:08:53,521 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 07:08:53,522 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 07:08:53,522 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 07:08:53,522 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 07:11:05,162 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 07:11:05,162 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 07:17:22,669 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 07:17:22,669 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 07:20:31,675 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 07:20:31,676 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 07:22:55,542 - __main__ - INFO - 批次 [5889-6016] 本地推理完成
2025-12-25 07:22:55,542 - __main__ - INFO - 处理批次 [6017-6144/99842]
2025-12-25 07:22:55,543 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 07:22:55,543 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 07:23:14,227 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 07:23:14,228 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 07:26:22,791 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 07:26:22,792 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 07:26:22,792 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 07:26:22,878 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 07:26:22,878 - __main__ - INFO - ============================================================
2025-12-25 07:26:22,878 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 07:26:22,878 - __main__ - INFO - ============================================================
2025-12-25 07:26:22,878 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 07:26:22,878 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 07:26:22,878 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 07:26:53,071 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 07:26:53,072 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 07:26:53,072 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 07:27:24,017 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 07:27:24,018 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 07:27:24,018 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 07:28:02,331 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 07:28:02,332 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 07:28:02,332 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 07:28:38,665 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 07:28:38,665 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 07:28:38,666 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 07:29:11,320 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 07:29:11,321 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 07:29:11,321 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 07:29:42,154 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 07:29:42,155 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 07:29:42,155 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 07:30:19,196 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 07:30:19,197 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 07:30:19,197 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 07:30:45,751 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 07:30:45,751 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 07:30:45,752 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 07:31:12,570 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 07:31:12,570 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 07:31:12,570 - __main__ - INFO - 开始数据质量检查...
2025-12-25 07:31:12,571 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 07:31:12,571 - __main__ - INFO - ============================================================
2025-12-25 07:31:12,571 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 07:31:12,571 - __main__ - INFO - ============================================================
2025-12-25 07:31:12,571 - __main__ - INFO - 预检查数据完整性...
2025-12-25 07:31:12,572 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 07:31:12,572 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 07:31:12,572 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 07:31:12,596 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 07:31:12,617 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 07:31:12,637 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 07:31:12,653 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 07:31:12,672 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 07:31:12,690 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 07:31:12,690 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 07:31:13,967 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 07:31:13,998 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 07:31:15,040 - __main__ - INFO - ============================================================
2025-12-25 07:31:15,040 - __main__ - INFO - 数据集名称: bbh
2025-12-25 07:31:15,040 - __main__ - INFO - 数据集路径: dataset/bbh/temporal_sequences.json
2025-12-25 07:31:15,040 - __main__ - INFO - ============================================================
2025-12-25 07:31:15,040 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 07:31:15,040 - __main__ - INFO - ============================================================
2025-12-25 07:31:15,040 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 07:31:15,040 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/temporal_sequences.json
2025-12-25 07:31:15,040 - __main__ - INFO - ============================================================
2025-12-25 07:31:15,041 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 07:31:15,041 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 07:31:15,041 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 07:31:15,041 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 07:31:15,041 - __main__ - INFO - ============================================================
2025-12-25 07:31:15,041 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 07:31:15,041 - __main__ - INFO - ============================================================
2025-12-25 07:31:15,041 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 07:31:15,041 - __main__ - INFO - ============================================================
2025-12-25 07:31:15,042 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 07:31:15,044 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 07:31:15,044 - __main__ - INFO - ============================================================
2025-12-25 07:31:15,044 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 07:31:15,044 - __main__ - INFO - ============================================================
2025-12-25 07:31:15,044 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 07:31:15,044 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 07:31:15,044 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 07:31:19,448 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 07:31:19,448 - inference.local_inference - INFO - ============================================================
2025-12-25 07:31:19,448 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 07:31:19,448 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 07:31:19,448 - inference.local_inference - INFO - ============================================================
2025-12-25 07:32:17,862 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 07:32:33,395 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 07:32:33,396 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 07:33:23,452 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 07:33:23,452 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 07:38:58,896 - __main__ - INFO - 批次 [6017-6144] 本地推理完成
2025-12-25 07:38:58,896 - __main__ - INFO - 处理批次 [6145-6272/99842]
2025-12-25 07:38:58,897 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 07:38:58,897 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 07:39:12,373 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 07:39:12,374 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 07:41:42,426 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 07:41:42,427 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 07:48:11,938 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 07:48:11,938 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 07:48:11,938 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 07:48:11,938 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 07:48:25,091 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 07:48:25,091 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 07:49:14,747 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 07:49:14,747 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 07:55:08,144 - __main__ - INFO - 批次 [6145-6272] 本地推理完成
2025-12-25 07:55:08,144 - __main__ - INFO - 处理批次 [6273-6400/99842]
2025-12-25 07:55:08,145 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 07:55:08,145 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 07:56:26,752 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 07:56:26,753 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 07:57:09,804 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 07:57:09,805 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 08:03:02,165 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 08:03:02,166 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 08:03:02,166 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 08:03:02,254 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 08:03:02,254 - __main__ - INFO - ============================================================
2025-12-25 08:03:02,254 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 08:03:02,254 - __main__ - INFO - ============================================================
2025-12-25 08:03:02,254 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 08:03:02,254 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 08:03:02,254 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:03:30,312 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 08:03:30,312 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 08:03:30,312 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:04:05,627 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 08:04:05,628 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 08:04:05,628 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:04:28,699 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 08:04:28,699 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 08:04:28,699 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:04:56,264 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 08:04:56,265 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 08:04:56,265 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:05:40,962 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 08:05:40,963 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 08:05:40,963 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:06:17,302 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 08:06:17,303 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 08:06:17,303 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:06:44,048 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 08:06:44,049 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 08:06:44,049 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:07:12,471 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 08:07:12,472 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 08:07:12,472 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:07:20,896 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 08:07:20,896 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 08:07:30,870 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 08:07:30,871 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 08:07:30,871 - __main__ - INFO - 开始数据质量检查...
2025-12-25 08:07:30,871 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 08:07:30,871 - __main__ - INFO - ============================================================
2025-12-25 08:07:30,871 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 08:07:30,871 - __main__ - INFO - ============================================================
2025-12-25 08:07:30,871 - __main__ - INFO - 预检查数据完整性...
2025-12-25 08:07:30,872 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 08:07:30,872 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 08:07:30,873 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 08:07:30,899 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 08:07:30,920 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 08:07:30,939 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 08:07:30,957 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 08:07:30,975 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 08:07:30,993 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 08:07:30,993 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 08:07:32,170 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 08:07:32,199 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 08:07:33,232 - __main__ - INFO - ============================================================
2025-12-25 08:07:33,232 - __main__ - INFO - 数据集名称: bbh
2025-12-25 08:07:33,232 - __main__ - INFO - 数据集路径: dataset/bbh/tracking_shuffled_objects_five_objects.json
2025-12-25 08:07:33,232 - __main__ - INFO - ============================================================
2025-12-25 08:07:33,232 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 08:07:33,232 - __main__ - INFO - ============================================================
2025-12-25 08:07:33,232 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 08:07:33,232 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/tracking_shuffled_objects_five_objects.json
2025-12-25 08:07:33,232 - __main__ - INFO - ============================================================
2025-12-25 08:07:33,233 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 08:07:33,233 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 08:07:33,233 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 08:07:33,233 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 08:07:33,233 - __main__ - INFO - ============================================================
2025-12-25 08:07:33,233 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 08:07:33,233 - __main__ - INFO - ============================================================
2025-12-25 08:07:33,233 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 08:07:33,233 - __main__ - INFO - ============================================================
2025-12-25 08:07:33,235 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 08:07:33,238 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 08:07:33,238 - __main__ - INFO - ============================================================
2025-12-25 08:07:33,238 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 08:07:33,238 - __main__ - INFO - ============================================================
2025-12-25 08:07:33,238 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 08:07:33,238 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 08:07:33,238 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 08:07:37,583 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 08:07:37,583 - inference.local_inference - INFO - ============================================================
2025-12-25 08:07:37,584 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 08:07:37,584 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 08:07:37,584 - inference.local_inference - INFO - ============================================================
2025-12-25 08:08:35,199 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 08:08:52,192 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 08:08:52,193 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 08:12:58,473 - __main__ - INFO - 批次 [6273-6400] 本地推理完成
2025-12-25 08:12:58,473 - __main__ - INFO - 处理批次 [6401-6528/99842]
2025-12-25 08:12:58,474 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 08:12:58,474 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 08:15:00,052 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 08:15:00,053 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 08:18:58,680 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 08:18:58,681 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 08:25:11,064 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 08:25:11,065 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 08:25:11,065 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 08:25:11,065 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 08:25:12,898 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 08:25:12,898 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 08:25:25,471 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 08:25:25,471 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 08:30:59,033 - __main__ - INFO - 批次 [6401-6528] 本地推理完成
2025-12-25 08:30:59,033 - __main__ - INFO - 处理批次 [6529-6656/99842]
2025-12-25 08:30:59,034 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 08:30:59,034 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 08:31:12,715 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 08:31:12,716 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 08:34:51,658 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 08:34:51,659 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
2025-12-25 08:40:55,207 - __main__ - INFO - 批次 [129-250] 本地推理完成
2025-12-25 08:40:55,208 - __main__ - INFO - 阶段1完成: 共生成 250 条本地推理结果
2025-12-25 08:40:55,208 - __main__ - INFO - 保存vLLM处理结果到: /home/metanew2/output/vllm_cache.json
2025-12-25 08:40:55,289 - __main__ - INFO - vLLM处理结果已安全保存
2025-12-25 08:40:55,289 - __main__ - INFO - ============================================================
2025-12-25 08:40:55,289 - __main__ - INFO - 阶段2/3: API并发生成Chosen（分批处理）
2025-12-25 08:40:55,289 - __main__ - INFO - ============================================================
2025-12-25 08:40:55,289 - __main__ - INFO - API分批处理: 每批 30 条，共 9 批
2025-12-25 08:40:55,289 - __main__ - INFO - API批次 [1-30/250] 开始处理...
2025-12-25 08:40:55,290 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:41:21,494 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 08:41:21,494 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 08:41:32,257 - __main__ - INFO - API批次 [1-30] 完成
2025-12-25 08:41:32,258 - __main__ - INFO - API批次 [31-60/250] 开始处理...
2025-12-25 08:41:32,258 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:42:51,171 - __main__ - INFO - API批次 [31-60] 完成
2025-12-25 08:42:51,172 - __main__ - INFO - API批次 [61-90/250] 开始处理...
2025-12-25 08:42:51,173 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:43:45,361 - __main__ - INFO - API批次 [61-90] 完成
2025-12-25 08:43:45,362 - __main__ - INFO - API批次 [91-120/250] 开始处理...
2025-12-25 08:43:45,362 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:45:18,700 - __main__ - INFO - API批次 [91-120] 完成
2025-12-25 08:45:18,701 - __main__ - INFO - API批次 [121-150/250] 开始处理...
2025-12-25 08:45:18,702 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:46:02,142 - __main__ - INFO - API批次 [121-150] 完成
2025-12-25 08:46:02,143 - __main__ - INFO - API批次 [151-180/250] 开始处理...
2025-12-25 08:46:02,143 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:46:47,015 - __main__ - INFO - API批次 [151-180] 完成
2025-12-25 08:46:47,016 - __main__ - INFO - API批次 [181-210/250] 开始处理...
2025-12-25 08:46:47,016 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:47:04,121 - __main__ - INFO - 批次 [6529-6656] 本地推理完成
2025-12-25 08:47:04,121 - __main__ - INFO - 处理批次 [6657-6784/99842]
2025-12-25 08:47:04,122 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 08:47:04,122 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 08:47:18,109 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 08:47:18,109 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 08:48:14,746 - __main__ - INFO - API批次 [181-210] 完成
2025-12-25 08:48:14,747 - __main__ - INFO - API批次 [211-240/250] 开始处理...
2025-12-25 08:48:14,747 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:48:51,624 - __main__ - INFO - API批次 [211-240] 完成
2025-12-25 08:48:51,625 - __main__ - INFO - API批次 [241-250/250] 开始处理...
2025-12-25 08:48:51,625 - module.execute_module - INFO - 启动 30 个并发线程调用强模型API
2025-12-25 08:50:06,073 - __main__ - INFO - API批次 [241-250] 完成
2025-12-25 08:50:06,073 - __main__ - INFO - 阶段2完成: 共生成 250 条Chosen结果
2025-12-25 08:50:06,073 - __main__ - INFO - 开始数据质量检查...
2025-12-25 08:50:06,073 - __main__ - INFO - ✅ 数据质量检查通过: 250 条chosen全部非空
2025-12-25 08:50:06,073 - __main__ - INFO - ============================================================
2025-12-25 08:50:06,073 - __main__ - INFO - 阶段3/3: 组装DPO数据并保存为JSONL格式
2025-12-25 08:50:06,073 - __main__ - INFO - ============================================================
2025-12-25 08:50:06,073 - __main__ - INFO - 预检查数据完整性...
2025-12-25 08:50:06,074 - __main__ - INFO - Chosen非空率: 250/250 (100.0%)
2025-12-25 08:50:06,074 - __main__ - INFO - Rejected非空率: 250/250 (100.0%)
2025-12-25 08:50:06,074 - __main__ - INFO - ✅ 数据完整性检查通过
2025-12-25 08:50:06,099 - __main__ - INFO - 已保存 50/250 条到JSONL
2025-12-25 08:50:06,124 - __main__ - INFO - 已保存 100/250 条到JSONL
2025-12-25 08:50:06,150 - __main__ - INFO - 已保存 150/250 条到JSONL
2025-12-25 08:50:06,174 - __main__ - INFO - 已保存 200/250 条到JSONL
2025-12-25 08:50:06,199 - __main__ - INFO - 已保存 250/250 条到JSONL
2025-12-25 08:50:06,219 - __main__ - INFO - DPO数据生成完成: output/dpo_bbh_all.jsonl
2025-12-25 08:50:06,219 - __main__ - INFO - 共保存 250 条数据到JSONL格式
2025-12-25 08:50:07,393 - inference.local_inference - INFO - 清理vLLM模型...
2025-12-25 08:50:07,431 - inference.local_inference - INFO - CUDA缓存已清理
2025-12-25 08:50:08,531 - __main__ - INFO - ============================================================
2025-12-25 08:50:08,531 - __main__ - INFO - 数据集名称: bbh
2025-12-25 08:50:08,531 - __main__ - INFO - 数据集路径: dataset/bbh/tracking_shuffled_objects_seven_objects.json
2025-12-25 08:50:08,531 - __main__ - INFO - ============================================================
2025-12-25 08:50:08,531 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 08:50:08,531 - __main__ - INFO - ============================================================
2025-12-25 08:50:08,531 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 08:50:08,531 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/tracking_shuffled_objects_seven_objects.json
2025-12-25 08:50:08,531 - __main__ - INFO - ============================================================
2025-12-25 08:50:08,532 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 08:50:08,532 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 08:50:08,532 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 08:50:08,532 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 08:50:08,532 - __main__ - INFO - ============================================================
2025-12-25 08:50:08,532 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 08:50:08,532 - __main__ - INFO - ============================================================
2025-12-25 08:50:08,532 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 08:50:08,532 - __main__ - INFO - ============================================================
2025-12-25 08:50:08,533 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 08:50:08,535 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 08:50:08,535 - __main__ - INFO - ============================================================
2025-12-25 08:50:08,535 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 08:50:08,535 - __main__ - INFO - ============================================================
2025-12-25 08:50:08,535 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 08:50:08,535 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 08:50:08,535 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 08:50:12,955 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 08:50:12,955 - inference.local_inference - INFO - ============================================================
2025-12-25 08:50:12,955 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 08:50:12,955 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 08:50:12,955 - inference.local_inference - INFO - ============================================================
2025-12-25 08:51:11,597 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 08:51:32,376 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 08:51:32,377 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 08:57:19,880 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 08:57:19,880 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 09:01:26,817 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 09:01:26,818 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 09:03:11,707 - __main__ - INFO - 批次 [6657-6784] 本地推理完成
2025-12-25 09:03:11,708 - __main__ - INFO - 处理批次 [6785-6912/99842]
2025-12-25 09:03:11,708 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 09:03:11,708 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 09:03:28,075 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 09:03:28,076 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 09:07:28,217 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 09:07:28,218 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 09:07:28,218 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 09:07:28,218 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 09:07:47,580 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 09:07:47,581 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 09:13:42,380 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 09:13:42,381 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 09:14:17,546 - __main__ - INFO - ============================================================
2025-12-25 09:14:17,546 - __main__ - INFO - 数据集名称: bbh
2025-12-25 09:14:17,546 - __main__ - INFO - 数据集路径: dataset/bbh/tracking_shuffled_objects_three_objects.json
2025-12-25 09:14:17,546 - __main__ - INFO - ============================================================
2025-12-25 09:14:17,546 - __main__ - INFO - 使用数据集适配层加载: bbh
2025-12-25 09:14:17,546 - __main__ - INFO - ============================================================
2025-12-25 09:14:17,546 - __main__ - INFO - [数据集适配层] 开始加载数据集: bbh
2025-12-25 09:14:17,546 - __main__ - INFO - [数据集适配层] 文件路径: dataset/bbh/tracking_shuffled_objects_three_objects.json
2025-12-25 09:14:17,546 - __main__ - INFO - ============================================================
2025-12-25 09:14:17,546 - __main__ - INFO - [数据集适配层] 已加载 JSON 文件
2025-12-25 09:14:17,547 - __main__ - INFO - 预处理 BBH 数据集: 250 条
2025-12-25 09:14:17,547 - __main__ - INFO - [数据集适配层] 预处理完成: 250 条有效数据
2025-12-25 09:14:17,547 - __main__ - INFO - [数据集适配层] 数据格式已统一为: {'question': str, 'answer': str}
2025-12-25 09:14:17,547 - __main__ - INFO - ============================================================
2025-12-25 09:14:17,547 - __main__ - INFO - 数据集加载成功，共 250 条数据
2025-12-25 09:14:17,547 - __main__ - INFO - ============================================================
2025-12-25 09:14:17,547 - __main__ - INFO - Step 1: 开始生成DPO数据
2025-12-25 09:14:17,547 - __main__ - INFO - ============================================================
2025-12-25 09:14:17,547 - __main__ - INFO - 未发现已有进度，将从头开始处理
2025-12-25 09:14:17,548 - __main__ - INFO - 共需处理 250 条数据，批次大小: 64
2025-12-25 09:14:17,548 - __main__ - INFO - ============================================================
2025-12-25 09:14:17,548 - __main__ - INFO - 阶段1/3: vLLM分批本地推理（所有数据）
2025-12-25 09:14:17,548 - __main__ - INFO - ============================================================
2025-12-25 09:14:17,548 - __main__ - INFO - 处理批次 [1-128/250]
2025-12-25 09:14:17,548 - __main__ - INFO -   → 生成Baseline答案 (128 条)...
2025-12-25 09:14:17,548 - __main__ - INFO - 批量生成Baseline答案: 128 条
2025-12-25 09:14:21,799 - inference.local_inference - INFO - 使用环境变量 CUDA_VISIBLE_DEVICES: 0,1
2025-12-25 09:14:21,799 - inference.local_inference - INFO - ============================================================
2025-12-25 09:14:21,799 - inference.local_inference - INFO - 初始化vLLM本地模型...
2025-12-25 09:14:21,799 - inference.local_inference - INFO - 模型路径: /home/share/hcz/qwen2.5-14b-awq
2025-12-25 09:14:21,799 - inference.local_inference - INFO - ============================================================
2025-12-25 09:15:19,584 - inference.local_inference - INFO - vLLM模型初始化完成
2025-12-25 09:15:30,103 - __main__ - INFO -   → 生成差异分析 (128 条)...
2025-12-25 09:15:30,104 - __main__ - INFO - 批量生成差异分析: 128 条
2025-12-25 09:24:52,736 - __main__ - INFO -   → 生成Rejected原则 (128 条)...
2025-12-25 09:24:52,736 - __main__ - INFO - 批量生成原则（弱模型）: 128 条
2025-12-25 09:31:15,258 - __main__ - INFO - 批次 [1-128] 本地推理完成
2025-12-25 09:31:15,259 - __main__ - INFO - 处理批次 [129-250/250]
2025-12-25 09:31:15,259 - __main__ - INFO -   → 生成Baseline答案 (122 条)...
2025-12-25 09:31:15,259 - __main__ - INFO - 批量生成Baseline答案: 122 条
2025-12-25 09:31:26,428 - __main__ - INFO -   → 生成差异分析 (122 条)...
2025-12-25 09:31:26,429 - __main__ - INFO - 批量生成差异分析: 122 条
2025-12-25 09:40:44,026 - __main__ - INFO -   → 生成Rejected原则 (122 条)...
2025-12-25 09:40:44,026 - __main__ - INFO - 批量生成原则（弱模型）: 122 条
